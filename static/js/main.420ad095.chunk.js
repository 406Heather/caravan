(this.webpackJsonpcaravan=this.webpackJsonpcaravan||[]).push([[0],{110:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__QX0iX",utxoTxid:"styles_utxoTxid__1p6kt",outputsFormInput:"styles_outputsFormInput__3Osdm",unconfirmed:"styles_unconfirmed__3KzJ4",spent:"styles_spent__10i2F",outputsFormLabel:"styles_outputsFormLabel__NZOnp",maxSpend:"styles_maxSpend__32e8a"}},1294:function(e,t,a){},1299:function(e,t,a){},1300:function(e,t,a){},1301:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABRCAYAAABotpveAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGFBJREFUeNrsXX+MHNV9/9oydjBg1q5/gGzqMQchhuLbQ8VuaIh3hUl6tClrIqWpqLg9qaGqVOK7/lEqtfT23FZp/ro73D9aUmnXVpEipHJH0sRqILpxWxEBVW/tKoEUzI2Bi+vY2GtjSBwnTt9n5o1vbm7ej9md2V/3PtL4x+7sm3nvzfvM9/t53+97RO2Anv4cO2YOPPfyOXYUycDAwCACy1pMVBb7c4wdBfz3wFee8r+psmP4iS/cZ5suMjAwaC1h9fRn2J9D7BgJfhwgLB9TnLgc01UGHQvvxWzx/zl0/LB5nuvE8hZ0Hly+2TBZCQDLa5a5iSV2ZEx3GXQgWY3x532aH7P8M4O2trCgU3nuX1Z0SoSFFQTeSqPM2qqYbuvKgV0MWCEL+/344UqH1mmMexJRGGf1GjYdL7RIi1FfrWjSxUdENxADKKfMLK0BTly26dmuAvo1F/E5+rlTX1JFxXeGsMRjfaS5hDWvU+1jR5LuHB7qHCOuCicuowcYtCsydX5nIEA6GpZn3s9wlkyrY9xrQN8y3WjQpqhKvpsyzdNqwurpz7IDwmJZoEek8QYbYaQFYb5gutOgzTAq+Lwm+c4gdcKC+9fTX+ZWVU51euHBT1J2+61J+7yTjLSm2ZE13WrQFjh+GFZUH3kanE3zelyefVc1DRQfjWtYPf1wybR0KpDU2F/+EeV23U35R/88jfrkuJuIhwLxWzXTxQYtJi0Q06BpiFZbWD39BXb48VRSssqsuY4R1eM0882/d8mqCSiSF781ZLrYwGApW1hemEJZx/Xz3b/yV//UJa0mAyQ6xkgL1t9g08MgxHFFNnvr2orf5oTte/xwKaI/ispz58vsDbxgYIEeJQjAjbgo3owwys6GygeOkBdDh2vUGmxT1LXAr2GFrlHlLli6ZSfVN3ANwxHvnrei6sds4D7T6McCr//uwDdJle+38VZaGI+p3X8rYlYG1lQsqwVuYJJktXnDGrp18zpan/HKnDt9gd6eO0tnah+KfoJGgrZlc+JymkRZAxJSV5FnjsSZAKWI+onP9YhzhMSTIAX3+55+3NNwrAdSL8bOb4MyOx+u+mjs1BT1dXL8PAysiUXEoX45jEj6yi/bIS9uKptQ39icyIOQ9WOO5JNZfj86rguqeinG78dg+aOxgnk9kh3TaOMab2OnMZewpx8kNRuXrJLEqmtW0N7cXe7Re/vNLnHh2HnnFvrigzvoofvuoDXXrVKRANzEsSWT5uNNhOjO2KJ9ZjjB6ZRd4s9EMcYdua669jXmB/2M5nUyfFCVNeuAQTSt6S3gPibJ02ub3Y/+fVqa9zmdYj9a/OUzw4lIp/wZzTbO8Od1rD7C8pZ9meUFZFpLVne6BCUCrK7HHrqHdt51i3u+BENLSN8q1vGbsvJB9AhhpIH7KscgLauOZ6+ozNfz6lDPM9CKcTBUZxsXUuzHLCfGbArlZ+MRFkzEnv7JGKyeKu7PWlddQBV8i2u7tUFH38KMYo4MwhhTPITFBK5R1npDNzLIPTdK5DEUl3g/jiXQBhnX6vTkonD5xTTaePkinWreRGyLQExYS5+Qk88i3MBcwwfuvc11H2VWmf+WYKSFGC6LDObdwygy8d7YqocQ+gPEU2gcKj1sJOV6DEj0GhlqXGMaJbXe2M6wIi1Zj8hlVhvqjFCMPD9kutLi9vQIbCxmG2tNyCwPMeJsEx6iWFifWV33b0FWIK09jLwU+la3L2MDAtlGxw8vcw+itaROvC3EemN75ISASFxnLzsg/PbxB74quKc4yb8YMHuv1sGrR15BilF1UMUMQlBey468K97jb6+9Km3Sj32hNhhUDPbdMV8Ug7zuFVe4945xmg+AFVmzVsiFlbex9zwG23gbYQULJWHx5YnJE7vabrCKXMFXf/Aeffe1t+iDDy8py4CF9nvMTYS+pfHGn+2yZZpHOYHMvyERXuA9hMPaD7pnXVkSMslHzkx5n+UDb2ibn7s3xmyhwwfqlKLsxS7LYkuxqBispYg61FwCbi1pVXibVUP3VnGJXGYtL7Ywc5JnJbqOXkiKzNIqSC3beQxzkqpFtPEwKVKWlnOdSqklWFs2tcYlXBktoM/9+Dy97pymr794zCWvS5d/rnQtoW8NPHSPK9Ar/PJyl2hbjnSK3yMtXdLYrRjoNcl1anxQ5flbNa6bJS7f+3xC0Z/+YM1KXsq2cqreIy2nBf1Yk75cvPasSlw2ldXpX0Nl4VgSF3l3gBAtSRuPK9q4JGtjZRxWbtcOGvnyo3TklWNUevrZpvcUiIkY0YQBF2/uNLlE9er336U3nB8zQrpFqXdB30IIBOK3/qPqyOK3ugEHNc6pCh6wMGFnJaSoJqD6Aw5rGuXrlm1JvpuI4ZY1e4ZZJ+j2BR3DQ/LiqS64hkfufiBwltRhCVmNNj4Y47mNtx4WLKqxv3jcjVQHQFjthBuu+9iC/19gruFLzEV8nRGXzqwi9C3MJsI6A+F1KXQsmaOkN8EicwfThA4Z6UbQZxMgvSMtIKwTCZYlln28GWCLNLNYBM9HVuHa6z63eoSFqHRYVEPFzlytBZYT3ESENXyKEZciJks1i2igZ520FrDeevobLUN3MLUiod5uwjVyDdxbNUCqmQQIi7Rdwuz2no4lqyCgb709d456P36zq121EXo7tEmrmi5HZwIukJ7bupRXCvXJ6Sh3IasxSclqlLRWdHPrBvUtxGW1iTWl88C3I6nV6nCz2nHAjUjqoUNYD3f4sHA0+7pKflKyR05OAuVnNa1FYRsvpyUA6FuT9vfdQycMInXTOyoyeP5Nj7dQO5q4R4QE7EWOqyyYghuULKt7awfriEYdMm3aN0n0I4AZvG2hOLSpmMnqMtLfp9nGxSVNWD6gbx389n8vCIO49LOft2JwjEk6a7JNm29KOtjlOWX4zs8rm9UiuDTgDTxH6K6ok6Ynu8AllPVjUat+CDIX5YJ6M43VBtpYGg+6pAjLB9zEQ9+aYa7iaTpz/qNWvMmK7tr3ntVh8bXw8QDMtK2L5ekVtsTNnV5kQXmpXkPkxfplAueOuUn1quTcdDCh6JfJReQ7H1yd6/iH3yOUiqIfi4L8wCzPMfZWAREnsE9oPPtRbTytsmBX0BIFLCyEQaT8JitLXcPOGwDDnFRFD/sIza+ZVFOQr8W1imbvHlPhrokl+L7gHt7aTNWuIKnFGOX1zAj60SckO9Rf1iJrCLOz4YBb/L+nX7YGW468pYxit/GStLCa+CYb77I66a5PbmlYiq3ZOcbrF506ZLqUrHzXWKcNcoHDErpw0XJAKm1sCCv9N1m1yx72CjW+qQJIIx975dHk6mDTUt8YwsvLVCVO6/Zl09o4dcK6sflrubeblaVaUSDqARhs83pVSJ50LIND7bDN1XzScNwBO9hFz6ffj3adJeB3fcK+nC8/sTZOlbCQ3lN85MHop3bu1NIhLW+ZlVGNAV7hD0ClA+plu0vJeA+XDvl47qS3/Ey1TergLbuj1zd2x/RNXDffW94F5K2rJ07RfCK7o2HNxmnjvKyNUxPdZbvlgKyc9xojrO1bN3RWDqCXhV4KJJVaocFshxJc85olVyXn6hBDhRpJ/fAergqfVYpKktUNPBymaBFY9+1cXxt4ba7qm/D9p9U3rezHqauE5S3wF17ZohZoi1rMshNr42WsgF8GP8DqDNPP/t1iMebpZ7VWawhulioUdgRlHfjKU5Hnf6lwb2ROIHbL+e5rx5VLy9SJfNO3BjMwMJAiMQtLN2m6duFDGq/Em8menTsXuWwM1rXavHENs7Teo6NvnjS9aWDQ5UhEwwJJzdoVraTp/KNPuqQVB6/+QOz6wfLCcjJYmM+svGBgYCwsIeA+Ygt6uIEqgKT2/vFfU/X1t2NfB7mASKeRrbqAhfmwfjvSb7B08oXW5wwaxATfCCQY0Ogwt7xiWsagIcLC7B/cv+Ije7TOn3rxezT8t880JLRDYF+zepVyRVFYWdifEC4iXMWU9C2D5MkKRLUoj4x9jqh06Ik100oGsQmrxIhqH3P9dLafhzU1/DfPkK2xWumtv7qFLjNyuUay4B5SaeZOn9damA+7Q4PcjL7VMRAlvWJGCfmIpQ4kYX+L9igMMxKumm5PibBAUgOf30PWZvVmFHD/MBOoI66vX7eWPn3vPbT5po10wnmH1q7N0Np1GVq+PFpe8xfm23nXFpeUZPD1rSw7zyO7C6bH23Ng50i+SsDuDq2aLPUkY3o+AcISWUOwqHSsqsrzLzGr6h+VwvqqlSvpfkZU22/bdvWzK7+4Qu+fOUsXzn9Av7J+Ha258YbI38LNwwYSsJx0FuYz+paBQRdbWCAdXX1qnuj+xyUqHVF9V/Zu6t3+cZe0onD58mX6v5OnGHFdcInr2tXXRp7nL8yH8Ib7ey2XmGTw9S0I+Ef/96TRt9oEiHdjVpZD4gTbgyGLDOcVRe9MVp5jWnUJERaIp7Dnk1oWFaLW4f5V/uUl5bnQqWBVrbleL7/wo49+Qh+9M8csrTW0cdN6oZuIAFIc2Ci19/ablPoWZhtx3n8yKw0upkFbAKkh0xGuUiViphCEJVoh1KbW7B1o0CrCgjuHeKnJf3hKqln5OpXK/QNB7fnN33B1qnoAS+vixYuuvgWLSwTMJMJygm6lmk0EqcGdxHZhXbzNVydZWVVmOW2jhate2ibbwEBJWABcu77P/YkbDBoU20FOUy99zyUrVZgCXL6dvb9G2TvvaPhGg/rWBmZtXS+w0vyF+apvesRlgkk7irS6bw0xg+YQlk9OJc0cwjBAUiArkU4VxuZNa2nu1DnledC3fvTeSVq9+lqXuFatitatsKMz9C3sT4gdoVX6loGBQYcTVj2A2wf3T6VT3b51E+3etZ123HHLgs/P1i7SmydO0eF/P+b+WwToWydm33VDIOAmqsIgsD+hjr6VJgKR3FgaOJwN7+sviM05GCdGh5e7j8SrJaDcCYjR7Fy4XANRRjX7fjhUrjCOiJ2b5+cUeX1ytDi7H9fFFupTqsBPyX1dvZbuu5KVFf7MkQnxoX6pt/3i3qdBKwkLBAVBHcK6ypL6/Gfvpdu2Rmtj6zLX0y4cvT30ytHj9Px3/ot+8tOfCcs7d7ZG5/lsIjQukZvo70/4qV7LnVVsAVGNkGT7Io4cP4bYbzBIpMGF7JwMJxRZuf5yHihzNHAdHQjjiDiZlUm8FLK/JRaOMVyb1UXm7lmUzJLEUQSLepcE7Yd+GdJsP9z/eerWpZOXAmHB5fPdPxmu/dhKeuQzv+4SkS5wLiww+9U36PCRo8LzoG+dPnWGamfP0003b5SGQXz75R+6uhb0rfWZ65pBVkU+iOIGCmJQzLDfD0bl03HCmI5Z7gglt9V6nGtnOGn1srq0xYqdvP0mSRxKEYUhas1W9QZJEBaCPmFVqXSq/t29lNv5CZe04gK/6f/0Dtq141bX2jr2w3el+ta778y5+tammzcJ03wQQPr1F4+5+tbKFF1ETlblBosps3JqbKBPNUhWQfJIAvWUU4S71mrS4hZvq9vPoA7UtbwMdKrf/9xvuVqVjKxgHZWe2OsSTj1kFXYV//ALOfryY59x3UoZoG/NHnfcWcUrV64Iz4O+lVaeIU83KSdUXJm7L74b08kbeoK0hlp8D2VDPEvAwoJOtbP37gXpNJGEptCpFlk8p87R+7WLtIX9DsQkA8p88vHf0dK3QFjnztVo48YNwjSflAeFDDZ5gnSVuyXIlysqtKQp7pbI3Bh/o8wj/N/43UBM1ycu/Os5XO95WKHzjDDSqqS0AkM1wm1zQlZvTtF+U7xvapr1MWgnwvJ1Klk6je++xdGpQFTP/9tr7qygD/wWZagssqC+Zb/yupC4oG8hzccjrvVCfSsFV9CSDIjBoIvnD3r2uwlaLGTjvOHALNeAYrCGl2IBMZa4VTOWcFVr/HrV0PXGuYUpsgQznJzTiLkaVgSb7lO0397QjKJfnyTce4O0XUJYU19k7p8qpiq3a7vr/umQFcjl2W+8TF995l8XkBUAy6l0YNINa1DB17ee/NJvLwqPCOPSTy+5+taP5k66y9ikDNmgiCIrF3zg+3vF2ZwMrg4gTgIiInRIsm4Un6FLeuPSvGgWk5OGTKsaaJF2lVWQryOoD6zIYUMZbUpYWPblkc8+oIypQjwViErHKnJfV8waAiGBmGSEhllBnCcT2cP61qO/e5/y3IsffKilbzUwKDKSQWGLyCpEWn2I6YmwFGRuyaiGizVOyc1yVVSxYryuonOyLXjeG2o/TvqOoY02IixYUSApiOqy3D+QBATwJ9ih0p2At5glBQJS6U5BIHD0n56z6cCh72hFwcO6w4ykDkBYCDxFqk/CkA3EF3QKkAQ5bpX8pqJRrm+5JYGDmue9ICH3ZutCluS7OHvyGbSDhqVa9iXohsEF1CUduH9h1y8O8Fu4jzr6Fu4N1pssSt6H7jI2CaKa0oCLUy4C2gpNrAsIcqTdB0KMJWnOG9poMWHpLvsCktINUYAVpQr4jAsQEVxE/z5EcMV45nrqIriMDYjrmham7xgYGEgICzqVzrIv0Kp0gz91Qg7qha9v4RqwtqLE9nU31hfBHlzGZnU61pbV4O+dOtxQbbeyDtfX1jyv7QHt0Wx00f5Yzsgqr2Peu27Z177lzt6JiOgt7rrBBUyDrMKu5lsCN1NHUxPhyi+u1N4/c3bwz4oP2HUWIWvLhxus9gnJgNN18woJdYFuXXZL3DC7yc+7k0C7PGxoo4WEdeCvHrPZ0Ufz0+lK6wbEFZy983WqpzXF8UaBwFQI/rCwotDAPWDafxtrj0oDWkhNQloFnlYjfdOz4xw7ynwaXpcM92lYEYjFSirCu+hH30uul5MQQSt2jJFdc0SjPoVOsRi7lrCudoY3SLeRRqxOcPYOrh8ITBamkBTgjiJ0AZHusij6Y2+8E7foKU5UJXYk4RbIZtCmRaTFB4yf41YkL/m55A8kHiYgur8cSE4y2FBekoGjGV6XjOB6fnKxCGlZV1nJy6QqsbLwcihL6gPyjRs4KnuWcoZ+4mNZZMfuP2Txh7vQLjeqm0ANNxGWXow37jCszKT1EPbXrMKaqYSILcetpIzgwXcDTkFgJJ91w4CcCFgTGe7GFBW3bYfXc+KDdFpjUE6ECAjXU+ULbgvOzMnqxc5bFtHGv5Tcz16+sYW/xE3GX9pGI2K93var5z79PnVj98xy0GpEToexAey4nb7/kP9WsVp1gxDV4frp6FJwBb/2nFaf42EZZfVMZTleuIVYFkZhYRR1BkGEOzMuITbfUhhrYhf5a0rFCV0YTWBnm6rAmvItvzAJjfO+qfDdpLNNaj/ZfU4G7tNO0ersPpdQQFzQt+AmDlOT1wHydSpEsOuQFTQ1WFYaYv84d/9SXTucu2+VhIq7mkvINbK9HfzMYWXTUgLlTMQ41woFqQ428XmeMDTTJMIKEJc7yKkJGwTo6lRBqwpaGjQ1BVnZnKiGE9KpdEgLA6PR/L3RcBR7IE+vnnq0cureTc5OqG0rFE+4Hwj81r+P1Nsvxn2a5W6SIixOWjUMdk5cqZiu0KmSSKCO0CTy7N7z3NVtKrg1ka+jzRyuxZQkAyEfc9D6RJeI1Ufx8urG2T33JRzrFKddC6H2c3M2Y/ZLtc720+knM/uogdgh3XzQ55/Yf6jAfX2r0ZtAUCqsKt34KcSCyZaUCbwJR9N2/TRJy9UnuFuCN31O0G5XN27QzA10Bx2fbvfLjXpTwz2d4EK0KOAzbpiBP+CL/NpZwTk2v7aK3Jy4pM7JLx/YCKMgaNOpKEuX31M+0C8FSfu9wPWvbJ332cfvc5+krQwUWNbwYNx/qERyEVgIENQfMKLSXegPM4D/zKwqjTxBDPamuX71gj/8mYC2U0ugzOBqEU4j4rZilnDRahIBnagWZ9efhNvUCrwMYrdpqP1Sq0ew783sYBMJi5OWzu4tC4B8QFHgZxgxEqhtTlTmbZXMoIpFWAYGbecSCtxEL6Zk/6EJTlw5JbMwlw4Cuyy2yo2s5+6fhjsBojJLfxgYGMLSJi5vid79h2BpjZBC35IlMYOkZHmLAX1iAhHqpisNDLofy9MolKf5QJAdJcU0cDDNx09oxsyfxmoP7jUMWRkYLB0sS/sCPM1HZ9djXdjkzf7ZpvvShdGwDLraJRRYWw55+hby5qBv1Rtv4nCiqphuMzAwhJU2ceFt3Mf1rbhbt8O1HG/3MIUuhEPiSH3HNI9B17mEAjcRZDVE6oRZd0++VkSoGxgYGMIKE5dF0cvYpLLsi4GBgSGsJIgrR/NpPsNGpzIwMIjC/wswAA64k7aIrI+oAAAAAElFTkSuQmCC"},132:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return S}));var n=a(2),r=a(12),s=a(20),i=a(14),o=a(13),c=a(0),l=a.n(c),u=a(5),d=a(859),p=a(860),m=a(7),E=a(350),h=a(588),f=a(589),b=a(247),v=a(135),g=a(32),y=function(t){Object(i.a)(n,t);var a=Object(o.a)(n);function n(){return Object(r.a)(this,n),a.apply(this,arguments)}return Object(s.a)(n,[{key:"postprocess",value:function(e){return e.signatures?e.signatures:e}},{key:"matches",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"description",value:function(){return l.a.createElement(E.a,null,l.a.createElement("p",null,"Sign a transaction which",this.params.description,"."),l.a.createElement("p",null,l.a.createElement("small",null,"This transaction is not meant to be broadcast, but just in case, the output address is fixed and owned by Unchained Capital.")),l.a.createElement(h.a,null,l.a.createElement(f.a,null,l.a.createElement(b.a,null,l.a.createElement(v.a,null,"Output Address:"),l.a.createElement(v.a,null,Object(g.b)(Object(u.blockExplorerAddressURL)(this.outputAddress(),this.params.network),l.a.createElement("code",null,this.outputAddress())))),l.a.createElement(b.a,null,l.a.createElement(v.a,null,"Output Amount:"),l.a.createElement(v.a,null,Object(u.satoshisToBitcoins)(this.outputAmountSats()).toString()," BTC")),l.a.createElement(b.a,null,l.a.createElement(v.a,null,"Change Output Address:"),l.a.createElement(v.a,null,l.a.createElement("code",null,this.changeOutputAddress()))),l.a.createElement(b.a,null,l.a.createElement(v.a,null,"Change Output Amount:"),l.a.createElement(v.a,null,Object(u.satoshisToBitcoins)(this.changeOutputAmountSats()).toString()," ","BTC")),l.a.createElement(b.a,null,l.a.createElement(v.a,null,"Fees:"),l.a.createElement(v.a,null,Object(u.satoshisToBitcoins)(this.feeSats()).toString()," BTC")))))}},{key:"inputsTotalSats",value:function(){return this.params.inputs.reduce((function(e,t){return e+t.amountSats.toNumber()}),0)}},{key:"outputAddress",value:function(){return this.params.outputs[0].address}},{key:"outputAmountSats",value:function(){return this.params.outputs[0].amountSats.toNumber()}},{key:"changeOutputAddress",value:function(){return this.params.outputs[1].address}},{key:"changeOutputAmountSats",value:function(){return this.params.outputs[1].amountSats.toNumber()}},{key:"feeSats",value:function(){return this.inputsTotalSats()-this.outputAmountSats()-this.changeOutputAmountSats()}},{key:"unsignedTransaction",value:function(){var e;try{var t=Object(u.unsignedMultisigPSBT)(this.params.network,this.params.inputs,this.params.outputs);e=Object(u.unsignedTransactionObjectFromPSBT)(t)}catch(a){e=Object(u.unsignedMultisigTransaction)(this.params.network,this.params.inputs,this.params.outputs)}return e}},{key:"decoratedPSBT",value:function(){var t=this,a=d.Psbt.fromBase64(this.params.psbt);return a.updateGlobal({globalXpub:u.TEST_FIXTURES.transactions.find((function(e){return e.psbt===t.params.psbt})).extendedPublicKeys.map((function(t){var a=e.from(Object(p.decode)(t.base58String));return{masterFingerprint:e.from(t.rootFingerprint,"hex"),extendedPubkey:a.slice(0,a.length-4),path:t.path}}))}),a.toBase64()}},{key:"interaction",value:function(){var e={keystore:this.params.keystore,network:this.params.network,inputs:this.params.inputs,outputs:this.params.outputs,bip32Paths:this.params.bip32Paths,returnSignatureArray:!0};return this.params.psbtTranslationFlow&&(e.keyDetails={xfp:u.ROOT_FINGERPRINT,path:this.params.derivation}),this.params.decoratePSBTs?e.psbt=this.decoratedPSBT():e.psbt=this.params.psbt,Object(m.SignMultisigTransaction)(e)}},{key:"expected",value:function(){return this.params.keystore===m.COLDCARD?this.params.byteCeilingSignature:this.params.signature}}]),n}(a(58).a);function S(e,t,a){var r=[];return t?(u.TEST_FIXTURES.transactions.forEach((function(t){t.segwit||r.push(new y(Object(n.a)(Object(n.a)(Object(n.a)({},t),{keystore:e}),{},{psbtTranslationFlow:!0,decoratePSBTs:a})))})),r):u.TEST_FIXTURES.transactions.map((function(t){return new y(Object(n.a)(Object(n.a)({},t),{keystore:e}))}))}}).call(this,a(10).Buffer)},1350:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getTotalBalance",(function(){return Le})),a.d(n,"getPendingBalance",(function(){return Fe})),a.d(n,"getConfirmedBalance",(function(){return ze})),a.d(n,"getSlicesWithLastUsed",(function(){return We})),a.d(n,"getSpendableSlices",(function(){return Ge})),a.d(n,"getSpentSlices",(function(){return qe})),a.d(n,"getSlicesWithBalance",(function(){return He})),a.d(n,"getZeroBalanceSlices",(function(){return Xe})),a.d(n,"getUnknownAddressSlices",(function(){return Ye})),a.d(n,"getUnknownAddresses",(function(){return Ve})),a.d(n,"getDepositableSlices",(function(){return Je})),a.d(n,"getWalletDetailsText",(function(){return Ze}));var r={};a.r(r),a.d(r,"SET_ERROR_NOTIFICATION",(function(){return mt})),a.d(r,"CLEAR_ERROR_NOTIFICATION",(function(){return Et})),a.d(r,"setErrorNotification",(function(){return ht})),a.d(r,"clearErrorNotification",(function(){return ft}));var s={};a.r(s),a.d(s,"START_TEST_SUITE_RUN",(function(){return Pi})),a.d(s,"SET_CURRENT_TEST_RUN",(function(){return Ti})),a.d(s,"startTestSuiteRun",(function(){return Oi})),a.d(s,"setCurrentTestRun",(function(){return Ii}));var i={};a.r(i),a.d(i,"SET_KEYSTORE",(function(){return wi})),a.d(i,"SET_KEYSTORE_NOTE",(function(){return xi})),a.d(i,"SET_KEYSTORE_STATUS",(function(){return ji})),a.d(i,"setKeystore",(function(){return Ci})),a.d(i,"setKeystoreNote",(function(){return Ri})),a.d(i,"setKeystoreStatus",(function(){return ki}));var o={};a.r(o),a.d(o,"START_TEST_RUN",(function(){return Ni})),a.d(o,"END_TEST_RUN",(function(){return Ai})),a.d(o,"RESET_TEST_RUN",(function(){return _i})),a.d(o,"SET_TEST_RUN_NOTE",(function(){return Bi})),a.d(o,"startTestRun",(function(){return Ki})),a.d(o,"endTestRun",(function(){return Di})),a.d(o,"resetTestRun",(function(){return Mi})),a.d(o,"setTestRunNote",(function(){return Ui}));var c=a(0),l=a.n(c),u=a(31),d=a.n(u),p=a(89),m=a(19),E=a(823),h=a.n(E),f=a(824),b=a(12),v=a(20),g=a(14),y=a(13),S=a(858),P=a(861),T=a(62),O=a(1402),I=a(1401),w=a(283),x=a(350),j=a(134),C=a(470),R=a(1376),k=a(1377),N=a(1378),A=a(443),_=a(1356),B=a(1357),K=a(1381),D=a(721),M=a(1385),U=a(1379),L=a(1380),F=a(1382),z=a(1383),W=a(1384),G=a(1386),q=a(1387),H=a(32),X=function(){return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Disclaimer"}),l.a.createElement(N.a,null,l.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},Y=function(){return l.a.createElement("div",null,l.a.createElement(x.a,{mt:4,mb:2},l.a.createElement(j.a,{variant:"h2"},"Welcome to Caravan!")),l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Get Started"}),l.a.createElement(N.a,null,l.a.createElement(x.a,{mb:3},l.a.createElement(j.a,null,"Start using caravan by choosing to either make a multisig wallet or fully stateless address.")),l.a.createElement(C.a,{container:!0,alignItems:"center",justify:"center",spacing:3},l.a.createElement(C.a,{item:!0,xs:10,md:4},l.a.createElement(A.a,{variant:"contained","data-cy":"setup-wallet-button",size:"large",color:"primary",href:"#/wallet",startIcon:l.a.createElement(U.a,null)},"Wallet")),l.a.createElement(C.a,{item:!0,xs:10,md:4},l.a.createElement(A.a,{variant:"contained","data-cy":"setup-address-button",size:"large",color:"default",href:"#/address",startIcon:l.a.createElement(L.a,null)},"Address")))))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Stateless Multisig Coordinator"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"Caravan makes bitcoin multisig custody easier and safer through transparency and standards."),l.a.createElement("p",null,"Caravan is a ",l.a.createElement("strong",null,"coordination software")," for multisig addresses and wallets. Caravan can be used to build a multisig wallet derived from xpubs, or individual multisig addresses derived from pubkeys. In both cases, in order to transact from the wallet or address, you must also have your private keys and BIP32 paths."),l.a.createElement("p",null,"Caravan is ",l.a.createElement("strong",null,"stateless"),". It does not itself store any data outside your current browser session. You must safekeep the wallet details (xpubs, BIP32 paths) and addresses (redeem scripts, BIP32 paths) that you create.")))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Keys"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),l.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind. Caravan, being stateless, does not store or ask for your private key but it can talk to hardware devices or software applications which do."),l.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Consensus"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"In order to look up wallet addresses and their balances, and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),l.a.createElement("p",null,"Running a full bitcoin node is the most private way to determine the current state of the bitcoin network. Caravan can be easily configured to use your own node for consensus information and broadcasting transactions."),l.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at",l.a.createElement("code",null," blockstream.info"),"."))))),l.a.createElement(C.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Learn More"}),l.a.createElement(N.a,null,l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(K.a,null,l.a.createElement(F.a,null)),l.a.createElement(D.a,null,Object(H.b)("https://unchained-capital.com/blog/gearing-up-the-caravan/","Blog Post"))),l.a.createElement(B.a,null,l.a.createElement(K.a,null,l.a.createElement(z.a,null)),l.a.createElement(D.a,null,Object(H.b)("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),l.a.createElement(B.a,null,l.a.createElement(K.a,null,l.a.createElement(W.a,null)),l.a.createElement(D.a,null,Object(H.b)("https://github.com/unchained-capital/caravan","Source Code"))))))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Supported Devices"}),l.a.createElement(N.a,null,"Caravan has been ",l.a.createElement("a",{href:"#/test"},"tested")," with the following hardware wallets:",l.a.createElement("ul",null,l.a.createElement("li",null,Object(H.b)("https://shop.trezor.io/product/trezor-one-white","Trezor One")),l.a.createElement("li",null,Object(H.b)("https://shop.trezor.io/product/trezor-model-t","Trezor Model T")),l.a.createElement("li",null,Object(H.b)("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S")),l.a.createElement("li",null,Object(H.b)("https://www.ledger.com/products/ledger-nano-x","Ledger Nano X")),l.a.createElement("li",null,Object(H.b)("https://coldcardwallet.com","Coldcard Mk2 & Mk3"))),"And web browsers:",l.a.createElement("ul",null,l.a.createElement("li",null,Object(H.b)("https://www.google.com/chrome/","Chrome")),l.a.createElement("li",null,Object(H.b)("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),l.a.createElement(M.a,null,l.a.createElement(A.a,{href:"https://github.com/unchained-capital/caravan/issues"},l.a.createElement(G.a,null)," \xa0 Report Issue"),l.a.createElement(A.a,{"data-cy":"run-tests-button",href:"#/test"},l.a.createElement(q.a,null)," \xa0 Run Tests")))))),l.a.createElement(x.a,{mt:2},l.a.createElement(X,null)))},V=a(2),J=a(9),Z=a.n(J),Q=a(16),$=a(5),ee=a(864),te=a(42),ae=a(67),ne=a(26),re=a.n(ne),se=a(208),ie=a.n(se);function oe(){return(oe=Object(Q.a)(Z.a.mark((function e(t,a){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.get(Object($.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return n=e.sent,r=n.data,e.next=7,Promise.all(r.map(function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.get(Object($.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return n=e.sent,r=n.data,s=new re.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object($.satoshisToBitcoins)(s).toFixed(8),amountSats:s,transactionHex:r,time:t.status.block_time});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ce(){return(ce=Object(Q.a)(Z.a.mark((function e(t,a){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.get(Object($.blockExplorerAPIURL)("/address/".concat(t),a));case 3:return n=e.sent,r=n.data,e.abrupt("return",{used:r.chain_stats.funded_txo_count>0||r.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function le(){return(le=Object(Q.a)(Z.a.mark((function e(t){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.get(Object($.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,n=a.data,e.abrupt("return",Math.ceil(n[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ue(){return(ue=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.post(Object($.blockExplorerAPIURL)("/tx",a),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function de(e,t,a){return pe.apply(this,arguments)}function pe(){return(pe=Object(Q.a)(Z.a.mark((function e(t,a,n){var r,s=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:[],e.abrupt("return",new Promise(function(){var e=Object(Q.a)(Z.a.mark((function e(s,i){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(n),params:r}}).then((function(e){return s(e.data)})).catch(i);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function Ee(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function he(){return(he=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s,i,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,s=t.addresses,e.prev=1,i=s||[r],e.next=5,de(a,n,"listunspent",[0,9999999,i]);case 5:return o=e.sent,c=[],o.result.forEach((function(e){c.push(de(a,n,"gettransaction",[e.txid]))})),e.next=10,Promise.all(c);case 10:return l=e.sent,e.abrupt("return",o.result.map((function(e,t){var a=new re.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object($.bitcoinsToSatoshis)(a),transactionHex:l[t].result.hex,time:l[t].result.blocktime}})));case 14:throw e.prev=14,e.t0=e.catch(1),console.error("There was a problem:",e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,e.prev=1,e.next=4,de(a,n,"getreceivedbyaddress",[r]);case 4:if("undefined"!==typeof(s=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from ".concat(a));case 7:return e.abrupt("return",{used:s.result>0});case 10:return e.prev=10,e.t0=e.catch(1),me(e.t0)?console.warn("Address ".concat(r," not found in bitcoind's wallet. Query failed.")):console.error(e.t0.message),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function ve(){return(ve=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.numBlocks,s=void 0===r?2:r,e.next=3,de(a,n,"estimatesmartfee",[s]);case 3:return i=e.sent,o=i.result.feerate,e.abrupt("return",Math.ceil(1e5*o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.hex,e.prev=1,e.next=4,de(a,n,"sendrawtransaction",[r]);case 4:return s=e.sent,e.abrupt("return",s.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ye(e){var t=e.url,a=e.auth,n=e.addresses,r=e.label,s=e.rescan,i=[t,a,"importmulti",[n.map((function(e){return{scriptPubKey:{address:e},label:r,timestamp:0}})),{rescan:s}]];return s?(de.apply(void 0,i),new Promise((function(e){return e({result:[]})}))):de.apply(void 0,i)}function Se(e,t,a){return"public"===a.type?function(e,t){return oe.apply(this,arguments)}(e,t):function(e){return he.apply(this,arguments)}(Object(V.a)(Object(V.a)({},Ee(a)),{address:e}))}function Pe(e,t,a){return Te.apply(this,arguments)}function Te(){return(Te=Object(Q.a)(Z.a.mark((function e(t,a,n){var r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={utxos:[],balanceSats:re()(0),fetchedUTXOs:!1,fetchUTXOsError:""},e.prev=1,e.next=4,Se(t,a,n);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s="private"===n.type&&me(e.t0)?{utxos:[],balanceSats:re()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}:{fetchUTXOsError:e.t0.toString()};case 10:if(r){e.next=12;break}return e.abrupt("return",s);case 12:return i=Object($.sortInputs)(r),o=i.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new re.a(0)),e.abrupt("return",Object(V.a)(Object(V.a)({},s),{},{balanceSats:o,utxos:i,fetchedUTXOs:!0,fetchUTXOsError:""}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Oe(e,t,a){return"public"===a.type?function(e,t){return ce.apply(this,arguments)}(e,t):fe(Object(V.a)(Object(V.a)({},Ee(a)),{address:e}))}function Ie(e,t){return"public"===t.type?function(e){return le.apply(this,arguments)}(e):function(e){return ve.apply(this,arguments)}(Object(V.a)(Object(V.a)({},Ee(t)),{numBlocks:1}))}function we(e,t,a){return"public"===a.type?function(e,t){return ue.apply(this,arguments)}(e,t):function(e){return ge.apply(this,arguments)}(Object(V.a)(Object(V.a)({},Ee(a)),{hex:e}))}var xe=a(117),je=a(192),Ce=function(e){return"asc"===e?-1:1};function Re(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.bip32Path&&!t.bip32Path)throw new Error("Mising BIP32 path for comparing slices.");var n=Ce(a);if(e.change&&!t.change)return n;if(!e.change&&t.change)return-n;var r=parseInt(e.bip32Path.split("/").reverse()[0],10),s=parseInt(t.bip32Path.split("/").reverse()[0],10);return r>s?n:-n}function ke(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.balanceSats&&!t.balanceSats)throw new Error("Missing balance for comparing slices");var n=Ce(a);return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?n:-n}function Ne(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos)throw new Error("Missing utxo array for comparing slices");var n=Ce(a);return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?n:-n}function Ae(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=Ce(a);if(!e.utxos&&!t.utxos&&!e.lastUsed&&!t.lastUsed)return 0;if("Spent"===e.lastUsed)return t.lastUsed&&"Spent"!==t.lastUsed?-n:n;if("Spent"===t.lastUsed)return e.lastUsed&&"Spent"!==e.lastUsed?n:-n;if(e.lastUsedTime&&t.lastUsedTime)return e.lastUsedTime===t.lastUsedTime?0:e.lastUsedTime>=t.lastUsedTime?n:-n;if(e.lastUsedTime&&(!t.lastUsedTime||0===t.utxos.length))return n;if(t.lastUsedTime&&(!e.lastUsedTime||0===e.utxos.length))return-n;if(0===e.utxos.length)return 0===t.utxos.length?0:n;if(0===t.utxos.length)return 0===e.utxos.length?0:-n;var r=Math.max.apply(Math,Object(te.a)(e.utxos.map((function(e){return e.time})))),s=Math.max.apply(Math,Object(te.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(r)&&Number.Number.isNaN(s)?0:Number.isNaN(r)?n:Number.isNaN(s)?-n:r>s?n:-n}function _e(e){var t=je.b.length;if(e.slice(0,t)===je.b&&e.slice(t).match(/^([0-9]+)$/g))return!0;var a,n=e.match(/\/([0-9]+('?))/g).slice(-2),r=Object(xe.a)(n);try{for(r.s();!(a=r.n()).done;){if(a.value.includes("'"))return!1}}catch(s){r.e(s)}finally{r.f()}return n[0]===je.a&&2===n.length}var Be=a(119),Ke=function(e){return Object.values(e.wallet.deposits.nodes)},De=function(e){return[].concat(Object(te.a)(Object.values(e.wallet.deposits.nodes)),Object(te.a)(Object.values(e.wallet.change.nodes)))},Me=function(e){return e.settings.totalSigners},Ue=function(e,t){var a=e.quorum.extendedPublicKeyImporters[t],n="text"===a.method?"Unknown (make sure you have written this down previously!)":a.bip32Path,r="Unknown"===a.rootXfp?"00000000":a.rootXfp;return"unknown"===a.method?'    {\n        "name": "'.concat(a.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(a.extendedPublicKey,'",\n        "xfp" : "').concat(r,'"\n        }'):'    {\n        "name": "'.concat(a.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(a.extendedPublicKey,'",\n        "xfp" : "').concat(r,'",\n        "method": "').concat(a.method,'"\n      }')},Le=Object(Be.a)(De,(function(e){return e.reduce((function(e,t){return e+t.utxos.reduce((function(e,t){return e+parseInt(t.amountSats,10)}),0)}),0)})),Fe=Object(Be.a)(Ke,(function(e){return e.reduce((function(e,t){return t.utxos.length?t.utxos.reduce((function(e,t){return t.confirmed?e:e+parseInt(t.amountSats,10)}),0)+e:e}),0)})),ze=Object(Be.a)([Le,Fe],(function(e,t){return e-t})),We=Object(Be.a)(De,(function(e){return e.map((function(e){if(!e.utxos.length&&e.addressUsed)return Object(V.a)(Object(V.a)({},e),{},{lastUsed:"Spent"});if(!e.utxos.length&&e.balanceSats.isEqualTo(0))return e;var t=Math.max.apply(Math,Object(te.a)(e.utxos.map((function(e){return e.time}))));return Number.isNaN(t)||e.balanceSats.isGreaterThan(0)&&!e.utxos.length?Object(V.a)(Object(V.a)({},e),{},{lastUsed:"Pending"}):Object(V.a)(Object(V.a)({},e),{},{lastUsed:new Date(1e3*t).toLocaleDateString(),lastUsedTime:t})}))})),Ge=Object(Be.a)(We,(function(e){return e.filter((function(e){return("Pending"!==e.lastUsed||e.change)&&"Spent"!==e.lastUsed&&e.utxos.length}))})),qe=Object(Be.a)(We,(function(e){return e.filter((function(e){return e.addressUsed&&e.balanceSats.isEqualTo(0)}))})),He=Object(Be.a)(We,(function(e){return e.filter((function(e){return e.balanceSats.isGreaterThan(0)}))})),Xe=Object(Be.a)(We,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),Ye=Object(Be.a)(De,(function(e){return e.filter((function(e){return!e.addressKnown}))})),Ve=Object(Be.a)([De,Ye],(function(e){return e.map((function(e){return e.multisig.address}))})),Je=Object(Be.a)(Ke,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),Ze=Object(Be.a)([function(e){return e.wallet.common.walletName},function(e){return e.settings.addressType},function(e){return e.settings.network},function(e){return"private"===e.client.type?'{\n    "type": "private",\n    "url": "'.concat(e.client.url,'",\n    "username": "').concat(e.client.username,'"\n  }'):'{\n    "type": "public"\n  }'},function(e){return e.settings.requiredSigners},Me,function(e){for(var t=Me(e),a=[],n=1;n<=t;n+=1)a.push("".concat(Ue(e,n)).concat(n<t?",":""));return a.join("\n")},function(e){return e.settings.startingAddressIndex}],(function(e,t,a,n,r,s,i,o){return'{\n  "name": "'.concat(e,'",\n  "addressType": "').concat(t,'",\n  "network": "').concat(a,'",\n  "client":  ').concat(n,',\n  "quorum": {\n    "requiredSigners": ').concat(r,',\n    "totalSigners": ').concat(s,'\n  },\n  "extendedPublicKeys": [\n    ').concat(i,'\n  ],\n  "startingAddressIndex": ').concat(o,"\n}")}));function Qe(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function $e(e){return{type:"SET_INPUTS",value:e}}function et(){return{type:"ADD_OUTPUT"}}function tt(e){return{type:"SET_CHANGE_OUTPUT_INDEX",value:e}}function at(e,t){return{type:"SET_OUTPUT_ADDRESS",number:e,value:t}}function nt(e,t){return{type:"SET_OUTPUT_AMOUNT",number:e,value:t}}function rt(e){return{type:"SET_CHANGE_ADDRESS",value:e}}function st(e){return{type:"DELETE_OUTPUT",number:e}}function it(e){return{type:"SET_FEE_RATE",value:e}}function ot(e){return{type:"SET_FEE",value:e}}function ct(e){return{type:"FINALIZE_OUTPUTS",value:e}}function lt(e){return{type:"SET_BALANCE_ERROR",value:e}}function ut(e){return{type:"UPDATE_AUTO_SPEND",value:e}}function dt(e,t){return{type:"SET_SIGNING_KEY",number:e,value:t}}function pt(e){return{type:"SET_SPEND_STEP",value:e}}var mt="SET_ERROR_NOTIFICATION",Et="CLEAR_ERROR_NOTIFICATION";function ht(e){return{type:mt,value:e}}function ft(){return{type:Et}}var bt=0,vt=1,gt=2;function yt(e){return{type:"UPDATE_DEPOSIT_SLICE",value:Object(V.a)(Object(V.a)({},e),{change:!1})}}function St(e){return{type:"UPDATE_CHANGE_SLICE",value:Object(V.a)(Object(V.a)({},e),{change:!0})}}function Pt(e,t){return{type:"UPDATE_WALLET_NAME",value:t}}function Tt(){return{type:"RESET_WALLET_VIEW"}}function Ot(){return{type:"RESET_WALLET"}}var It=function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(Q.a)(Z.a.mark((function e(a,n){var r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().settings.network,s=n(),i=s.client,e.prev=2,o=t.map((function(e){var t=e.multisig.address;return Promise.all([Pe(t,r,i),Oe(t,r,i)])})),e.next=6,Promise.all(o);case 6:e.sent.forEach((function(e,n){var r=Object(ae.a)(e,2),s=r[0],i=r[1],o=t[n];if(s&&s.utxos.length){var c=o.change?St:yt,l=Object(V.a)(Object(V.a)({bip32Path:o.bip32Path,addressKnown:!0},s),{},{addressStatus:i});a(c(l))}})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("There was a problem getting updated braid data:",e.t0.message),a(ht(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wt=a(658),xt=a(302),jt=function(e){var t=e.network;return l.a.createElement(xt.a,{"data-cy":"bitcoin-icon",htmlColor:t===$.MAINNET?"orange":"grey"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"bitcoin",className:"svg-inline--fa fa-bitcoin fa-w-16",role:"img",viewBox:"0 0 512 512"},l.a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"})))};jt.defaultProps={network:$.MAINNET};var Ct=jt,Rt=a(585),kt=a(448),Nt=a(1388),At=a(1389),_t=a(1390),Bt=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.name;n.setState({newName:e})},n.render=function(){var e=n.props.name,t=n.state,a=t.editing,r=t.newName,s=t.error;return a?l.a.createElement(C.a,{container:!0,alignItems:"center"},l.a.createElement(C.a,{item:!0},l.a.createElement(Rt.a,{autoFocus:!0,label:"Name",value:r,onChange:n.handleChange,onFocus:function(e){setTimeout(e.target.select.bind(e.target),20)},onKeyDown:function(e){return"Enter"===e.key?n.submit():null},error:n.hasError(),helperText:s})),l.a.createElement(C.a,{item:!0},l.a.createElement(kt.a,{"data-cy":"save-button",size:"small",onClick:n.submit,disabled:n.hasError()},l.a.createElement(Nt.a,null))),l.a.createElement(C.a,{item:!0},l.a.createElement(kt.a,{"data-cy":"cancel-button",color:"secondary",size:"small",onClick:n.cancel},l.a.createElement(At.a,null)))):l.a.createElement("span",null,l.a.createElement(kt.a,{"data-cy":"edit-button",size:"small",onClick:n.startEditing},l.a.createElement(_t.a,null)),"\xa0",l.a.createElement("span",{"data-cy":"editable-name-value",style:{cursor:"pointer"},onClick:n.startEditing},e))},n.hasError=function(){return""!==n.state.error},n.startEditing=function(e){var t=n.props.name;e.preventDefault(),n.setState({editing:!0,newName:t})},n.handleChange=function(e){var t=e.target.value,a="";null!==t&&void 0!==t&&""!==t||(a="Name cannot be blank."),n.setState({newName:t,error:a})},n.submit=function(){var e=n.props;(0,e.setName)(e.number,n.state.newName),n.setState({editing:!1})},n.cancel=function(){var e=n.props.name;n.setState({error:"",newName:e,editing:!1})},n.state={editing:!1,newName:"",error:""},n}return a}(l.a.Component),Kt=Object(wt.a)((function(e){return{root:{height:"100%"},title:{fontSize:"2rem",color:"#212529"},balance:{fontSize:"1.2rem"},gutter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2)}}})),Dt=function(e){var t=e.walletName,a=e.setName,n=e.balance,r=void 0===n?0:n,s=e.pendingBalance,i=e.editable,o=e.network,c=Kt();return l.a.createElement(R.a,{"data-cy":"wallet-info-card",className:c.root},l.a.createElement(N.a,null,l.a.createElement(C.a,{container:!0,direction:"row",alignItems:"center"},i?l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{variant:"h1",className:c.title},l.a.createElement(Bt,{number:0,name:t,setName:a}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{container:!0,alignItems:"center",className:c.gutter},l.a.createElement(C.a,{item:!0,xs:1},l.a.createElement(Ct,{network:o})),l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{variant:"h1",className:c.title},t))),l.a.createElement(C.a,{container:!0,className:c.gutter},l.a.createElement(C.a,{item:!0,xs:12,mt:5},l.a.createElement(j.a,{"data-cy":"balance",variant:"subtitle1",className:c.balance},r," BTC")),l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{"data-cy":"pending-balance",variant:"caption"},0!==s?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{color:s>0?"green":"red",fontWeight:"bold"}},s>0?"+":"",s," BTC")," ","(unconfirmed)"):"")))))))};Dt.defaultProps={network:$.NETWORKS.TESTNET,balance:0,pendingBalance:0};var Mt=Dt,Ut=a(586),Lt=a(730),Ft=a(731),zt=a(1426);function Wt(e){return{type:"SET_NETWORK",value:e}}function Gt(e){return{type:"SET_TOTAL_SIGNERS",value:e}}function qt(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function Ht(e){return{type:"SET_ADDRESS_TYPE",value:e}}function Xt(e){return{type:"SET_FROZEN",value:e}}var Yt=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleNetworkChange=function(t){(0,e.props.setNetwork)(t.target.value)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Network"}),l.a.createElement(N.a,null,l.a.createElement(Ut.a,{component:"fieldset"},l.a.createElement(Lt.a,null,l.a.createElement(Ft.a,{id:"mainnet",control:l.a.createElement(zt.a,{color:"primary"}),name:"network",value:"mainnet",label:l.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===$.MAINNET,disabled:a}),l.a.createElement(Ft.a,{id:"testnet",control:l.a.createElement(zt.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===$.TESTNET,disabled:a})),l.a.createElement(ee.a,null,l.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),a}(l.a.Component);var Vt={setNetwork:Wt},Jt=Object(m.b)((function(e){return{network:e.settings.network,frozen:e.settings.frozen}}),Vt)(Yt),Zt=a(1391),Qt=a(1392),$t=(a(534),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderIncrementRequiredSigners=function(){var t=e.props,a=t.requiredSigners,n=t.totalSigners,r=t.frozen,s=a===n||r;return l.a.createElement(kt.a,{color:"primary",onClick:e.handleIncrementRequiredSigners,disabled:s},l.a.createElement(Zt.a,null))},e.renderDecrementRequiredSigners=function(){var t=e.props,a=t.requiredSigners,n=t.frozen,r=1===a||n;return l.a.createElement(kt.a,{color:"secondary",onClick:e.handleDecrementRequiredSigners,disabled:r},l.a.createElement(Qt.a,null))},e.renderIncrementTotalSigners=function(){var t=e.props,a=t.totalSigners,n=t.frozen,r=7===a||n;return l.a.createElement(kt.a,{color:"primary",onClick:e.handleIncrementTotalSigners,disabled:r},l.a.createElement(Zt.a,null))},e.renderDecrementTotalSigners=function(){var t=e.props,a=t.requiredSigners,n=t.totalSigners,r=t.frozen,s=n===a||2===n||r;return l.a.createElement(kt.a,{color:"secondary",onClick:e.handleDecrementTotalSigners,disabled:s},l.a.createElement(Qt.a,null))},e.handleIncrementRequiredSigners=function(t){var a=e.props,n=a.requiredSigners;(0,a.setRequiredSigners)(n+1),t.preventDefault()},e.handleDecrementRequiredSigners=function(t){var a=e.props,n=a.requiredSigners;(0,a.setRequiredSigners)(n-1),t.preventDefault()},e.handleIncrementTotalSigners=function(t){var a=e.props,n=a.totalSigners;(0,a.setTotalSigners)(n+1),t.preventDefault()},e.handleDecrementTotalSigners=function(t){var a=e.props,n=a.totalSigners;(0,a.setTotalSigners)(n-1),t.preventDefault()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Quorum"}),l.a.createElement(N.a,null,l.a.createElement(x.a,null,l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(C.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),l.a.createElement(C.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},l.a.createElement(C.a,{item:!0},this.renderIncrementRequiredSigners()),l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{variant:"h2"},t)),l.a.createElement(C.a,{item:!0},l.a.createElement("small",null,l.a.createElement("p",null,"Required"))),l.a.createElement(C.a,{item:!0},this.renderDecrementRequiredSigners())),l.a.createElement(C.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{variant:"h6"},"of"))),l.a.createElement(C.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},l.a.createElement(C.a,{item:!0},this.renderIncrementTotalSigners()),l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{variant:"h2"},a)),l.a.createElement(C.a,{item:!0},l.a.createElement("small",null,l.a.createElement("p",null,"Total"))),l.a.createElement(C.a,{item:!0},this.renderDecrementTotalSigners())),l.a.createElement(C.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),a}(l.a.Component));var ea={setTotalSigners:Gt,setRequiredSigners:qt},ta=Object(m.b)((function(e){return e.settings}),ea)($t),aa=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleTypeChange=function(t){(0,e.props.setType)(t.target.value)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Address Type"}),l.a.createElement(N.a,null,l.a.createElement(Ut.a,{component:"fieldset"},l.a.createElement(Lt.a,null,l.a.createElement(Ft.a,{id:$.P2SH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:$.P2SH,label:$.P2SH,onChange:this.handleTypeChange,checked:t===$.P2SH,disabled:a}),l.a.createElement(Ft.a,{id:$.P2SH_P2WSH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:$.P2SH_P2WSH,label:$.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===$.P2SH_P2WSH,disabled:a}),l.a.createElement(Ft.a,{id:$.P2WSH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:$.P2WSH,label:$.P2WSH,onChange:this.handleTypeChange,checked:t===$.P2WSH,disabled:a})),l.a.createElement(ee.a,null,l.a.createElement("small",null,"Choose '",$.P2WSH,"' for best practices, '",$.P2SH,"' for greatest compatibility.")))))}}]),a}(l.a.Component);var na={setType:Ht},ra=Object(m.b)((function(e){return e.settings}),na)(aa);function sa(e){return function(t){return{type:e,value:t}}}function ia(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],s=e[r];a[r]=sa(s)}return a}function oa(e){return function(t,a){return{type:e,number:t,value:a}}}function ca(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],s=e[r];a[r]=oa(s)}return a}var la=function(e){var t=e.handleUrlChange,a=e.handleUsernameChange,n=e.handlePasswordChange,r=e.client,s=e.urlError,i=e.usernameError,o=e.passwordError,c=e.privateNotes,u=e.connectSuccess,d=e.connectError,p=e.testConnection;return l.a.createElement("div",null,l.a.createElement("p",null,"A ",l.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),l.a.createElement("p",null,l.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",Object(H.b)("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),l.a.createElement("form",null,l.a.createElement(C.a,{container:!0,direction:"column",spacing:1},l.a.createElement(C.a,{item:!0},l.a.createElement(Rt.a,{fullWidth:!0,label:"URL",value:r.url,onChange:t,error:""!==s,helperText:s})),l.a.createElement(C.a,{item:!0},l.a.createElement(Rt.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:r.username,onChange:a,error:""!==i,helperText:i})),l.a.createElement(C.a,{item:!0},l.a.createElement(Rt.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:r.password,onChange:n,error:""!==o,helperText:o})),l.a.createElement(C.a,{item:!0},l.a.createElement(x.a,{mt:1},l.a.createElement(A.a,{variant:"contained",onClick:p},"Test Connection")),l.a.createElement(x.a,{mt:2},u&&l.a.createElement(ee.a,null,"Connection Success!"),""!==d&&l.a.createElement(ee.a,{error:!0},d))))),c)};la.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:l.a.createElement("span")};var ua=la,da=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleTypeChange=function(e){var t=n.props,a=t.setType,r=t.network,s=t.setUrl,i=n.state.urlEdited,o=e.target.value;"private"!==o||i||s("http://localhost:".concat("mainnet"===r?8332:18332)),a(o)},n.handleUrlChange=function(e){var t=n.props,r=t.setUrl,s=t.setUrlError,i=n.state.urlEdited,o=e.target.value,c=a.validateUrl(o);i||c||n.setState({urlEdited:!0}),r(o),s(c)},n.handleUsernameChange=function(e){var t=n.props,r=t.setUsername,s=t.setUsernameError,i=e.target.value,o=a.validateUsername(i);r(i),s(o)},n.handlePasswordChange=function(e){var t=n.props,r=t.setPassword,s=t.setPasswordError,i=e.target.value,o=a.validatePassword(i);r(i),s(o)},n.testConnection=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.network,r=t.client,s=t.onSuccess,n.setState({connectError:"",connectSuccess:!1}),e.prev=2,e.next=5,Ie(a,r);case 5:s&&s(),n.setState({connectSuccess:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setState({connectError:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.state={urlEdited:!1,connectError:"",connectSuccess:!1},n}return Object(v.a)(a,null,[{key:"validatePassword",value:function(){return""}},{key:"validateUsername",value:function(){return""}},{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}}]),Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.client,n=t.urlError,r=t.usernameError,s=t.passwordError,i=t.privateNotes,o=this.state,c=o.connectSuccess,u=o.connectError;return l.a.createElement(R.a,null,l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{title:"Bitcoin Client"})),l.a.createElement(N.a,null,l.a.createElement(C.a,{item:!0},l.a.createElement(Ut.a,{component:"fieldset"},l.a.createElement(Lt.a,null,l.a.createElement(Ft.a,{id:"public",control:l.a.createElement(zt.a,{color:"primary"}),name:"clientType",value:"public",label:l.a.createElement("strong",null,"Public"),onChange:this.handleTypeChange,checked:"public"===a.type}),l.a.createElement(Ft.a,{id:"private",control:l.a.createElement(zt.a,{color:"primary"}),name:"clientType",value:"private",label:"Private",onChange:this.handleTypeChange,checked:"private"===a.type})),"public"===a.type&&l.a.createElement(ee.a,null,"'Public' uses the ",l.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",l.a.createElement("code",null,"bitcoind")," node."),"private"===a.type&&l.a.createElement(ua,{handleUrlChange:function(t){return e.handleUrlChange(t)},handleUsernameChange:function(t){return e.handleUsernameChange(t)},handlePasswordChange:function(t){return e.handlePasswordChange(t)},client:a,urlError:n,usernameError:r,passwordError:s,privateNotes:i,connectSuccess:c,connectError:u,testConnection:function(){return e.testConnection()}})))))}}]),a}(l.a.Component);da.defaultProps={urlError:"",usernameError:"",onSuccess:null,passwordError:"",privateNotes:l.a.createElement("span")};var pa=Object(m.b)((function(e){return{network:e.settings.network,client:e.client,urlError:e.client.urlError,url:e.client.url}}),ia({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"}))(da),ma=a(732),Ea=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleIndexChange=function(e){var t=n.props.setStartingAddressIndex,a=e.target.value,r=Object($.validateBIP32Index)(a,{mode:"unhardened"}).replace("BIP32","Starting Address");!r&&a&&t(parseInt(a,10)),n.setState({startingAddressIndexField:a,startingAddressIndexError:r})},n.handleCustomIndexChange=function(e){var t="true"===e.target.value;n.setState({customIndex:t})},n.state={customIndex:0!==e.startingAddressIndex,startingAddressIndexField:e.startingAddressIndex},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.customIndex,a=e.startingAddressIndexField,n=e.startingAddressIndexError;return l.a.createElement(R.a,null,l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{title:"Starting Address Index"})),l.a.createElement(N.a,null,l.a.createElement(C.a,{item:!0},l.a.createElement(Ut.a,{component:"fieldset"},l.a.createElement(Lt.a,null,l.a.createElement(Ft.a,{id:"default",control:l.a.createElement(zt.a,{color:"primary"}),name:"customIndex",value:"false",label:l.a.createElement("strong",null,"Default (0)"),onChange:this.handleCustomIndexChange,checked:!t}),l.a.createElement(ma.a,{title:"The starting address index allows you to skip forward in a wallet. Addresses with indices less than the starting address are ignored."},l.a.createElement(Ft.a,{id:"custom",control:l.a.createElement(zt.a,{color:"primary"}),name:"customIndex",value:"true",label:"Custom",onChange:this.handleCustomIndexChange,checked:t})),l.a.createElement(ee.a,null,"Use the default value if you do not understand how to use starting address index.")),t&&l.a.createElement(Rt.a,{fullWidth:!0,value:a,type:"text",name:"startingAddressIndex",onChange:this.handleIndexChange,error:Boolean(n),helperText:n})))))}}]),a}(l.a.Component);var ha=Object(m.b)((function(e){return{startingAddressIndex:e.settings.startingAddressIndex}}),ia({setStartingAddressIndex:"SET_STARTING_ADDRESS_INDEX"}))(Ea),fa=a(349),ba=a(755),va=a(853),ga=a.n(va),ya=a(588),Sa=a(733),Pa=a(247),Ta=a(135),Oa=a(589),Ia=a(1424),wa=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.startingAddressIndex;return l.a.createElement(x.a,null,t>0&&l.a.createElement(Ia.a,{severity:"info"},"Starting Address Index set to ",t),l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"Name"),l.a.createElement(Ta.a,null,"BIP32 Path"),l.a.createElement(Ta.a,null,"Extended Public Key"))),l.a.createElement(Oa.a,null,e.renderConfirmationInfo())))},e.renderConfirmationInfo=function(){var t=e.props.extendedPublicKeyImporters;return Object.values(t).map((function(e){return l.a.createElement(Pa.a,{key:e.extendedPublicKey},l.a.createElement(Ta.a,null,e.name),l.a.createElement(Ta.a,null,"text"===e.method?"N/A":e.bip32Path),l.a.createElement(Ta.a,null,e.extendedPublicKey))}))},e}return a}(l.a.Component);var xa=Object(m.b)((function(e){return{startingAddressIndex:e.settings.startingAddressIndex,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(wa),ja=a(1425),Ca=a(1398),Ra=a(739),ka=a(756),Na=a(451),Aa=a.n(Na),_a=a(6),Ba=a.n(_a),Ka={c:Ba.a.arrayOf(Ba.a.number).isRequired,e:Ba.a.number.isRequired,s:Ba.a.number.isRequired},Da=(Ba.a.bool,Ba.a.string,Ba.a.array,Ba.a.shape({}),Ba.a.string.isRequired,Ba.a.shape(Ka),Ba.a.array,Ba.a.bool.isRequired,Ba.a.bool.isRequired,Ba.a.bool,Ba.a.string.isRequired,Ba.a.bool,Ba.a.bool.isRequired,Ba.a.string,Ba.a.string.isRequired,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.string,Ba.a.number,Ba.a.number,Ba.a.string,Ba.a.bool,a(300)),Ma=a(828),Ua=a.n(Ma),La=a(1393),Fa=Object(wt.a)((function(){return{copyText:{"&:hover":{cursor:"pointer"}},code:{fontSize:"1rem"}}})),za=function(e){var t=e.newline,a=e.text,n=e.children,r=e.showIcon,s=e.showText,i=e.code,o=Object(Da.a)(e,["newline","text","children","showIcon","showText","code"]),u=Object(c.useState)(!1),d=Object(ae.a)(u,2),p=d[0],m=d[1],E=Object(c.useState)(null),h=Object(ae.a)(E,2),f=h[0],b=h[1],v=Object(w.useSnackbar)().enqueueSnackbar;Object(c.useEffect)((function(){f&&clearTimeout(f)}),[]);var g=Fa(),y=function(){return i?l.a.createElement("code",{className:g.code},a):l.a.createElement("span",null,a)};return l.a.createElement("span",Object.assign({onClick:function(e){return e.stopPropagation()}},o),l.a.createElement(Ua.a,{text:a,onCopy:function(){var e=setTimeout((function(){m(!1),b(null)}),1e3);m(!0),b(e),function(){var e=a.length>25?"".concat(a.substring(0,25),"..."):a;v("Copied ".concat(e," to clipboard"),{preventDuplicate:!0})}()},options:{format:"text/plain"}},l.a.createElement("span",{style:{fontStyle:p?"italic":"inherit",overflowWrap:"break-word"},className:"copyable ".concat(g.copyText)},n,s&&l.a.createElement(y,null),t&&l.a.createElement("br",null),r&&l.a.createElement(kt.a,null,l.a.createElement(La.a,{fontSize:"small",color:p?"primary":"action"})))))};za.defaultProps={newline:!1,showIcon:!1,children:l.a.createElement("span"),showText:!0,code:!1};var Wa=za,Ga=a(829),qa=a.n(Ga),Ha=a(1399),Xa=a(817),Ya=a(757),Va=a(1407),Ja=(a(542),a(110)),Za=a.n(Ja),Qa=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).filterInputs=function(e,t,a){return e.filter((function(e){var n=t.filter((function(t){return t.txid===e.txid&&t.index===e.index}));return a?n.length>0:0===n.length}))},n.toggleInput=function(e){var t=n.state.localInputs;n.setState({toggleAll:!1}),t[e].checked=!t[e].checked,n.setInputsAndUpdateDisplay(t)},n.toggleAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.state,a=t.localInputs,r=t.toggleAll,s=!r;a.forEach((function(t){var a=t;return a.checked=null===e?s:e,a})),n.setInputsAndUpdateDisplay(a),n.setState({toggleAll:s})},n.setInputsAndUpdateDisplay=function(e){var t=n.props,a=t.setInputs,r=t.multisig,s=t.bip32Path,i=t.existingTransactionInputs,o=t.setSpendCheckbox,c=n.state.localInputs,l=e.filter((function(e){return e.checked}));r&&(l=l.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{multisig:r,bip32Path:s})})));var u=l.reduce((function(e,t){return e.plus(t.amountSats)}),new re.a(0));n.setState({inputsSatsSelected:u});var d=l;if(r){var p=n.filterInputs(i,c,!1);p.length>0&&(d=l.concat(p));var m=l.length;0===m?o(!1):m<c.length?o("indeterminate"):o(!0)}d.length>0?a(d):r&&a([])},n.renderInputs=function(){var e=n.props,t=e.network,a=e.showSelection,r=e.finalizedOutputs;return n.state.localInputs.map((function(e,s){var i="".concat(Za.a.utxoTxid).concat(e.confirmed?"":" ".concat(Za.a.unconfirmed)),o=e.confirmed?"confirmed":"unconfirmed";return l.a.createElement(Pa.a,{hover:!0,key:e.txid},a&&l.a.createElement(Ta.a,null,l.a.createElement(Xa.a,{"data-testid":"utxo-checkbox-".concat(s),checked:e.checked,onClick:function(){return n.toggleInput(s)},color:"primary",disabled:r})),l.a.createElement(Ta.a,null,s+1),l.a.createElement(Ta.a,{className:i},l.a.createElement(Wa,{text:e.txid,showIcon:!0,showText:!1},l.a.createElement("code",{title:o},e.txid))),l.a.createElement(Ta.a,null,l.a.createElement(Wa,{text:e.index.toString()})),l.a.createElement(Ta.a,null,l.a.createElement(Wa,{text:Object($.satoshisToBitcoins)(e.amountSats).toString()})),l.a.createElement(Ta.a,null,Object(H.b)(Object($.blockExplorerTransactionURL)(e.txid,t),l.a.createElement(Va.a,null))))}))},n.state={inputsSatsSelected:e.inputsTotalSats,localInputs:e.inputs.map((function(t){return Object(V.a)(Object(V.a)({},t),{},{checked:e.selectAll})})),toggleAll:!0},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.multisig){var t=this.props,a=t.node,n=t.existingTransactionInputs,r=this.state.localInputs,s=this.filterInputs(r,e.existingTransactionInputs,!0).length,i=this.filterInputs(r,n,!0).length,o=i===r.length;e.node.spend===a.spend&&i===s||!o||this.toggleAll(a.spend)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.inputsTotalSats,n=t.showSelection,r=void 0===n||n,s=t.hideSelectAllInHeader,i=t.finalizedOutputs,o=this.state,c=o.inputsSatsSelected,u=o.toggleAll,d=o.localInputs;return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{variant:"h5"},"Available Inputs (".concat(d.length,")")," "),l.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,{hover:!0},r&&!s&&l.a.createElement(Ta.a,null,l.a.createElement(Xa.a,{"data-testid":"utxo-check-all",checked:u,onClick:function(){return e.toggleAll()},color:"primary",disabled:i})),s&&l.a.createElement(Ta.a,null),l.a.createElement(Ta.a,null,"Number"),l.a.createElement(Ta.a,null,"TXID"),l.a.createElement(Ta.a,null,"Index"),l.a.createElement(Ta.a,null,"Amount (BTC)"),l.a.createElement(Ta.a,null,"View"))),l.a.createElement(Oa.a,null,this.renderInputs()),l.a.createElement(Ya.a,null,l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,{colSpan:3},"TOTAL:"),l.a.createElement(Ta.a,{colSpan:2},c?Object($.satoshisToBitcoins)(c).toString():Object($.satoshisToBitcoins)(a).toString())))))}}]),a}(l.a.Component);Qa.defaultProps={multisig:!1,bip32Path:"",showSelection:!0,hideSelectAllInHeader:!1,selectAll:!0,node:{},existingTransactionInputs:[],setSpendCheckbox:function(){}};var $a={setInputs:$e},en=Object(m.b)((function(e){return Object(V.a)(Object(V.a)({},e.settings),{},{finalizedOutputs:e.spend.transaction.finalizedOutputs,existingTransactionInputs:e.spend.transaction.inputs})}),$a)(Qa),tn=a(820),an=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderScript=function(e,t){var a=Object($.scriptToHex)(t),n=Object($.scriptToOps)(t);return l.a.createElement(x.a,{mt:2},l.a.createElement(j.a,{variant:"h6"},e),l.a.createElement(C.a,{container:!0,spacing:2},l.a.createElement(C.a,{item:!0,sm:6},l.a.createElement(Wa,{text:a,showIcon:!0,code:!0})),l.a.createElement(C.a,{item:!0,sm:6},l.a.createElement(Wa,{text:n,showIcon:!0,code:!0}))))},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,n=e.showAddress,r=a.address,s=Object($.multisigRedeemScript)(a),i=Object($.multisigWitnessScript)(a);return l.a.createElement(x.a,{mt:2,style:{maxWidth:"1080px"}},n&&l.a.createElement(j.a,{variant:"h6"},"Address"),l.a.createElement(j.a,{align:"center",variant:"h5"},l.a.createElement(C.a,{container:!0,direction:"column",spacing:2},n&&l.a.createElement(C.a,{item:!0},l.a.createElement(Wa,{text:r,showIcon:!0,code:!0}),"\xa0",Object(H.b)(Object($.blockExplorerAddressURL)(r,t),l.a.createElement(Va.a,null))),l.a.createElement(C.a,{item:!0,justify:"center",container:!0,spacing:3},l.a.createElement(C.a,{item:!0},l.a.createElement(tn.a,{label:"BTC"})),l.a.createElement(C.a,{item:!0},l.a.createElement(tn.a,{label:Object($.networkLabel)(t)})),l.a.createElement(C.a,{item:!0},l.a.createElement(tn.a,{label:"".concat(Object($.multisigRequiredSigners)(a),"-of-").concat(Object($.multisigTotalSigners)(a))})),l.a.createElement(C.a,{item:!0},l.a.createElement(tn.a,{label:Object($.multisigAddressType)(a)}))))),this.renderScript("Script",a),s&&this.renderScript("Redeem Script",s),i&&this.renderScript("Witness Script",i))}}]),a}(l.a.Component);an.defaultProps={showAddress:!0};var nn=Object(m.b)((function(e){return e.settings}),{})(an),rn=a(1406),sn=a(833),on=a.n(sn),cn=Object(wt.a)((function(){return{tooltip:{fontSize:".8rem"}}}));function ln(e){var t=e.addresses,a=void 0===t?[]:t,n=e.client,r=e.importCallback,s=Object(c.useState)(!1),i=Object(ae.a)(s,2),o=i[0],u=i[1],d=Object(c.useState)(""),p=Object(ae.a)(d,2),m=p[0],E=p[1],h=Object(c.useState)(!1),f=Object(ae.a)(h,2),b=f[0],v=f[1],g=Object(c.useState)(""),y=Object(ae.a)(g,2),S=y[0],P=y[1],T=Object(c.useState)(!1),O=Object(ae.a)(T,2),I=O[0],w=O[1],j=cn();Object(c.useEffect)((function(){var e=function(){var e=Object(Q.a)(Z.a.mark((function e(){var t,r,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!1),t=a[a.length-1]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,fe(Object(V.a)(Object(V.a)({},Ee(n)),{},{address:t}));case 7:(r=e.sent)&&"undefined"!==typeof r.used?w(!1):w(!0),P(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),s=e.t0.response&&e.t0.response.status||"unknown",i=401===s?e.t0.response.statusText:500===s?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured",P(i);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();"private"!==n.type||I&&1!==a.length||e()}),[a,n]);var R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(e?"A":"a","ddress").concat(a&&a.length>1?"es":"")};function k(){return(k=Object(Q.a)(Z.a.mark((function e(){var t,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,ye(Object(V.a)(Object(V.a)({},Ee(n)),{addresses:a,label:"",rescan:b}));case 4:if(t=e.sent,s=t.result.reduce((function(e,t){return t.error&&t.error.message||e}),""),E(s),u(!s.length),!r){e.next=12;break}return i=t.result.filter((function(e){return e.success})),e.next=12,r(i,b);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),E("Unable to import, check your settings and try again"),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var N="To get accurate information from your node, your ".concat(R(),"\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.");return l.a.createElement(C.a,{className:j.container},l.a.createElement(x.a,{component:"span",ml:2},l.a.createElement(A.a,{variant:"contained",disabled:!I&&!b||!a.length,onClick:function(){return k.apply(this,arguments)}},"Import ",R(!0))),l.a.createElement(x.a,{component:"span",ml:2},l.a.createElement(Ft.a,{control:l.a.createElement(rn.a,{checked:b,onChange:function(e){return v(e.target.checked)},color:"secondary"}),label:"Rescan"}),l.a.createElement(ma.a,{title:N,classes:{tooltip:j.tooltip}},l.a.createElement(on.a,{fontSize:"small",color:"disabled"}))),l.a.createElement(x.a,null,S.length>0&&l.a.createElement(ee.a,{error:!0},S),m.length>0&&l.a.createElement(ee.a,{error:!0},m),o&&b&&l.a.createElement(ee.a,null,R(!0)," imported, rescan of your node may take some time."),o&&!b&&l.a.createElement(ee.a,null,R(!0)," imported.")))}ln.defaultProps={addresses:[],importCallback(){}};var un=ln,dn=a(587),pn=a(592),mn=a(741),En=a(1411),hn=a(1410),fn=a(7),bn=ca({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),vn=bn.setSignatureImporterName,gn=bn.setSignatureImporterMethod,yn=bn.setSignatureImporterBIP32Path,Sn=bn.setSignatureImporterPublicKeys,Pn=bn.setSignatureImporterSignature,Tn=bn.setSignatureImporterFinalized,On=bn.setSignatureImporterComplete,In=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.signatureJSON,a=e.error;return l.a.createElement(x.a,{mt:2},l.a.createElement(Rt.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:n.handleChange,error:n.hasError(),helperText:a}),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",size:"large",onClick:n.finalize,disabled:""===t},"Add Signature")))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,a="";try{JSON.parse(t)}catch(r){a="Invalid JSON."}n.setState({signatureJSON:t,error:a})},n.finalize=function(){var e=n.props.validateAndSetSignature,t=n.state.signatureJSON;try{e(JSON.parse(t),n.setError)}catch(a){n.setError(a.message)}},n.state={signatureJSON:"",error:""},n}return a}(l.a.Component),wn=a(246),xn=a(1408),jn=a(1409),Cn=(a(1294),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.messages;return l.a.createElement(_.a,{style:{maxHeight:"400px",overflow:"auto"},dense:!0},t.map(e.renderMessage))},e.renderMessage=function(t,a){return l.a.createElement(B.a,{key:a},t.level&&l.a.createElement(K.a,null,e.messageIcon(t)),l.a.createElement(D.a,null,e.renderMessageBodyAndSubmessages(t)))},e.renderMessageBodyAndSubmessages=function(t){return l.a.createElement(x.a,null,e.renderMessageBody(t),t.messages&&l.a.createElement(_.a,{dense:!0},t.messages.map(e.renderMessage)))},e.renderMessageBody=function(e){return l.a.createElement(x.a,null,e.image&&l.a.createElement(x.a,{align:"center"},l.a.createElement("img",{className:"InteractionMessages-image",src:"data:".concat(e.image.mimeType,";base64, ").concat(e.image.data),alt:e.image.label})),l.a.createElement("p",null,e.text))},e.messageIcon=function(e){switch(e.level){case fn.INFO:return l.a.createElement(xn.a,null);case fn.WARNING:return l.a.createElement(jn.a,null);case fn.ERROR:return l.a.createElement(hn.a,null);default:return null}},e}return a}(l.a.Component)),Rn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.version,n=t.currentVersion;return l.a.createElement(x.a,{role:"tabpanel",hidden:a!==n,id:"interactionMessages-tabpanel-".concat(a),"aria-labelledby":"interactionMessages-tab-".concat(a)},a===n&&l.a.createElement(Cn,{messages:e.filteredMessages()}))},e.filteredMessages=function(){var t=e.props,a=t.messages,n=t.version;return a.filter((function(e){return!e.version||e.version===n}))},e}return a}(l.a.Component),kn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.filteredMessages(),t=e.messages,a=e.versions,r=n.currentVersion(a);return a.length<2?l.a.createElement(Cn,{messages:t}):l.a.createElement(x.a,null,l.a.createElement(j.a,{variant:"h6"},"Model"),l.a.createElement(wn.a,{square:!0},l.a.createElement(ja.a,{value:r,onChange:n.handleChange,"aria-label":"interactionMessages-version"},a.map((function(e){return l.a.createElement(Ca.a,{key:e,value:e,label:e,id:"interactionMessages-tab-".concat(e),"aria-controls":"interactionMessages-tabpanel-".concat(e)})})))),a.map((function(e){return l.a.createElement(Rn,{key:e,version:e,currentVersion:r,messages:t})})))},n.currentVersion=function(e){var t=n.state.currentVersion;return t||e[e.length-1]},n.handleChange=function(e,t){n.setState({currentVersion:t})},n.filteredMessages=function(){var e=n.props,t=e.messages,a=e.excludeCodes,r=[],s=[];return t.forEach((function(e){for(var t=0;t<a.length;t+=1){var n=a[t];if((e.code||"").includes(n))return}r.push(e),e.version&&!s.includes(e.version)&&s.push(e.version)})),{versions:s,messages:r}},n.state={currentVersion:""},n}return a}(l.a.Component);kn.defaultProps={messages:[],excludeCodes:[]};var Nn=kn,An=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.signatureImporter,a=e.network,r=e.inputs,s=e.outputs,i=t.method,o=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(fn.SignMultisigTransaction)({network:a,keystore:i,inputs:r,outputs:s,bip32Paths:o})},n.render=function(){var e=n.props,t=e.signatureImporter,a=e.extendedPublicKeyImporter,r=e.isWallet,s=n.state.status,i=n.interaction();return s===fn.UNSUPPORTED?l.a.createElement(ee.a,{error:!0},i.messageTextFor({state:s})):l.a.createElement(x.a,{mt:2},(!r||null===a||"undefined"===typeof a||"text"===a.method)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:10},l.a.createElement(Rt.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:s!==fn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),l.a.createElement(C.a,{item:!0,md:2},!n.bip32PathIsDefault()&&l.a.createElement(A.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:s!==fn.PENDING},"Default"))),l.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement(x.a,{mt:2},n.renderAction()),n.renderDeviceConfirmInfo(),l.a.createElement(Nn,{messages:i.messagesFor({state:s}),excludeCodes:["bip32"]}))},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,a=e.inputsTotalSats;return n.state.status===fn.ACTIVE?l.a.createElement(x.a,null,l.a.createElement("p",null,"Your device will ask you to verify the following information:"),l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null),l.a.createElement(Ta.a,null,"Amount (BTC)"))),l.a.createElement(Oa.a,null,n.renderTargets(),l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null,"Fee"),l.a.createElement(Ta.a,null,t)),l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null,"Total"),l.a.createElement(Ta.a,null,Object($.satoshisToBitcoins)(a).toString()))))):""},n.renderTargets=function(){return n.props.outputs.map((function(e){return l.a.createElement(Pa.a,{hover:!0,key:e.address},l.a.createElement(Ta.a,null,"Address ",l.a.createElement("code",null,e.address)),l.a.createElement(Ta.a,null,e.amount))}))},n.renderAction=function(){var e=n.state,t=e.signatureError,a=e.status;return l.a.createElement(C.a,{container:!0,alignItems:"center"},l.a.createElement(C.a,{item:!0,md:3},l.a.createElement(A.a,{variant:"contained",size:"large",color:"primary",onClick:n.sign,disabled:a!==fn.PENDING},"Sign")),l.a.createElement(C.a,{item:!0,md:9},l.a.createElement(ee.a,{error:!0},t)))},n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t||n.interaction().hasMessagesFor({state:a,level:fn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t?t:n.interaction().messageTextFor({state:a,level:fn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.sign=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.disableChangeMethod,r=t.validateAndSetSignature,s=t.enableChangeMethod,a(),n.setState({signatureError:"",status:fn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,r(i,(function(e){var t={signatureError:e};""!==e&&(t.status=fn.PENDING),n.setState(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({signatureError:e.t0.message,status:fn.PENDING});case 14:s();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.state={signatureError:"",bip32PathError:"",status:n.interaction().isSupported()?fn.PENDING:fn.UNSUPPORTED},n}return a}(l.a.Component),_n=a(845),Bn=a.n(_n),Kn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.status,a=e.error,r=e.partsReceived,s=e.totalParts,i=n.props,o=i.interaction,c=i.width,u=i.startText;if(t===fn.PENDING){var d=o.messageFor({state:t,code:"hermit.command"});return l.a.createElement("div",null,l.a.createElement("p",null,d.instructions),l.a.createElement(C.a,{container:!0,justify:"center",className:"mb-2"},l.a.createElement(Wa,{text:d.command,showText:!1},l.a.createElement("code",null,l.a.createElement("strong",null,d.mode,">")," ",d.command))),l.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:n.handleStart},u)))}if(t===fn.ACTIVE){var p=s>0?r/s*100:0;return l.a.createElement(C.a,{container:!0,direction:"column"},l.a.createElement(C.a,{item:!0},l.a.createElement(Bn.a,{delay:100,onError:n.handleError,onScan:n.handleScan,style:{width:c},facingMode:"user",qrFeedback:!0})),l.a.createElement(C.a,{item:!0},0===p?l.a.createElement("div",null,l.a.createElement(ka.a,null),l.a.createElement("p",null,"Waiting for first QR code...")):l.a.createElement("div",null,l.a.createElement(ka.a,{variant:"determinate",value:p}),l.a.createElement("p",null,"Scanned ",r," of ",s," QR codes..."))),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Cancel")))}return"error"===t||"success"===t?l.a.createElement("div",null,l.a.createElement(ee.a,{error:!0},a),l.a.createElement(A.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Reset")):null},n.handleStart=function(){var e=n.props.onStart;n.setState({status:fn.ACTIVE,error:""}),e&&e()},n.handleError=function(e){var t=n.props.onClear;n.setState({status:"error",error:e.message}),t&&t()},n.handleScan=function(e){var t=n.props,a=t.onSuccess,r=t.interaction;if(e){n.decoder.isComplete()||n.decoder.receivePart(e);var s=n.decoder.progress(),i=s.totalParts,o=s.partsReceived;if(n.setState({totalParts:i,partsReceived:o}),n.decoder.isComplete())if(n.decoder.isSuccess()){var c=n.decoder.data();a(r.parse(c)),n.setState({status:"success"})}else{var l=n.decoder.errorMessage();n.handleError({message:l})}}},n.handleStop=function(){var e=n.props.onClear;n.setState({status:fn.PENDING,error:"",totalParts:0,partsReceived:0}),n.decoder.reset(),e&&e()},n.state={totalParts:0,partsReceived:0,status:fn.PENDING,error:""},n.decoder=new fn.BCURDecoder,n}return a}(c.Component);Kn.defaultProps={width:"256px",startText:"Scan"};var Dn=Kn,Mn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.startTimer()},n.componentWillUnmount=function(){n.cancelTimer()},n.transitionToNextQRCode=function(){var e=n.props.parts,t=n.state,a=t.index,r=t.paused,s=n.props.rate,i=a===e.length-1?0:a+1;if(r)n.setState({index:i});else{var o=setTimeout(n.transitionToNextQRCode,s);n.setState({timer:o,index:i})}},n.cancelTimer=function(){var e=n.state.timer;e&&(clearTimeout(e),n.setState({paused:!0,timer:null}))},n.startTimer=function(){var e=n.props.rate;n.cancelTimer();var t=setTimeout(n.transitionToNextQRCode,e);n.setState({paused:!1,timer:t})},n.togglePlay=function(e){e.preventDefault(),n.state.paused?n.startTimer():n.cancelTimer()},n.render=function(){var e=n.props,t=e.width,a=e.nextText,r=e.onCancel,s=e.onNext,i=e.parts,o=n.state.index,c=i[o];return l.a.createElement("div",{style:{padding:"50px"}},l.a.createElement("h6",null,"QR Code ",o+1," of ",i.length),l.a.createElement("button",{type:"button",onClick:n.togglePlay},l.a.createElement(Aa.a,{size:t,value:c,level:"L"})),l.a.createElement("p",null,"Scan the QR codes above into Hermit."),s&&l.a.createElement("p",null,"When you are done, hit the \u201c",a,"\u201d button to continue."),l.a.createElement(C.a,{container:!0,spacing:10},r&&l.a.createElement(C.a,{item:!0,xs:!0},l.a.createElement(A.a,{onClick:r},"Cancel")),s&&l.a.createElement(C.a,{item:!0,xs:!0},l.a.createElement(A.a,{onClick:s},a))))},n.state={paused:!1,timer:null,index:0},n}return a}(l.a.Component);Mn.defaultProps={width:640,rate:200,nextText:"Scan",onCancel:null,onNext:null,parts:[]};var Un=Mn,Ln=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.signatureImporter,a=e.network,r=e.inputs,s=e.outputs,i=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(fn.SignMultisigTransaction)({keystore:fn.HERMIT,network:a,inputs:r,outputs:s,bip32Paths:i})},n.render=function(){var e=n.props,t=e.signatureImporter,a=e.disableChangeMethod,r=e.resetBIP32Path,s=n.state,i=s.bip32PathError,o=s.signatureError,c=s.status,u=n.interaction();return c===fn.UNSUPPORTED?l.a.createElement(Nn,{messages:u.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}):l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:10},l.a.createElement(Rt.a,{name:"bip32Path",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:c!==fn.PENDING,error:n.hasBIP32PathError(),helperText:i})),l.a.createElement(C.a,{item:!0,md:2},!n.bip32PathIsDefault()&&l.a.createElement(A.a,{type:"button",variant:"contained",size:"small",onClick:r,disabled:c!==fn.PENDING},"Default"))),l.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(C.a,{item:!0},l.a.createElement(Un,{width:400,parts:u.request()}))),l.a.createElement(Dn,{startText:"Scan Signature QR Code",interaction:u,onStart:a,onSuccess:n.import,onClear:n.clear}),l.a.createElement(Nn,{messages:u.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}),l.a.createElement(ee.a,{error:!0},o)))},n.import=function(e){var t=n.props,a=t.validateAndSetSignature,r=t.enableChangeMethod;n.setState({signatureError:""}),r(),a(e,(function(e){n.setState({signatureError:e})}))},n.clear=function(){var e=n.props,t=e.resetBIP32Path,a=e.enableChangeMethod;t(),n.setState({signatureError:""}),a()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){n.setState({bip32PathError:e})}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.state={bip32PathError:"",signatureError:"",status:n.interaction(!0).isSupported()?fn.PENDING:fn.UNSUPPORTED},n}return a}(l.a.Component),Fn=a(1364),zn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.signatureImporter,a=e.network,r=e.inputs,s=e.outputs,i=t.method,o=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(fn.SignMultisigTransaction)({keystore:i,network:a,inputs:r,outputs:s,bip32Paths:o})},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,a=e.inputsTotalSats;return l.a.createElement(x.a,null,l.a.createElement("p",null,"Your device will ask you to verify the following information:"),l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null),l.a.createElement(Ta.a,null,"Amount (BTC)"))),l.a.createElement(Oa.a,null,n.renderTargets(),l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null,"Fee"),l.a.createElement(Ta.a,null,t)),l.a.createElement(Pa.a,{hover:!0},l.a.createElement(Ta.a,null,"Total"),l.a.createElement(Ta.a,null,Object($.satoshisToBitcoins)(a).toString())))))},n.renderTargets=function(){return n.props.outputs.map((function(e){return l.a.createElement(Pa.a,{hover:!0,key:e.address},l.a.createElement(Ta.a,null,"Address ",l.a.createElement("code",null,e.address)),l.a.createElement(Ta.a,null,e.amount))}))},n.render=function(){var e=n.props,t=e.disableChangeMethod,a=e.extendedPublicKeyImporter,r=e.Signer,s=n.state,i=s.signatureError,o=s.status,c=n.interaction();return o===fn.UNSUPPORTED?l.a.createElement(Nn,{messages:c.messagesFor({state:o}),excludeCodes:["hermit.signature_request","hermit.command"]}):l.a.createElement(x.a,{mt:2},l.a.createElement(x.a,{mt:2},n.renderDeviceConfirmInfo(),l.a.createElement(Fn.a,null,l.a.createElement(r,{setError:n.setError,hasError:n.hasBIP32PathError(),onReceive:n.onReceive,onReceivePSBT:n.onReceivePSBT,interaction:n.interaction(),setActive:n.setActive,disableChangeMethod:t,extendedPublicKeyImporter:a}),l.a.createElement(ee.a,{error:!0},i),l.a.createElement(Nn,{messages:c.messagesFor({state:o})}))))},n.setActive=function(){n.setState({status:fn.ACTIVE})},n.onReceive=function(e){var t=n.props,a=t.validateAndSetSignature,r=t.enableChangeMethod;n.setState({signatureError:""}),r&&r(),a(e,(function(e){n.setState({signatureError:e})}))},n.onReceivePSBT=function(e){var t=n.props.validateAndSetSignature;try{var a=n.interaction().parse(e),r=Object.keys(a),s=[];r.forEach((function(e){s.push.apply(s,Object(te.a)(a[e]))})),n.setState({signatureError:""}),t(s,(function(e){n.setState({signatureError:e})}))}catch(i){i.errorType="Coldcard Signing Error",n.setState({signatureError:i.message})}},n.setError=function(e){n.setState({signatureError:e})},n.clear=function(){var e=n.props,t=e.resetBIP32Path,a=e.enableChangeMethod;t(),n.setState({signatureError:""}),a()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){n.setState({bip32PathError:e})}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.state={bip32PathError:"",signatureError:"",status:n.interaction().isSupported()?fn.PENDING:fn.UNSUPPORTED},n}return a}(l.a.Component);zn.defaultProps={resetBIP32Path:null,defaultBIP32Path:"",validateAndSetBIP32Path:null,enableChangeMethod:null,disableChangeMethod:null,extendedPublicKeyImporter:{},fee:"",inputsTotalSats:{}};var Wn=zn,Gn=a(171),qn=a.n(Gn),Hn=a(347),Xn=function(e){var t=e.handlePSBTDownloadClick,a=e.handleWalletConfigDownloadClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{type:"button",variant:"contained",color:"primary",onClick:t},"Download PSBT"),l.a.createElement(A.a,{type:"button",variant:"contained",onClick:a},"Download Coldcard Config"))},Yn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handlePSBTDownloadClick=function(){var t=e.props,a=t.walletName,n=t.interaction,r=t.setActive,s=n.request().toBase64(),i=qn()().format("HHmm"),o="".concat(i,"-").concat(a,".psbt");Object(H.a)(s,o),r()},e.handleWalletConfigDownloadClick=function(){var t=e.props.walletDetailsText;e.reshapeConfig(t)},e.reshapeConfig=function(e){var t=JSON.parse(e),a=t.startingAddressIndex;t.name=0===a?t.name:"".concat(t.name,"_").concat(a.toString()),t.addressType=t.addressType.includes("-")?"P2WSH-P2SH":t.addressType;var n=Object(fn.ConfigAdapter)({KEYSTORE:fn.COLDCARD,jsonConfig:t}).adapt(),r="wc-".concat(t.name,".txt");Object(H.a)(n,r)},e.render=function(){var t=e.props,a=t.onReceivePSBT,n=t.setError;return l.a.createElement("div",null,l.a.createElement(Xn,{handlePSBTDownloadClick:e.handlePSBTDownloadClick,handleWalletConfigDownloadClick:e.handleWalletConfigDownloadClick}),l.a.createElement(Hn.b,{onReceivePSBT:a,setError:n}))},e}return a}(c.Component);var Vn=Object(m.b)((function(e){return{walletName:e.wallet.common.walletName,walletDetailsText:Ze(e)}}),{})(Yn),Jn=function(e){var t=e.signatureImporter,a=e.extendedPublicKeyImporter,n=e.inputs,r=e.outputs,s=e.inputsTotalSats,i=e.fee,o=e.validateAndSetSignature,c=e.network;return l.a.createElement(Wn,{network:c,signatureImporter:t,inputs:n,outputs:r,inputsTotalSats:s,fee:i,extendedPublicKeyImporter:a,validateAndSetSignature:o,Signer:Vn})},Zn=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).titleRef=l.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.title=function(){var e=n.props,t=e.number,a=e.signatureImporter,r=e.setName;return l.a.createElement(Bt,{number:t,name:a.name,setName:r})},n.scrollToTitle=function(){n.props.number===n.getCurrent()&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderImport=function(){var e=n.props,t=e.signatureImporter,a=e.number,r=e.isWallet,s=a>n.getCurrent(),i=n.state.disableChangeMethod,o="signature-".concat(a,"-importer-select-label");return s?l.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):l.a.createElement("form",null,l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:o},"Select Method"),l.a.createElement(pn.a,{labelId:o,id:"signature-".concat(a,"-importer-select"),disabled:i,value:t.method,onChange:n.handleMethodChange},l.a.createElement(mn.a,{value:"unknown"},"< Select method >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.LEDGER},"Ledger"),l.a.createElement(mn.a,{value:fn.COLDCARD,disabled:!r},"Coldcard"),l.a.createElement(mn.a,{value:fn.HERMIT},"Hermit"),l.a.createElement(mn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.network,a=e.signatureImporter,r=e.signatureImporters,s=e.inputs,i=e.inputsTotalSats,o=e.outputs,c=e.fee,u=e.isWallet,d=e.extendedPublicKeyImporter,p=a.method;return p===fn.TREZOR||p===fn.LEDGER?l.a.createElement(An,{network:t,signatureImporter:a,signatureImporters:r,inputs:s,outputs:o,inputsTotalSats:i,fee:c,isWallet:u,extendedPublicKeyImporter:d,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):p===fn.HERMIT?l.a.createElement(Ln,{network:t,signatureImporter:a,inputs:s,outputs:o,inputsTotalSats:i,fee:c,extendedPublicKeyImporter:d,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):p===fn.COLDCARD?l.a.createElement(Jn,{network:t,signatureImporter:a,inputs:s,outputs:o,inputsTotalSats:i,fee:c,extendedPublicKeyImporter:d,validateAndSetSignature:n.validateAndSetSignature}):"text"===p?l.a.createElement(In,{signatureImporter:a,validateAndSetSignature:n.validateAndSetSignature}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number;(0,t.setMethod)(a,e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){var e=n.props,t=e.number,a=e.setSignature,r=e.setPublicKeys,s=e.setFinalized;a(t,""),r(t,[]),s(t,!1)},n.defaultBIP32Path=function(){var e=n.props,t=e.addressType,a=e.network;return e.isWallet?Object($.multisigBIP32Root)(t,a):Object($.multisigBIP32Path)(t,a)},n.resetBIP32Path=function(){var e=n.props,t=e.number,a=e.setBIP32Path;if(e.isWallet){var r=n.props.extendedPublicKeyImporter;if(r&&"text"!==r.method)return}a(t,n.defaultBIP32Path())},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props,i=s.number,o=s.setBIP32Path,c=Object($.validateBIP32Path)(e,r);o(i,e),c?a(c):(a(""),t())},n.renderSignature=function(){var e=n.props,t=e.signatureImporter,a=e.txid,r=JSON.stringify(t.signature);return l.a.createElement("div",null,l.a.createElement("p",null,"The following signature was imported:"),l.a.createElement(x.a,null,l.a.createElement(Wa,{text:r,showIcon:!0,code:!0})),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"secondary",disabled:""!==a,size:"small",onClick:n.reset},"Remove Signature")))},n.validateAndSetSignature=function(e,t){var a=n.props,r=a.number,s=a.inputs,i=a.signatureImporters,o=a.setComplete,c=a.network,l=a.outputs,u=a.setSigningKey;if(Array.isArray(e))if(e.length<s.length)t("Not enough signatures (must be at least one signature for each input).");else if(e.length%s.length===0){var d=e.length/s.length;if(d>Object.values(i).length)t("Too many signatures. Max one set of signatures per required signer.");else{var p=[];if(1===d){for(var m=Object.values(i).filter((function(e){return e.finalized})),E=0;E<e.length;E+=1){var h=E+1,f=e[E];if(""!==Object($.validateHex)(f))return void t("Signature for input ".concat(h," is not valid hex."));var b=void 0;try{b=Object($.validateMultisigSignature)(c,s,l,E,f)}catch(j){return void t("Signature for input ".concat(h," is invalid."))}if(!b)return void t("Signature for input ".concat(h," is invalid."));for(var v=0;v<m.length;v+=1){var g=m[v];if(g.signature[E]===f||g.publicKeys[E]===b)return void t("Signature for input ".concat(h," is a duplicate of a previously provided signature."))}p.push(b)}o(r,{signature:e,publicKeys:p,finalized:!0})}else for(var y=n.filterKnownSignatures(e),S=r;S<=Object.keys(i).length&&y.length>0;){u(S,S-1);for(var P=[],T=[],O=0;O<s.length;O+=1){for(var I=void 0,w=0;w<y.length;w+=1){var x=y[w];if(""!==Object($.validateHex)(x))return void t("Signature for input at index ".concat(O," is not valid hex."));try{I=Object($.validateMultisigSignature)(c,s,l,O,x)}catch(j){console.error(j)}if(I){T.push(I),P.push(x);break}}if(!I)return void t("No valid signature for input ".concat(O," found."))}if(T.length!==s.length||P.length!==s.length)return void t("There was an error in validating the transaction.");o(S,{signature:P,publicKeySet:T,finalized:!0}),y=n.filterKnownSignatures(e),S+=1}}}else t("Number of signatures must be a multiple of number of inputs.");else t("Signature is not an array of strings.")},n.filterKnownSignatures=function(e){for(var t=n.props,a=t.inputs,r=t.signatureImporters,s=Object.values(r).filter((function(e){return e.finalized})),i=[],o=0;o<a.length;o+=1)for(var c=0;c<s.length;c+=1){var l=s[c];i.push(l.signature[o])}return e.filter((function(e){return!i.includes(e)}))},n.state={disableChangeMethod:!1},n}return Object(v.a)(a,[{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce((function(t,a){return t+(e[a].finalized?1:0)}),1)}},{key:"render",value:function(){var e=this.props.signatureImporter;return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:this.title(),ref:this.titleRef}),l.a.createElement(N.a,null,e.finalized?this.renderSignature():this.renderImport()))}}]),a}(l.a.Component);Zn.defaultProps={extendedPublicKeyImporter:{}};var Qn={setName:vn,setMethod:gn,setBIP32Path:yn,setPublicKeys:Sn,setSignature:Pn,setFinalized:Tn,setComplete:On,setSigningKey:dt},$n=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid}),e.spend.transaction)}),Qn)(Zn),er=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.signingKeys,a=e.number;t[a-1]>0&&n.updateKeySelection(t[a-1])},n.render=function(){var e=n.state.selection,t=n.props,a=t.number,r=t.signatureImporter;return l.a.createElement("div",null,n.renderKeySelectorMenu(),(e>0&&a>0||r&&r.finalized)&&n.renderSignatureImporter())},n.renderSignatureImporter=function(){var e=n.props.number,t=n.getAssociatedExtendedPublicKeyImporter();return l.a.createElement(x.a,{mt:2},l.a.createElement($n,{number:e,extendedPublicKeyImporter:t}))},n.getAssociatedExtendedPublicKeyImporter=function(){var e=n.props.extendedPublicKeyImporters,t=n.state.selection,a=null;return t&&(a=e[t]),a},n.renderKeySelectorMenu=function(){var e=n.props,t=e.number,a=e.signatureImporters,r=e.setBIP32Path,s=n.state.selection,i="keySelector".concat(t),o=n.getAssociatedExtendedPublicKeyImporter();if(null!==o&&t>0){var c=a[t];if(c.signature.length>0)return"";o.bip32Path!==c.bip32Path&&"text"!==o.method&&setTimeout((function(){r(t,o.bip32Path)}),0)}return l.a.createElement("form",null,l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:i},"Select Key"),l.a.createElement(pn.a,{labelId:i,id:"signature-".concat(t,"-key-select"),value:s,onChange:n.handleKeyChange},l.a.createElement(mn.a,{value:""},"< Select Extended Public Key >"),n.renderKeySelectorMenuItems())))},n.extendedPublicKeyImporterNotUsed=function(e){var t=n.props,a=t.inputs,r=t.network,s=t.signatureImporters;if(0===t.number)return!0;for(var i=0;i<a.length;i+=1)for(var o=a[i],c=Object($.deriveChildPublicKey)(e.extendedPublicKey,o.bip32Path,r),l=1;l<=Object.keys(s).length;l+=1)for(var u=s[l],d=0;d<u.publicKeys.length;d+=1){if(u.publicKeys[d]===c)return!1}return!0},n.renderKeySelectorMenuItems=function(){for(var e=n.props,t=e.extendedPublicKeyImporters,a=e.totalSigners,r=[],s=1;s<=a;s+=1){var i=t[s];n.extendedPublicKeyImporterNotUsed(i)&&r.push(l.a.createElement(mn.a,{value:s,key:s},i.name))}return r},n.handleKeyChange=function(e){var t=n.props.onChange;(n.updateKeySelection(e.target.value),t)&&t(e,n.props.extendedPublicKeyImporters[e.target.value])},n.state={selection:""},n}return Object(v.a)(a,[{key:"updateKeySelection",value:function(e){if(this.setState({selection:e}),""!==e){var t=this.props,a=t.extendedPublicKeyImporters,n=t.setMethod,r=t.number,s=t.setSigningKey,i=a[e].method;n(r,"text"===i?"":i),r>0&&s(r,e)}}}]),a}(l.a.Component);er.defaultProps={onChange:null,signatureImporter:null};var tr={setBIP32Path:yn,setMethod:gn,setSigningKey:dt},ar=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)({},e.quorum),{},{totalSigners:e.spend.transaction.totalSigners,inputs:e.spend.transaction.inputs,network:e.settings.network,signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],signingKeys:e.spend.transaction.signingKeys})}),tr)(er),nr={keySelected:!1,deviceType:"unknown",bip32Path:"",hasInteraction:!1,interactionState:fn.PENDING,interactionError:"",interactionMessage:""},rr=function(e,t){switch(t.type){case"RESET":return Object(V.a)(Object(V.a)({},e),{},{interactionError:"",interactionMessage:"",interactionState:fn.PENDING});case"SET_KEY_SELECTED":return Object(V.a)(Object(V.a)({},e),{},{keySelected:!0});case"SET_KEY_UNSELECTED":return Object(V.a)(Object(V.a)({},e),{},{keySelected:!1});case"SET_DEVICE_TYPE":return Object(V.a)(Object(V.a)({},e),{},{deviceType:t.value});case"SET_BIP32_PATH":return Object(V.a)(Object(V.a)({},e),{},{bip32Path:t.value});case"SET_ACTIVE":return Object(V.a)(Object(V.a)({},e),{},{interactionState:fn.ACTIVE});case"HAS_INTERACTION":return Object(V.a)(Object(V.a)({},e),{},{hasInteraction:t.value});case"SET_MESSAGE":return Object(V.a)(Object(V.a)({},e),{},{interactionMessage:t.value,interactionError:""});case"SET_ERROR":return Object(V.a)(Object(V.a)({},e),{},{interactionError:t.value,interactionMessage:""});default:return e}},sr=function(e){var t=e.slice,a=e.network,n=Object(c.useReducer)(rr,nr),r=Object(ae.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(null),u=Object(ae.a)(o,2),d=u[0],p=u[1],m=Object($.multisigAddressType)(t.multisig),E=Object($.multisigRequiredSigners)(t.multisig),h=Object($.multisigTotalSigners)(t.multisig);function f(){return(f=Object(Q.a)(Z.a.mark((function e(){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"SET_ACTIVE"}),a=t.multisig,e.prev=2,e.next=5,d.run();case 5:(n=e.sent).address===a.address&&n.serializedPath===d.bip32Path?i({type:"SET_MESSAGE",value:"Success"}):i({type:"SET_ERROR",value:"An unknown error occured"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i({type:"SET_ERROR",value:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(ar,{number:0,onChange:function(e,n){var r=t.multisig,s=t.bip32Path;if(n){i({type:"SET_KEY_SELECTED"}),i({type:"SET_DEVICE_TYPE",value:n.method});var o="".concat(n.bip32Path).concat(s.slice(1));"Unknown"!==n.bip32Path?i({type:"SET_BIP32_PATH",value:o}):i({type:"SET_BIP32_PATH",value:""}),"trezor"===n.method?(p(Object(fn.ConfirmMultisigAddress)({keystore:n.method,network:a,bip32Path:o,multisig:r})),i({type:"HAS_INTERACTION",value:!0}),i({type:"RESET"})):(p(null),i({type:"HAS_INTERACTION",value:!1}),i({type:"RESET"}))}else p(null),i({type:"HAS_INTERACTION",value:!1}),i({type:"RESET"}),i({type:"SET_KEY_UNSELECTED"})}}),s.keySelected&&l.a.createElement("form",null,l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,null,"Select Method"),l.a.createElement(pn.a,{id:"confirm-importer-select",value:"",onChange:function(e){if(""!==e.target.value){i({type:"SET_DEVICE_TYPE",value:e.target.value});var n=t.multisig;p(Object(fn.ConfirmMultisigAddress)({keystore:e.target.value,network:a,bip32Path:s.bip32Path,multisig:n})),i({type:"HAS_INTERACTION",value:!0}),i({type:"RESET"})}}},l.a.createElement(mn.a,{value:""},"< Select method >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.COLDCARD,disabled:!0},"Coldcard"),l.a.createElement(mn.a,{value:fn.LEDGER,disabled:!0},"Ledger"),l.a.createElement(mn.a,{value:fn.HERMIT,disabled:!0},"Hermit"),l.a.createElement(mn.a,{value:"text",disabled:!0},"Enter as text")))),s.hasInteraction&&l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,null,l.a.createElement("p",null,"Confirm the following ",a.length?a:""," ",m," ",E," -of-",h," multisig address on your device:"),l.a.createElement(ya.a,null,l.a.createElement(Oa.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"Address:"),l.a.createElement(Ta.a,null,l.a.createElement("code",null,t.multisig.address))),l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"BIP32 Path:"),l.a.createElement(Ta.a,null,l.a.createElement("code",null,s.bip32Path)))))),""!==s.interactionMessage&&l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",style:{color:"green"}},l.a.createElement(En.a,null),"\xa0 ",s.interactionMessage)),""!==s.interactionError&&l.a.createElement(x.a,{mt:2,align:"center",style:{color:"red"}},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(hn.a,null),"\xa0 Confirmation Error"),l.a.createElement(j.a,{variant:"caption"},s.interactionError)),""===s.interactionMessage&&""===s.interactionError&&l.a.createElement(Nn,{messages:d.messagesFor({state:s.interactionState})}),l.a.createElement(A.a,{variant:"contained",size:"large",onClick:function(){return f.apply(this,arguments)},disabled:s.interactionState===fn.ACTIVE||!s.bip32Path},"Confirm"),(""!==s.interactionMessage||""!==s.interactionError)&&l.a.createElement(A.a,{size:"large",onClick:function(){return i({type:"RESET"})}},"Reset")))};sr.defaultProps={network:""};var ir=sr,or=Object(wt.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var cr=function(e,t){var a=e.tab,n=l.a.createElement(Ca.a,Object.assign({value:t.toString(),key:t},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t),a));return a.disabled?l.a.createElement(ma.a,{title:"Not available for this address",key:t,arrow:!0},l.a.createElement("div",null,n)):n};function lr(e){var t=e.children,a=e.value,n=e.index,r=Object(Da.a)(e,["children","value","index"]);return l.a.createElement(C.a,Object.assign({container:!0,justify:"center",style:{display:a===n?"inherit":"none"}},r),l.a.createElement(C.a,{item:!0,md:11},l.a.createElement(x.a,null,t)))}lr.defaultProps={children:l.a.createElement("span")};var ur=function(e){var t=e.slice,a=e.client,n=e.network,r=l.a.useState("0"),s=Object(ae.a)(r,2),i=s[0],o=s[1],c=or(),u=[{tab:{label:"Redeem Script"},panel:l.a.createElement(nn,{multisig:t.multisig,showAddress:!1})},{tab:{label:"Confirm on Device"},panel:l.a.createElement("div",null,l.a.createElement(j.a,{variant:"h6"},"Verify Address with Quorum Participants"),l.a.createElement(j.a,{variant:"caption"},"(not all device variants supported)"),l.a.createElement(ir,{slice:t,network:n}))},{tab:{label:"UTXOs",disabled:!t.balanceSats.isGreaterThan(0)},panel:l.a.createElement(en,{inputs:t.utxos,inputsTotalSats:t.balanceSats,showSelection:!1})},{tab:{label:"Watch Address",disabled:"private"!==a.type},panel:l.a.createElement("div",null,l.a.createElement(j.a,{variant:"h6"},"Import Watch-Only Address"),l.a.createElement(j.a,{variant:"caption"},"Address must be imported to get accurate balance data. If this address has previous history, a rescan may be required."),l.a.createElement(x.a,{my:3},l.a.createElement(un,{addresses:[t.multisig.address],client:a})))}];return l.a.createElement(C.a,{container:!0,className:c.root},l.a.createElement(Ha.a,{position:"static",color:"default",variant:"outlined"},l.a.createElement(ja.a,{value:i,onChange:function(e,t){return o(t)},"aria-label":"Slice Details View",centered:!0},u.map(cr))),u.map((function(e,t){var a=e.panel;return l.a.createElement(lr,{value:i,index:t.toString(),key:t},l.a.createElement(x.a,{my:3},a))})))},dr=Object(wt.a)((function(e){return{panel:{boxShadow:"inset 0px 0px 4px 1px ".concat(e.palette.grey[500])},spent:{textDecoration:"line-through"}}})),pr=function(e){var t=e.slices,a=e.search,n=e.paging,r=e.title,s=e.client,i=e.network,o=e.disabled,c=dr(),u={search:a,paging:n,detailPanelType:"single",showTitle:r&&r.length||!1,emptyRowsWhenPaging:!1,pageSize:10,pageSizeOptions:[10,20,50]};u.toolbar=u.showTitle&&u.search;var d=[{title:"Path Suffix",field:"bip32Path",render:function(e){return l.a.createElement(j.a,null,e.bip32Path.replace("m","*"))},type:"string",defaultSort:"asc",customSort:Re},{title:"UTXOs",field:"utxos",width:"50px",render:function(e){return l.a.createElement(j.a,null,e.utxos.length)},customSort:Ne},{title:"Balance",field:"balanceSats",render:function(e){return l.a.createElement(j.a,null,Object($.satoshisToBitcoins)(e.balanceSats).toString())},customSort:ke},{title:"Last Used",field:"lastUsed",render:function(e){return l.a.createElement(j.a,null,e.lastUsed||"")},customSort:Ae},{title:"Address",field:"address",sorting:!1,render:function(e){return l.a.createElement(Wa,{text:e.multisig.address,showIcon:!0,showText:!0,code:!0,className:e.addressUsed&&e.balanceSats.isEqualTo(0)?c.spent:""})}}];return d=d.filter((function(e){return!o.includes(e.field)})),l.a.createElement(qa.a,{options:u,columns:d,data:t,detailPanel:[{tooltip:"Address Details",render:function(e){return l.a.createElement(x.a,{p:1,className:c.panel},l.a.createElement(ur,{client:s,slice:e,network:i}))}}]})};pr.defaultProps={search:!1,paging:!1,title:"",disabled:[]};var mr,Er=pr,hr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).getNextDepositAddress=function(){var e=n.state.depositIndex;n.setState({depositIndex:e+1}),setTimeout(n.getDepositAddress,0)},n.getDepositAddress=function(){var e=n.props,t=e.network,a=e.client,r=e.updateDepositSlice,s=e.depositableSlices,i=e.enqueueSnackbar,o=n.state.depositIndex;o<s.length&&n.setState({slice:s[o],address:s[o].multisig.address}),clearInterval(mr),mr=setInterval(Object(Q.a)(Z.a.mark((function e(){var s,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=n.state,c=o.address,l=o.slice,e.next=4,Pe(c,t,a);case 4:(s=e.sent)&&s.utxos&&s.utxos.length&&(clearInterval(mr),r(Object(V.a)(Object(V.a)({},s),{},{bip32Path:l.bip32Path})),i("Deposit received. A new address should now be available for deposit."),n.resetDepositAddressIndex(),setTimeout(n.getDepositAddress,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3)},n.handleAmountChange=function(e){var t=e.target.value,a="";t.length&&!t.match(/^[0-9.]+$/)&&(a="Amount must be numeric");var r=t.split(".");r.length>2?a="Amount must be numeric":2===r.length&&r[1].length>8&&(a="Amount must have maximum precision of 8 decimal places"),n.setState({amount:e.target.value,amountError:a})},n.qrString=function(){var e=n.state,t=e.address,a=e.amount;return"bitcoin:".concat(t).concat(a?"?amount=".concat(a):"")},n.resetDepositAddressIndex=function(){var e=n.props.depositableSlices;n.setState({slice:e[0],address:e[0].multisig.address,depositIndex:0})},n.state={address:"",amount:0,amountError:"",depositIndex:0,slice:null},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(mr)}},{key:"render",value:function(){var e=this.props,t=e.client,a=e.network,n=e.depositableSlices,r=this.state,s=r.address,i=r.amount,o=r.amountError,c=r.depositIndex,u=r.slice;return l.a.createElement("div",null,l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(C.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(Wa,{text:s,newline:!0,showText:!1},l.a.createElement(Aa.a,{size:300,value:this.qrString(),level:"L"}))),l.a.createElement(C.a,{item:!0},l.a.createElement(j.a,{align:"center",variant:"subtitle1"},"Scan QR code or click to copy address to clipboard.")),l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(x.a,{my:3},l.a.createElement(Rt.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:i,error:""!==o,helperText:o,InputProps:{endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(Ct,{network:a}))}})))),u?l.a.createElement(Er,{slices:[u],client:t,network:a,disabled:["lastUsed"]}):"",l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.getNextDepositAddress,disabled:c>=n.length-1},"Next Address")))))}}]),a}(l.a.Component);var fr,br={updateDepositSlice:yt,resetWalletView:Tt},vr=Object(m.b)((function(e){return Object(V.a)(Object(V.a)({},e.settings),{},{depositableSlices:Je(e),client:e.client})}),br)(Object(w.withSnackbar)(hr)),gr=a(1360),yr=a(821),Sr=a(819),Pr=a(434),Tr=a(1427),Or=a(1405),Ir=a(1404),wr=a(850),xr=a.n(wr),jr=a(849),Cr=a.n(jr),Rr=a(848),kr=a.n(Rr),Nr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).interaction=null,n.componentDidMount=function(){n.defaultMode()},n.addressContent=function(){var e=n.props,t=e.node,a=e.network,r=e.client,s=t.multisig,i=t.addressUsed,o=t.balanceSats,c=n.state,u=c.expandMode,d=c.showMenu,p=c.showMenuIcon;return l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(j.a,null,l.a.createElement(Wa,{text:s.address,showIcon:!0,showText:!1},l.a.createElement("code",{className:i&&o.isEqualTo(0)?Za.a.spent:""},s.address),"\xa0"),Object(H.b)(Object($.blockExplorerAddressURL)(s.address,a),l.a.createElement(kr.a,{onClick:function(e){return e.stopPropagation()}}))),l.a.createElement(Cr.a,{onClick:n.handleMenu,style:{float:"right",display:p&&n.hasAdditionalOptions()?"block":"none"},"aria-controls":"address-menu","aria-haspopup":"true"}),l.a.createElement(Pr.a,{id:"address-menu",anchorEl:fr,keepMounted:!0,open:d,onClose:n.handleClose},o.isGreaterThan(0)&&l.a.createElement(mn.a,{selected:0===u,onClick:function(e){n.setState({expandMode:0}),n.handleClose(e)}},"UTXOs"),l.a.createElement(mn.a,{selected:1===u,onClick:function(e){n.setState({expandMode:1}),n.handleClose(e)}},"Scripts"),n.canConfirm()&&l.a.createElement(mn.a,{selected:2===u,onClick:function(e){n.setState({expandMode:2}),n.handleClose(e)}},"Confirm on Device"),"private"===r.type&&l.a.createElement(mn.a,{selected:3===u,onClick:function(e){n.setState({expandMode:3}),n.handleClose(e)}},"Watch with bitcoind Node")))},n.canConfirm=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return"trezor"===e.method})).length>0},n.hasAdditionalOptions=function(){var e=n.props,t=e.client;return e.node.balanceSats.isGreaterThan(0)||"private"===t.type||n.canConfirm()},n.handleClose=function(e){e.stopPropagation(),n.setState({showMenu:!1})},n.handleMenu=function(e){e.stopPropagation(),fr=e.target,n.setState({showMenu:!0})},n.panelExpand=function(e,t){n.setState({showMenuIcon:t})},n.render=function(){var e=n.props.node.bip32Path;return l.a.createElement(Tr.a,{onChange:n.panelExpand},l.a.createElement(Or.a,{expandIcon:l.a.createElement(xr.a,null),"aria-controls":"panel1a-content",id:"address-header".concat(e)},n.addressContent()),l.a.createElement(Ir.a,null,l.a.createElement(C.a,{container:!0},n.expandContent())))},n.defaultMode=function(){var e=n.props.node.balanceSats;n.setState({expandMode:e.isGreaterThan(0)?0:1})},n.expandContent=function(){var e=n.props,t=e.client,a=e.node,r=e.setSpendCheckbox,s=a.utxos,i=a.balanceSats,o=a.multisig,c=a.bip32Path,u=a.spend,d=n.state.expandMode;switch("public"===t.type&&3===d&&n.defaultMode(),i.isEqualTo(0)&&0===d&&n.defaultMode(),d){case 0:return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(en,{inputs:s,inputsTotalSats:i,multisig:o,bip32Path:c,hideSelectAllInHeader:!0,selectAll:u,node:a,setSpendCheckbox:r}));case 1:return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(nn,{multisig:o,showAddress:!1}));case 2:return n.renderAddressConfirmation();case 3:return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(un,{addresses:[o.address]}));default:return""}},n.renderAddressConfirmation=function(){var e=n.state,t=e.interactionState,a=e.interactionMessage,r=e.interactionError,s=e.hasInteraction;return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(ar,{number:0,onChange:n.keySelected}),s&&l.a.createElement(l.a.Fragment,null,n.confirmAddressDescription(),""!==a&&l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",style:{color:"green"}},l.a.createElement(En.a,null),"\xa0 ",a)),""!==r&&l.a.createElement(x.a,{mt:2,align:"center",style:{color:"red"}},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(hn.a,null),"\xa0 Confirmation Error"),l.a.createElement(j.a,{variant:"caption"},r)),""===a&&""===r&&l.a.createElement(Nn,{messages:n.interaction.messagesFor({state:t})}),l.a.createElement(A.a,{variant:"contained",size:"large",onClick:n.confirmOnDevice,disabled:t===fn.ACTIVE},"Confirm"),(""!==a||""!==r)&&l.a.createElement(A.a,{size:"large",onClick:n.resetInteractionState},"Reset")))},n.resetInteractionState=function(){n.setState({interactionError:"",interactionMessage:"",interactionState:fn.PENDING})},n.confirmOnDevice=Object(Q.a)(Z.a.mark((function e(){var t,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({interactionState:fn.ACTIVE}),t=n.props.node,a=t.multisig,e.prev=3,e.next=6,n.interaction.run();case 6:(r=e.sent).address===a.address&&r.serializedPath===n.interaction.bip32Path?n.setState({interactionState:fn.ACTIVE,interactionMessage:"Success",interactionError:""}):n.setState({interactionState:fn.ACTIVE,interactionError:"An unknow error occured",interactionMessage:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n.setState({interactionState:fn.ACTIVE,interactionError:e.t0.message,interactionMessage:""});case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.keySelected=function(e,t){var a=n.props,r=a.network,s=a.node,i=s.multisig,o=s.bip32Path;n.interaction=Object(fn.ConfirmMultisigAddress)({keystore:t.method,network:r,bip32Path:"".concat(t.bip32Path).concat(o.slice(1)),multisig:i}),n.setState({hasInteraction:!0}),n.resetInteractionState()},n.state={expandMode:null,showMenu:!1,showMenuIcon:!1,hasInteraction:!1,interactionState:fn.PENDING,interactionError:"",interactionMessage:""},n}return Object(v.a)(a,[{key:"confirmAddressDescription",value:function(){var e=this.props,t=e.network,a=e.node,n=e.requiredSigners,r=e.totalSigners,s=a.multisig,i=Object($.multisigAddressType)(s);return l.a.createElement(x.a,null,l.a.createElement("p",null,"Confirm the following ",t," ",i," ",n,"-of-",r," multisig address on your device:"),l.a.createElement(ya.a,null,l.a.createElement(Oa.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"Address:"),l.a.createElement(Ta.a,null,l.a.createElement("code",null,s.address))),l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"BIP32 Path:"),l.a.createElement(Ta.a,null,l.a.createElement("code",null,this.interaction.bip32Path))))))}}]),a}(l.a.Component);Nr.defaultProps={network:$.NETWORKS.TESTNET,setSpendCheckbox:function(){}};var Ar=Object(m.b)((function(e){return{network:e.settings.network,requiredSigners:e.settings.requiredSigners,totalSigners:e.settings.totalSigners,client:e.client,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters,transaction:e.spend.transaction}}),{})(Nr),_r=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.generate()},n.setSpendCheckbox=function(e){n.props.spend;"indeterminate"===e?(n.setState({indeterminate:!0,checked:!1}),n.markSpending(!0)):(n.setState({indeterminate:!1,checked:e}),n.markSpending(e))},n.markSpending=function(e){var t=n.props,a=t.change,r=t.bip32Path;(0,t.updateNode)(a,{spend:e,bip32Path:r})},n.render=function(){var e=n.props,t=e.bip32Path,a=e.fetchedUTXOs,r=e.balanceSats,s=e.multisig,i=e.utxos,o=e.walletMode,c=e.addressKnown,u=n.state,d=u.indeterminate,p=u.checked,m=o===gt;return l.a.createElement(Pa.a,{key:t},m&&l.a.createElement(Ta.a,null,l.a.createElement(Xa.a,{id:t,name:"spend",onChange:n.handleSpend,checked:p,disabled:!a||r.isEqualTo(0),indeterminate:d})),l.a.createElement(Ta.a,null,l.a.createElement("code",null,t.replace("m","*"))),l.a.createElement(Ta.a,null,i.length),l.a.createElement(Ta.a,null,a&&c?Object($.satoshisToBitcoins)(r).toFixed():""),l.a.createElement(Ta.a,null,n.maxUtxoDate()),l.a.createElement(Ta.a,null,s?n.renderAddress():"..."))},n.maxUtxoDate=function(){var e=n.props.utxos;if(!e.length)return"";var t=Math.max.apply(Math,Object(te.a)(e.map((function(e){return e.time}))));return Number.isNaN(t)?"Pending":new Date(1e3*t).toLocaleDateString()},n.renderAddress=function(){var e=n.props.braidNode;return l.a.createElement(Ar,{node:e,setSpendCheckbox:n.setSpendCheckbox})},n.generate=function(){var e=n.props,t=e.present,a=e.change,r=e.bip32Path,s=e.addNode;t||s(a,r)},n.handleSpend=function(e){var t,a=n.props,r=a.change,s=a.bip32Path,i=a.updateNode,o=a.inputs,c=a.utxos,l=a.multisig,u=a.setInputs,d=a.updateAutoSpend,p=a.setFeeRate,m=a.feeRate;e.target.getAttribute("data-indeterminate")?(t=(t=o.filter((function(e){return 0===c.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length}))).concat(c.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{multisig:l,bip32Path:s})}))),n.setState({indeterminate:!1,checked:!0})):t=e.target.checked?o.concat(c.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{multisig:l,bip32Path:s})}))):o.filter((function(e){return 0===c.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length})),u(t),i(r,{spend:e.target.checked,bip32Path:s}),d(!1),p(m)},n.state={indeterminate:!1,checked:!1},n}return a}(l.a.Component);_r.defaultProps={multisig:{},present:!1};var Br={setInputs:$e,setFeeRate:it,updateAutoSpend:ut},Kr=Object(m.b)((function(e,t){var a="1"===(t.bip32Path||"").split("/")[1],n=e.wallet[a?"change":"deposits"];return Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),{change:a}),n.nodes[t.bip32Path]),e.spend.transaction),{},{walletMode:e.wallet.common.walletMode,braidNode:n.nodes[t.bip32Path]})}),Br)(_r),Dr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).sortAddresses=function(e){var t=n.state,a=t.orderBy,r=t.orderDir;e===a?n.setState({page:0,orderDir:"asc"===r?"desc":"asc"}):n.setState({page:0,orderBy:e})},n.renderFilters=function(){var e=n.state,t=e.filterIncludeSpent,a=e.filterIncludeZeroBalance;return l.a.createElement(Fn.a,{row:!0},l.a.createElement(gr.a,{component:"h2"},l.a.createElement(x.a,{mr:3},"Show Additional")),l.a.createElement(Ft.a,{control:l.a.createElement(Xa.a,{checked:t,value:"filterIncludeSpent",onChange:n.filterAddresses}),label:"Spent Addresses"}),l.a.createElement(Ft.a,{control:l.a.createElement(Xa.a,{checked:a,value:"filterIncludeZeroBalance",onChange:n.filterAddresses}),label:"Zero Balance"}))},n.filterAddresses=function(e,t){n.setState({[e.target.value]:t,page:0})},n.getNodeSet=function(){var e=n.props,t=e.changeNodes,a=e.depositNodes,r=n.state,s=r.filterIncludeSpent,i=r.filterIncludeZeroBalance,o=r.orderBy,c=r.orderDir,l=Object.values(a).concat(Object.values(t)).reduce((function(e,t){var a=e;return a[t.bip32Path]=t,a}),{}),u=[];return Object.values(l).forEach((function(e){(e.balanceSats.isGreaterThan(0)||i&&e.balanceSats.isEqualTo(0)&&!e.addressUsed||s&&e.addressUsed)&&u.push(e)})),u=(u=u.sort((function(e,t){var a="asc"===c?1:-1;if("bip32Path"===o)return e.change&&!t.change?a:!e.change&&t.change?-a:parseInt(e.bip32Path.split("/").reverse()[0],10)>parseInt(t.bip32Path.split("/").reverse()[0],10)?a:-a;if("balanceSats"===o)return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?a:-a;if("utxos"===o)return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?a:-a;if("time"===o){if(0===e.utxos.length)return 0===t.utxos.length?0:a;if(0===t.utxos.length)return 0===e.utxos.length?0:-a;var n=Math.min.apply(Math,Object(te.a)(e.utxos.map((function(e){return e.time})))),r=Math.min.apply(Math,Object(te.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(n)&&Number.Number.isNaN(r)?0:Number.isNaN(n)?a:Number.isNaN(r)?-a:n>r?a:-a}return 0}))).reduce((function(e,t){var a=e;return a[t.bip32Path]=t,a}),{})},n.renderNodes=function(){for(var e=n.state,t=e.page,a=e.nodesPerPage,r=e.select,s=n.props,i=s.addNode,o=s.updateNode,c=t*a,u=[],d=n.getNodeSet(),p=0;p<a;p+=1){var m=c+p;if(m>Object.keys(d).length-1)break;var E=Object.values(d)[m].bip32Path,h=Object.values(d)[m].change,f=l.a.createElement(Kr,{key:E,bip32Path:E,addNode:i,updateNode:o,change:h,select:r});u.push(f)}return u},n.handlePageChange=function(e,t){var a=t;n.setState({page:a})},n.handleChangeRowsPerPage=function(e){n.setState({nodesPerPage:e.target.value,page:0})},n.pageCount=function(){var e=n.state.nodesPerPage;return Math.ceil(n.rowCount()/e)},n.rowCount=function(){var e=n.getNodeSet();return Object.keys(e).length},n.state={page:0,nodesPerPage:10,select:!1,filterIncludeSpent:!1,filterIncludeZeroBalance:!1,orderBy:"bip32Path",orderDir:"asc"},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.nodesPerPage,r=t.orderBy,s=t.orderDir,i=this.props.walletMode===gt;return l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(ya.a,{style:{tableLayout:"fixed"}},l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,null,i&&l.a.createElement(Ta.a,{width:62},"Select"),l.a.createElement(Ta.a,{width:106},l.a.createElement(yr.a,{active:"bip32Path"===r,direction:s,onClick:function(){return e.sortAddresses("bip32Path")}},"BIP32 Path")),l.a.createElement(Ta.a,{width:78},l.a.createElement(yr.a,{active:"utxos"===r,direction:s,onClick:function(){return e.sortAddresses("utxos")}},"UTXOs")),l.a.createElement(Ta.a,{width:82},l.a.createElement(yr.a,{active:"balanceSats"===r,direction:s,onClick:function(){return e.sortAddresses("balanceSats")}},"Balance")),l.a.createElement(Ta.a,{width:98},l.a.createElement(yr.a,{active:"time"===r,direction:s,onClick:function(){return e.sortAddresses("time")}},"Last Used")),l.a.createElement(Ta.a,null,"Address"))),l.a.createElement(Oa.a,null,this.renderNodes())),l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(Sr.a,{component:"div",count:this.rowCount(),rowsPerPage:n,page:a,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage}))),!i&&this.renderFilters())}}]),a}(l.a.Component);var Mr=Object(m.b)((function(e){return Object(V.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.common.walletMode,client:e.client},e.settings)}),{})(Dr),Ur=a(852),Lr=a.n(Ur),Fr=a(851),zr=a.n(Fr),Wr=a(1412),Gr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).displayBalanceAction=function(){var t=e.props,a=t.isWallet,n=t.finalizedOutputs,r=t.autoSpend;return a?!r&&!n&&e.hasBalanceError()&&e.isBalanceable():!n&&e.hasBalanceError()&&e.isBalanceable()},e.addChangeAddress=function(){var t=e.props,a=t.changeNode,n=t.number,r=t.setAddress,s=t.setChangeOutput;r(n,a.multisig.address),s(n)},e.renderChangeAdornment=function(){var t=e.props,a=t.changeNode,n=t.number,r=t.changeOutputIndex,s=t.address,i=t.isWallet,o=t.autoSpend;if(i&&o)return{};if(null!==a){var c,u=!1;if(0===r&&""===s)c="Set to wallet change address";else{if(n!==r)return{};c="Your change will go here.",u=!0}return{endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(ma.a,{placement:"top",title:c},l.a.createElement("small",null,l.a.createElement(kt.a,{onClick:e.addChangeAddress,disabled:u},l.a.createElement(zr.a,null)))))}}return{}},e.handleAddressChange=function(t){var a=e.props,n=a.number;(0,a.setAddress)(n,t.target.value)},e.hasAddressError=function(){return""!==e.props.addressError},e.handleAmountChange=function(t){var a=e.props,n=a.number;(0,a.setAmount)(n,t.target.value)},e.hasAmountError=function(){return""!==e.props.amountError},e.isNotBalanceable=function(){var t=e.props,a=t.number,n=t.outputs,r=t.feeError,s=t.amountError,i=t.amount,o=t.inputsTotalSats;if(""!==r)return!0;for(var c=0;c<n.length;c+=1)if(c!==a-1&&(""!==n[c].amountError||""===n[c].amount))return!0;var l=e.autoBalancedAmount();return""!==Object($.validateOutputAmount)(Object($.bitcoinsToSatoshis)(l),o)||""===s&&l===new re.a(i)},e.isBalanceable=function(){return!e.isNotBalanceable()},e.hasBalanceError=function(){return""!==e.props.balanceError},e.autoBalancedAmount=function(){var t=e.props,a=t.number,n=t.fee,r=t.inputsTotalSats,s=t.outputs.filter((function(e,t){return t!==a-1})).map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new re.a(0)),i=Object($.bitcoinsToSatoshis)(new re.a(n));return Object($.satoshisToBitcoins)(r.minus(s.plus(i)))},e.balanceAction=function(){var t=e.props.balanceError;return!e.hasBalanceError()||e.isNotBalanceable()?null:t.split(" ")[0]},e.handleBalance=function(){var t=e.props,a=t.number;(0,t.setAmount)(a,e.autoBalancedAmount().toString())},e.hasError=function(){return e.hasAddressError()||e.hasAmountError()},e.handleDelete=function(){var t=e.props,a=t.number;(0,t.remove)(a)},e.handleMaxSpend=function(t){t.preventDefault();var a=e.props,n=a.number;(0,a.setMaxSpend)(n)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,n=e.address,r=e.amount,s=e.addressError,i=e.amountError,o=e.changeOutputIndex,c=e.autoSpend,u=e.isWallet,d=e.number,p=u?10:1;return l.a.createElement(C.a,{container:!0,spacing:p},l.a.createElement(C.a,{item:!0,xs:7},l.a.createElement(Rt.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:Za.a.outputsFormInput,disabled:a,onChange:this.handleAddressChange,value:n,error:this.hasAddressError(),helperText:s,InputProps:this.renderChangeAdornment()})),l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(Rt.a,{fullWidth:!0,placeholder:"Amount",className:Za.a.outputsFormInput,name:"amount",disabled:a,onChange:this.handleAmountChange,value:r,error:this.hasAmountError(),helperText:i,InputProps:{startAdornment:l.a.createElement(ba.a,{position:"start"},u&&c&&d===t.length&&d!==o&&l.a.createElement(j.a,{onClick:this.handleMaxSpend,className:Za.a.maxSpend,style:{fontSize:".7rem"}},"MAX")),endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(ee.a,null,"BTC"))}})),this.displayBalanceAction()&&l.a.createElement(C.a,{item:!0,xs:1},l.a.createElement(ma.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},l.a.createElement("small",null,l.a.createElement(kt.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?l.a.createElement(Zt.a,null):l.a.createElement(Qt.a,null))))),!a&&t.length>(o>0&&c?2:1)&&l.a.createElement(C.a,{item:!0,xs:1},l.a.createElement(ma.a,{title:"Remove Output",placement:"top"},l.a.createElement(kt.a,{onClick:this.handleDelete},l.a.createElement(Wr.a,null)))))}}]),a}(l.a.Component);Gr.defaultProps={changeNode:{}};var qr={setAddress:at,setAmount:nt,remove:st,setChangeOutput:tt,setMaxSpend:function(e){return function(t,a){var n=Ge(a()),r=ze(a()),s=a(),i=s.settings,o=i.addressType,c=i.requiredSigners,l=i.totalSigners,u=s.spend.transaction,d=u.outputs,p=u.feeRate,m=n.reduce((function(e,t){return e+t.utxos.length}),0),E=Object($.estimateMultisigTransactionFee)({addressType:o,numInputs:m,numOutputs:d.length,m:c,n:l,feesPerByteInSatoshis:p}),h=d.reduce((function(e,t){return e.plus(t.amount.length?t.amountSats:0)}),new re.a(0)),f=Object($.satoshisToBitcoins)(new re.a(r).minus(d.length>1?h:0).minus(E));return f.isLessThanOrEqualTo(Object($.satoshisToBitcoins)(E))&&d.length>1||f.isLessThan(je.c)?t(lt("Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.")):t(nt(e,f.toFixed()))}}},Hr=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)(Object(V.a)({},e.spend.transaction),e.spend.transaction.outputs[t.number-1]),{},{changeNode:e.wallet.change.nextNode})}),qr)(Gr),Xr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).titleRef=l.a.createRef(),n.outputsTotal=0,n.componentDidMount=function(){n.initialOutputState(),n.scrollToTitle()},n.scrollToTitle=function(){var e=n.props,t=e.signatureImporters,a=e.isWallet;0!==Object.keys(t).reduce((function(e,a){return e+t[a].finalized}),0)||a||n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderOutputs=function(){var e=n.props,t=e.outputs,a=e.changeOutputIndex,r=e.autoSpend;return Object(fa.map)(t).map((function(e,t){return l.a.createElement(x.a,{key:t,display:r&&a===t+1?"none":"block"},l.a.createElement(C.a,{container:!0},l.a.createElement(Hr,{number:t+1})))}))},n.inputsTotal=function(){var e=n.props.inputsTotalSats;return Object($.satoshisToBitcoins)(e)},n.outputsAndFeeTotal=function(){var e=n.props,t=e.outputs,a=e.fee,r=e.updatesComplete,s=e.inputs,i=t.map((function(e){var t=e.amount;return t&&t.length&&!Number.isNaN(t)||(t=0),new re.a(t)})).reduce((function(e,t){return e.plus(t)}),new re.a(0));return a&&s.length&&(i=i.plus(a)),r?(n.outputsTotal=i,i.toFixed(8)):"0.00000000"},n.hasFeeRateFetchError=function(){return""!==n.state.feeRateFetchError},n.hasFeeRateError=function(){return""!==n.props.feeRateError},n.hasFeeError=function(){return""!==n.props.feeError},n.hasBalanceError=function(){return""!==n.props.balanceError},n.hasError=function(){return n.hasFeeRateFetchError()||n.hasFeeRateError()||n.hasFeeError()||n.hasBalanceError()},n.handleAddOutput=function(){(0,n.props.addOutput)()},n.handleFeeRateChange=function(e){var t=n.props.setFeeRate,a=e.target.value;(""===a||Number.isNaN(parseFloat(a,10))||parseFloat(a,10)<1)&&(a="0"),t(a)},n.handleFeeChange=function(e){(0,n.props.setFee)(e.target.value)},n.handleFinalize=function(){(0,n.props.finalizeOutputs)(!0)},n.handleReset=function(){var e=n.props,t=e.resetOutputs,a=e.isWallet;t(),a||setTimeout((function(){return n.initialOutputState()}),0)},n.getFeeEstimate=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.client,r=t.network,s=t.setFeeRate,o="",e.prev=2,e.next=5,Ie(r,a);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),o="There was an error fetching the fee rate.";case 11:return e.prev=11,s(Number.isNaN(i)?1..toString():i.toString()),n.setState({feeRateFetchError:o}),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])}))),n.gatherSignaturesDisabled=function(){var e=n.props,t=e.finalizedOutputs,a=e.outputs;if(0===e.inputs.length)return!0;if(t||n.hasError())return!0;for(var r=0;r<a.length;r+=1){var s=a[r];if(""===s.address||""===s.amount||""!==s.addressError||""!==s.amountError)return!0}return!1},n.state={feeRateFetchError:""},n}return Object(v.a)(a,null,[{key:"unitLabel",value:function(e,t){var a={endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(ee.a,null,e))};return t&&(a=Object(V.a)(Object(V.a)({},a),t)),a}}]),Object(v.a)(a,[{key:"initialOutputState",value:function(){var e=Object(Q.a)(Z.a.mark((function e(){var t,a,n,r,s,i,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.inputs,n=t.outputs,e.next=3,this.getFeeEstimate();case 3:r=this.props,s=r.inputsTotalSats,i=r.fee,o=r.setOutputAmount,c=Object($.bitcoinsToSatoshis)(new re.a(i)),l=Object($.satoshisToBitcoins)(s.minus(c)),a.length&&""===n[0].amount&&o(1,l.toFixed(8));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,n=e.fee,r=e.finalizedOutputs,s=e.feeRateError,i=e.feeError,o=e.balanceError,c=e.inputs,u=e.isWallet,d=e.autoSpend,p=this.state.feeRateFetchError,m=c&&c.length>0?n:"0.0000",E=u?10:1;return l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{ref:this.titleRef},l.a.createElement(C.a,{container:!0,spacing:E},l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement(j.a,{variant:"caption",className:Za.a.outputsFormLabel},"To")),l.a.createElement(C.a,{item:!0,xs:3},"\xa0"),l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(j.a,{variant:"caption",className:Za.a.outputsFormLabel},"Amount"))),l.a.createElement(C.a,null,this.renderOutputs()),l.a.createElement(C.a,{item:!0,container:!0,spacing:E},l.a.createElement(C.a,{item:!0,xs:12},l.a.createElement(A.a,{color:"primary",disabled:r,onClick:this.handleAddOutput},l.a.createElement(Lr.a,null)," Add output"))),l.a.createElement(C.a,{item:!0,container:!0,spacing:E},l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:3},l.a.createElement(j.a,{variant:"caption",className:Za.a.outputsFormLabel},"Fee Rate"),l.a.createElement(Rt.a,{fullWidth:!0,value:t,type:"number",minimum:0,step:1,name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:p||s,InputProps:{endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(ma.a,{placement:"top",title:"Estimate best rate"},l.a.createElement("small",null,l.a.createElement(kt.a,{onClick:this.getFeeEstimate,disabled:r},l.a.createElement(q.a,null)))),l.a.createElement(ee.a,null,"Sats/byte"))}}))),l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement(x.a,{mt:3},"\xa0")),!u||u&&!d?l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:3},l.a.createElement(j.a,{variant:"caption",className:Za.a.outputsFormLabel},"Estimated Fees"),l.a.createElement(Rt.a,{fullWidth:!0,name:"fee_total",disabled:r,value:m,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:i,InputProps:a.unitLabel("BTC",{readOnly:!0,disableUnderline:!0,style:{color:"gray"}})}))):"",l.a.createElement(C.a,{item:!0,xs:2})),l.a.createElement(C.a,{item:!0,container:!0,spacing:E},l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement(x.a,{mt:7},l.a.createElement(j.a,{variant:"h6"},!u||u&&!d?"Totals":"Output Total"))),l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(x.a,{display:!u||u&&!d?"block":"none",mt:7},l.a.createElement(Rt.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toFixed(8),disabled:r,InputProps:a.unitLabel("BTC",{readOnly:!0})}))),l.a.createElement(C.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:7},l.a.createElement(Rt.a,{fullWidth:!0,label:!u||u&&!d?"Outputs & Fee Total":"",value:this.outputsAndFeeTotal(),error:this.hasBalanceError(),disabled:r,helperText:o,InputProps:a.unitLabel("BTC",{readOnly:!0,disableUnderline:!0})}))),l.a.createElement(C.a,{item:!0,xs:2}))),!u&&l.a.createElement(x.a,{mt:7},l.a.createElement(C.a,{container:!0,spacing:3,justify:"center"},l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))}}]),a}(l.a.Component);Xr.defaultProps={updatesComplete:!1};var Yr={addOutput:et,setOutputAmount:nt,setFeeRate:it,setFee:ot,finalizeOutputs:ct,resetOutputs:function(){return{type:"RESET_OUTPUTS"}}},Vr=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)({},{network:e.settings.network,client:e.client}),e.spend.transaction),e.client),{},{signatureImporters:e.spend.signatureImporters,change:e.wallet.change})}),Yr)(Xr),Jr=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).buildSignedTransaction=function(){var e=n.props,t=e.network,a=e.inputs,r=e.outputs,s=e.signatureImporters;return Object($.signedMultisigTransaction)(t,a,r,Object.values(s).map((function(e){return e.signature})))},n.handleBroadcast=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.client,r=t.network,s=t.setTxid,i=n.buildSignedTransaction(),o="",c="",n.setState({broadcasting:!0}),e.prev=5,e.next=8,we(i.toHex(),r,a);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),o="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,n.setState({txid:c,error:o,broadcasting:!1}),s(c),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,11,15,19]])}))),n.transactionURL=function(){var e=n.props.network,t=n.state.txid;return Object($.blockExplorerTransactionURL)(t,e)},n.state={error:"",broadcasting:!1,txid:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,n=e.txid,r=this.buildSignedTransaction(),s=r.toHex();return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Broadcast"}),l.a.createElement(N.a,null,l.a.createElement("form",null,r&&l.a.createElement(x.a,{mt:4},l.a.createElement(j.a,{variant:"h6"},"Signed Transaction"),l.a.createElement(Wa,{text:s,code:!0,showIcon:!0})),""===n?l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",disabled:!r||a,onClick:this.handleBroadcast},"Broadcast Transaction"),l.a.createElement(ee.a,{error:!0},t),l.a.createElement("small",null,l.a.createElement(ee.a,null,"Warning: Broadcasting this transaction cannot be undone."))):l.a.createElement(x.a,{mt:2},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(Wa,{text:n,code:!0,showIcon:!0}),"\xa0",Object(H.b)(this.transactionURL(),l.a.createElement(Va.a,null))),l.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),a}(l.a.Component);var Zr={setTxid:function(e){return{type:"SET_TXID",value:e}}},Qr=Object(m.b)((function(e){return Object(V.a)(Object(V.a)({network:e.settings.network,client:e.client},e.client),{},{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,outputs:e.spend.transaction.outputs})}),Zr)(Jr),$r=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.showUnsignedTransaction,t=n.props.unsignedTransaction;if(e){var a=t.toHex();return l.a.createElement("div",null,l.a.createElement("small",null,l.a.createElement(A.a,{size:"small",onClick:n.handleHideUnsignedTransaction},"Hide Unsigned Transaction")),l.a.createElement("p",null,l.a.createElement(Wa,{text:a,showIcon:!0})))}return l.a.createElement("small",null,l.a.createElement(A.a,{size:"small",onClick:n.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},n.handleShowUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!0})},n.handleHideUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!1})},n.state={showUnsignedTransaction:!1},n}return a}(l.a.Component);var es=Object(m.b)((function(e){return{unsignedTransaction:e.spend.transaction.unsignedTransaction}}),{})($r),ts=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).renderKeySelectors=function(){for(var e=n.props.requiredSigners,t=[],a=1;a<=e;a+=1)t.push(l.a.createElement(x.a,{key:a,mt:2},l.a.createElement(ar,{number:a})));return t},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every((function(e){return e.finalized}))},n.handleReturn=function(){var e=n.props,t=e.resetTransaction,a=e.resetWalletView;t(),a()},n.handleCancel=function(e){var t=n.props,a=t.finalizeOutputs,r=t.requiredSigners,s=t.setRequiredSigners,i=t.setSpendStep;e.preventDefault(),s(r),a(!1),i(0)},n.render=function(){var e=n.state.spent;return l.a.createElement(x.a,null,l.a.createElement(A.a,{href:"#",onClick:n.handleCancel},"Edit Transaction"),l.a.createElement(x.a,{mt:2},l.a.createElement(es,null)),n.renderKeySelectors(),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{href:"#",onClick:function(e){e.preventDefault(),n.handleReturn()}},"Abandon Transaction")),n.signaturesFinalized()&&l.a.createElement(x.a,{mt:2},l.a.createElement(Qr,null)),e&&l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:n.handleReturn},"Return")))},n.state={spent:!1},n}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){var e=this.props.resetTransaction;this.state.spent&&e()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.txid,n=e.changeSlice,r=e.updateTxSlices;return a.length&&!t.spent?(r(n),{spent:!0}):null}}]),a}(l.a.Component);var as={finalizeOutputs:ct,setRequiredSigners:Qe,updateTxSlices:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(){var r=Object(Q.a)(Z.a.mark((function r(s,i){var o,c,l,u,d,p,m,E,h,f,b,v,g,y,S,P,T,O,I,w,x,j;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=i(),c=o.settings.network,l=o.client,u=o.spend.transaction,d=u.changeAddress,p=u.inputs,m=u.txid,E=o.wallet,h=E.deposits,f=h.nextNode,b=h.nodes,v=E.change.nodes,g=function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t,c,l);case 2:return n=e.sent,e.abrupt("return",Object(V.a)({addressUsed:!0,change:_e(a),address:t,bip32Path:a},n));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=Object(te.a)(p),t&&t.multisig.address===d&&y.push(t),S=[],P=new Set,y.forEach((function(e){var t=e.multisig.address;P.has(t)||n.has(t)||(P.add(t),S.push(g(t,e.bip32Path)))})),r.prev=7,r.next=10,Promise.all(S);case 10:T=r.sent,r.next=16;break;case 13:return r.prev=13,r.t0=r.catch(7),r.abrupt("return",s(ht("There was a problem updating wallet state. Try a refresh. Error: ".concat(r.t0.message))));case 16:for(O=0;O<T.length;O+=1)I=T[O],w=I.change?v[I.bip32Path].utxos.length:b[I.bip32Path].utxos.length,I&&I.utxos&&I.utxos.length!==w&&(s({type:I.change?"UPDATE_CHANGE_SLICE":"UPDATE_DEPOSIT_SLICE",value:I}),n.add(I.address));if(n.size===T.length||!a){r.next=19;break}return r.abrupt("return",setTimeout((function(){return s(e(t,a-1,n))}),750));case 19:if(a){r.next=23;break}return x="There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.",m&&m.length&&(x+=" Transaction ID: ".concat(m)),r.abrupt("return",s(ht(x)));case 23:return r.next=25,g(f.multisig.address,f.bip32Path);case 25:if((j=r.sent).utxos.length===b[j.bip32Path].utxos.length){r.next=28;break}return r.abrupt("return",s({type:"UPDATE_DEPOSIT_SLICE",value:j}));case 28:case"end":return r.stop()}}),r,null,[[7,13]])})));return function(e,t){return r.apply(this,arguments)}}()},resetTransaction:function(){return{type:"RESET_TRANSACTION"}},resetWalletView:Tt,setSpendStep:pt},ns=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)({},e.wallet),e.spend),e.quorum),{},{txid:e.spend.transaction.txid,requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeSlice:e.wallet.change.nextNode})}),as)(ts),rs=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderAddresses=function(){var t=e.mapAddresses();return Object.keys(t).map((function(e){return l.a.createElement(Pa.a,{key:e},l.a.createElement(Ta.a,null,l.a.createElement("code",null,e)),l.a.createElement(Ta.a,null,t[e].utxos.length),l.a.createElement(Ta.a,null,l.a.createElement("code",null,t[e].amount.toFixed(8))))}))},e.renderOutputAddresses=function(){var t=e.props,a=t.changeAddress;return t.outputs.map((function(e){return l.a.createElement(Pa.a,{key:e.address},l.a.createElement(Ta.a,null,l.a.createElement("code",null,e.address),e.address===a?l.a.createElement("small",null,"\xa0(change)"):""),l.a.createElement(Ta.a,null,l.a.createElement("code",null,re()(e.amount).toFixed(8))))}))},e.renderOutputs=function(){return l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"Address"),l.a.createElement(Ta.a,null,"Amount (BTC)"))),l.a.createElement(Oa.a,null,e.renderOutputAddresses()),l.a.createElement(Ya.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"TOTAL:"),l.a.createElement(Ta.a,null,e.outputsTotal()))))},e.renderInputs=function(){var t=e.props.inputsTotalSats;return l.a.createElement(ya.a,null,l.a.createElement(Sa.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,null,"Address"),l.a.createElement(Ta.a,null,"UTXO count"),l.a.createElement(Ta.a,null,"Amount (BTC)"))),l.a.createElement(Oa.a,null,e.renderAddresses()),l.a.createElement(Ya.a,null,l.a.createElement(Pa.a,null,l.a.createElement(Ta.a,{colSpan:2},"TOTAL:"),l.a.createElement(Ta.a,null,Object($.satoshisToBitcoins)(t).toString()))))},e.mapAddresses=function(){return e.props.inputs.reduce((function(e,t){var a=e,n=t.confirmed,r=t.txid,s=t.index,i=t.amount;return a[t.multisig.address]=e[t.multisig.address]||{amount:re()(0),utxos:[]},a[t.multisig.address].utxos.push({confirmed:n,txid:r,index:s,amount:i}),a[t.multisig.address].amount=e[t.multisig.address].amount.plus(re()(t.amount)),a}),{})},e.outputsTotal=function(){var t=e.props.outputs;return Object($.satoshisToBitcoins)(t.reduce((function(e,t){return e.plus(re()(t.amountSats||0))}),re()(0))).toString()},e.render=function(){var t=e.props,a=t.feeRate,n=t.fee,r=t.inputsTotalSats,s=t.editTransaction,i=t.handleSignTransaction;return l.a.createElement(x.a,null,l.a.createElement("h2",null,"Transaction Preview"),l.a.createElement(es,null),l.a.createElement("h3",null,"Inputs"),e.renderInputs(),l.a.createElement("h3",null,"Outputs"),e.renderOutputs(),l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement("h3",null,"Fee"),l.a.createElement("div",null,re()(n).toFixed(8)," BTC ")),l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement("h3",null,"Fee Rate"),l.a.createElement("div",null,a," sats/byte")),l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement("h3",null,"Total"),l.a.createElement("div",null,Object($.satoshisToBitcoins)(re()(r||0)).toFixed(8)," ","BTC"))),l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,spacing:2},l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",onClick:function(e){e.preventDefault(),s()}},"Edit Transaction")),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:i},"Sign Transaction")))))},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.outputs,a=e.changeAddress,n=e.changeOutputIndex,r=e.changeNode,s=e.setChangeOutputMultisig;t.forEach((function(e){e.address===a&&s(n,r.multisig)}))}}]),a}(l.a.Component);var ss={setChangeOutputMultisig:function(e,t){return{type:"SET_CHANGE_OUTPUT_MULTISIG",number:e,value:t}}},is=Object(m.b)((function(e){return{changeOutputIndex:e.spend.transaction.changeOutputIndex}}),ss)(rs),os=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).outputsAmount=new re.a(0),e.coinSelection=H.c,e.feeAmount=new re.a(0),e.componentDidUpdate=function(t){e.props.finalizedOutputs&&!t.finalizedOutputs&&e.showPreview()},e.previewDisabled=function(){var t=e.props,a=t.finalizedOutputs,n=t.outputs,r=t.feeRateError,s=t.feeError,i=t.inputs,o=t.balanceError,c=t.autoSpend;if(0===i.length&&!c)return!0;if(a||r||s||o)return!0;for(var l=0;l<n.length;l+=1){var u=n[l];if(""===u.address||""===u.amount||""!==u.addressError||""!==u.amountError)return!0}return!1},e.showSignTransaction=function(){(0,e.props.setSpendStep)(2)},e.handleShowPreview=function(){var t=e.props,a=t.autoSelectCoins,n=t.autoSpend,r=t.finalizeOutputs;n?a():r(!0)},e.showPreview=function(){(0,e.props.setSpendStep)(1)},e.showCreate=function(){var t=e.props,a=t.finalizeOutputs,n=t.setSpendStep,r=t.resetNodesSpend,s=t.deleteChangeOutput;n(0),a(!1),r(),s()},e.handleSpendMode=function(t){var a=e.props,n=a.updateAutoSpend,r=a.resetNodesSpend,s=a.deleteChangeOutput;n(!t.target.checked),r(),s()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.autoSpend,n=t.changeAddress,r=t.changeNode,s=t.updateNode,i=t.addNode,o=t.spendingStep,c=t.fee,u=t.feeRate,d=t.inputs,p=t.inputsTotalSats,m=t.outputs;return l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(C.a,{container:!0},2===o&&l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(x.a,null,l.a.createElement(ns,null))),0===o&&l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(C.a,{container:!0,direction:"row-reverse"},l.a.createElement(x.a,{display:"flex-end"},l.a.createElement(x.a,{p:1},l.a.createElement(Ft.a,{control:l.a.createElement(rn.a,{checked:!a,onChange:this.handleSpendMode}),label:"Manual"})))),l.a.createElement(x.a,{component:"div",display:a?"none":"block"},l.a.createElement(Mr,{addNode:i,updateNode:s})),l.a.createElement(Vr,null),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{onClick:this.handleShowPreview,variant:"contained",color:"primary",disabled:this.previewDisabled()},"Preview Transaction"))),1===o&&l.a.createElement(C.a,{item:!0,md:12},l.a.createElement(x.a,{mt:3},l.a.createElement(is,{changeAddress:n,changeNode:r,editTransaction:this.showCreate,fee:c,feeRate:u,inputs:d,inputsTotalSats:p,outputs:m,handleSignTransaction:function(){return e.showSignTransaction()}}))))))}}]),a}(l.a.Component);os.defaultProps={autoSpend:!1,balanceError:null,changeNodes:{},depositNodes:{},finalizedOutputs:!1,feeError:null,feeRateError:null,spendingStep:0};var cs={autoSelectCoins:function(){return function(e,t){var a,n,r,s=t(),i=s.settings,o=s.spend.transaction,c=s.wallet.change.nextNode.multisig.address,l=i.totalSigners,u=i.requiredSigners,d=i.addressType,p=o.outputs,m=o.feeRate,E=Ge(t());try{var h=Object(H.c)({outputs:p,feesPerByteInSatoshis:m,m:u,n:l,addressType:d,slices:E}),f=Object(ae.a)(h,2);a=f[0],n=f[1]}catch(S){return e(lt(S.message))}var b={addressType:d,numInputs:a.length,m:u,n:l,feesPerByteInSatoshis:m};if(n){var v=p.reduce((function(e,t){return e.plus(t.amountSats)}),new re.a(0)),g=a.reduce((function(e,t){return e.plus(t.amountSats)}),new re.a(0));r=Object($.estimateMultisigTransactionFee)(Object(V.a)(Object(V.a)({},b),{},{numOutputs:p.length+1}));var y=g.minus(r).minus(v).toFixed(8);e(function(e){var t=e.value,a=e.address;return function(e,n){var r=n().spend.transaction,s=r.outputs,i=r.changeOutputIndex;i||e({type:"ADD_OUTPUT"});var o=i||s.length+1;e(tt(o)),e(rt(a)),e(at(o,a)),e(nt(o,t))}}({address:c,value:Object($.satoshisToBitcoins)(y).toFixed()}))}else r=Object($.estimateMultisigTransactionFee)(Object(V.a)(Object(V.a)({},b),{},{numOutputs:p.length}));e(ot(Object($.satoshisToBitcoins)(r).toFixed())),e($e(a)),e(ct(!0))}},deleteChangeOutput:function(){return function(e,t){var a=t().spend.transaction.changeOutputIndex;a&&e(st(a))}},updateAutoSpend:ut,setInputs:$e,updateChangeSlice:St,updateDepositSlice:yt,setAddress:at,resetNodesSpend:function(){return{type:"RESET_NODES_SPEND"}},setFeeRate:it,addOutput:et,finalizeOutputs:ct,setChangeAddress:rt,setSpendStep:pt},ls=Object(m.b)((function(e){return Object(V.a)(Object(V.a)({},e.spend.transaction),{},{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.spend.transaction.autoSpend})}),cs)(os),us=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).filterAddresses=function(e,t){n.setState({[e.target.value]:t},(function(){return n.setDisplaySlices()}))},n.state={filterIncludeSpent:!1,filterIncludeZeroBalance:!1,displaySlices:e.slicesWithBalance.length?Object(te.a)(e.slicesWithBalance):[]},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.slicesWithBalance;e.slicesWithBalance.length!==t.length&&this.setDisplaySlices()}},{key:"setDisplaySlices",value:function(){var e=this.props,t=e.slicesWithBalance,a=e.zeroBalanceSlices,n=e.spentSlices,r=this.state,s=r.filterIncludeSpent,i=r.filterIncludeZeroBalance,o=Object(te.a)(t);s&&o.push.apply(o,Object(te.a)(n)),i&&o.push.apply(o,Object(te.a)(a)),this.setState({displaySlices:o})}},{key:"render",value:function(){var e=this.state,t=e.filterIncludeSpent,a=e.filterIncludeZeroBalance,n=e.displaySlices,r=this.props,s=r.client,i=r.network;return l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(C.a,{container:!0,direction:"column"},l.a.createElement(C.a,{item:!0},l.a.createElement(Er,{slices:n,client:s,network:i,paging:!0})),l.a.createElement(C.a,{item:!0},l.a.createElement(Fn.a,{row:!0},l.a.createElement(gr.a,{component:"h2"},l.a.createElement(x.a,{mr:3},"Show Additional")),l.a.createElement(Ft.a,{control:l.a.createElement(Xa.a,{checked:t,value:"filterIncludeSpent",onChange:this.filterAddresses}),label:"Spent Addresses"}),l.a.createElement(Ft.a,{control:l.a.createElement(Xa.a,{checked:a,value:"filterIncludeZeroBalance",onChange:this.filterAddresses}),label:"Zero Balance"}))))))}}]),a}(l.a.PureComponent);var ds=Object(m.b)((function(e){return{slicesWithBalance:He(e),zeroBalanceSlices:Xe(e),spentSlices:qe(e),walletMode:e.wallet.common.walletMode,client:e.client,network:e.settings.network}}))(us),ps=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).scrollRef=l.a.createRef(),e.componentDidMount=function(){e.scrollRef.current.scrollIntoView({behavior:"smooth"})},e.render=function(){var t=e.props.walletMode;return l.a.createElement("div",null,l.a.createElement(ja.a,{ref:e.scrollRef,value:t,onChange:e.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},e.addressesAreLoaded()&&[l.a.createElement(Ca.a,{label:"Addresses",value:bt,key:0}),l.a.createElement(Ca.a,{label:"Receive",value:vt,key:1}),l.a.createElement(Ca.a,{label:"Send",value:gt,key:2})]),l.a.createElement(x.a,{mt:2},e.renderModeComponent()))},e.renderModeComponent=function(){var t=e.props,a=t.walletMode,n=t.addNode,r=t.updateNode;if(e.addressesAreLoaded()){if(a===vt)return l.a.createElement(vr,null);if(a===gt)return l.a.createElement(ls,{addNode:n,updateNode:r});if(a===bt)return l.a.createElement(ds,null)}var s=e.progress();return[l.a.createElement("div",{style:{textAlign:"center",marginBottom:"5em"},key:0},l.a.createElement(Ra.a,{variant:"indeterminate"})),l.a.createElement(ka.a,{variant:"determinate",value:s,key:1})]},e.progress=function(){var t=e.props,a=t.change;return 100*(t.deposits.trailingEmptyNodes+a.trailingEmptyNodes)/40},e.addressesAreLoaded=function(){var t=e.props,a=t.change,n=t.deposits;return!!t.nodesLoaded||(n.trailingEmptyNodes>=20||n.fetchUTXOsErrors>=5)&&(a.trailingEmptyNodes>=20||a.fetchUTXOsErrors>=5)},e.handleModeChange=function(t,a){var n=e.props,r=n.setMode,s=n.requiredSigners,i=n.setRequiredSigners,o=n.signatureImporters;a===gt&&Object.keys(o).length!==s&&i(s),r(a)},e}return a}(l.a.Component);var ms={setMode:function(e){return{type:"UPDATE_WALLET_MODE",value:e}},setRequiredSigners:Qe},Es=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)({},e.wallet),e.wallet.common),{},{requiredSigners:e.spend.transaction.requiredSigners,signatureImporters:e.spend.signatureImporters})}),ms)(ps),hs=function(e){var t=e.onClearFn,a=e.onDownloadFn;return l.a.createElement(C.a,{container:!0,spacing:2},l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:a},"Download Wallet Details")),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{onClick:function(e){return function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),t(e)}(e)},variant:"contained",color:"secondary"},"Clear Wallet")))},fs=ca({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),bs=fs.setExtendedPublicKeyImporterName,vs=fs.setExtendedPublicKeyImporterBIP32Path,gs=fs.resetExtendedPublicKeyImporterBIP32Path,ys=fs.setExtendedPublicKeyImporterMethod,Ss=fs.setExtendedPublicKeyImporterExtendedPublicKey,Ps=fs.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,Ts=fs.setExtendedPublicKeyImporterFinalized;function Os(e){return{type:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",value:e}}var Is=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.totalSigners,a=e.requiredSigners,r=e.addressType;return l.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",a,"-of-",t," ",r," Multisig Wallet",l.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(n.extendedPublicKeyCount(),"/").concat(t)))},n.testConnection=function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var r,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.network,s=t.client,i=t.setPasswordError,e.prev=1,e.next=4,Ie(r,s);case 4:i(""),n.setState({connectSuccess:!0},(function(){a&&setTimeout(a,750)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.setState({connectSuccess:!1}),e.t0.response&&401===e.t0.response.status?i("Unauthorized: Incorrect username and password combination"):i(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),n.extendedPublicKeyCount=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return e.finalized})).length},n.toggleImporters=function(e,t){e.preventDefault();var a=n.props,r=a.setImportersVisible,s=a.configuring,i=a.resetWallet,o=a.initialLoadComplete,c=a.setGenerating;s||(c(!1),t&&i(),t||o()),r(!s)},n.generate=function(){var e=n.props,t=e.setImportersVisible,a=e.freeze,r=e.setGenerating,s=e.startingAddressIndex,i="m/0/".concat(s),o="m/1/".concat(s);a(!0),t(!1),r(!0),n.setState({connectSuccess:!1},(function(){n.addNode(!1,i,!0),n.addNode(!0,o,!0)}))},n.updateNode=function(e,t){var a=n.props,r=a.updateChangeSlice,s=a.updateDepositSlice;(e?r:s)(t)},n.addNode=function(){var e=Object(Q.a)(Z.a.mark((function e(t,a,r){var s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.generateMultisig(t,a,r);case 2:s=e.sent,n.updateNode(t,Object(V.a)({bip32Path:a},s));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.generateMultisig=function(){var e=Object(Q.a)(Z.a.mark((function e(t,a,r){var s,i,o,c,l,u,d,p,m,E;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props,i=s.extendedPublicKeyImporters,o=s.network,c=s.addressType,l=s.requiredSigners,u=n.generateRichExtendedPublicKeys(i),d=t?"1":"0",p=Object($.generateBraid)(o,c,u,l,d),m=Object($.deriveMultisigByPath)(p,a),e.next=7,n.fetchUTXOs(t,m,r);case 7:return E=e.sent,e.abrupt("return",Object(V.a)({multisig:m},E));case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.fetchUTXOs=function(){var e=Object(Q.a)(Z.a.mark((function e(t,a,r){var s,i,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props,i=s.network,o=s.client,e.next=3,Pe(a.address,i,o);case 3:if(!(l=e.sent)||l.fetchUTXOsError.length){e.next=8;break}return e.next=7,Oe(a.address,i,o);case 7:c=e.sent;case 8:return c&&(l=Object(V.a)(Object(V.a)({},l),{},{addressUsed:c.used})),r&&setTimeout((function(){return n.generateNextNodeIfNecessary(t)})),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.generateNextNodeIfNecessary=function(e){var t=n.props,a=t.change,r=t.deposits,s=t.initialLoadComplete,i=(e?a:r).trailingEmptyNodes,o=(e?a:r).fetchUTXOsErrors,c=Object.keys((e?a:r).nodes);if(i>=20||o>=5)s();else{c.sort((function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2],10)-parseInt(n[2],10)}));var l=(c[c.length-1]||"").split("/"),u=parseInt(l[2],10),d="m/".concat(l[1],"/").concat(u+1);setTimeout((function(){return n.addNode(e,d,!0)}))}},n.refreshNodes=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.change,r=t.deposits,s=t.resetNodesFetchErrors,i=Object.values(r.nodes).concat(Object.values(a.nodes)),o=Math.max(a.fetchUTXOsErrors,r.fetchUTXOsErrors),s(),e.next=6,Promise.all(i.map(function(){var e=Object(Q.a)(Z.a.mark((function e(t){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchUTXOs(t.change,t.multisig);case 2:a=e.sent,n.updateNode(t.change,Object(V.a)({bip32Path:t.bip32Path},a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o>=5&&Math.max(a.fetchUTXOsErrors,r.fetchUTXOsErrors)<5&&console.log("we had errors but now looks good, try to build more");case 7:case"end":return e.stop()}}),e)}))),n.state={connectSuccess:!1,unknownClient:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.refreshNodes,n=t.common.nodesLoaded,r=t.setGenerating;this.debouncedTestConnection=Object(fa.debounce)((function(t){return e.testConnection(t)}),500,{trailing:!0,leading:!1}),a(this.refreshNodes),n&&r(!0)}},{key:"componentDidUpdate",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s,i,o,c,l,u;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.client.password,n=this.props,r=n.setPasswordError,s=n.network,i=n.client,o=n.common.nodesLoaded,c=n.setIsWallet,l=n.configuring,u=this.state.unknownClient,"unknown"===i.type&&"public"===t.client.type?this.setState({unknownClient:!0}):l&&"unknown"!==i.type&&u&&this.setState({unknownClient:!1}),a!==i.password&&i.password.length&&this.debouncedTestConnection({network:s,client:i,setPasswordError:r}),!t.common.nodesLoaded&&o&&c();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateRichExtendedPublicKeys",value:function(e){return Object.values(e).map((function(e){var t=$.ExtendedPublicKey.fromBase58(e.extendedPublicKey);return t.setRootFingerprint(e.rootXfp&&!e.rootXfp.toLowerCase().includes("unknown")?e.rootXfp:"00000000"),t.setBip32Path(e.bip32Path&&!e.bip32Path.toLowerCase().includes("unknown")?e.bip32Path:"m".concat("/0".repeat(t.depth))),t.addBase58String(),t}))}},{key:"handlePasswordEnter",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.debouncedTestConnection.cancel(),e.next=4,this.testConnection(this.props,this.generate);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordChange",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=this.props,n=a.setPassword,r=a.setPasswordError,s=t.target.value,this.setState({connectSuccess:!1},(function(){n(s),r("")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"body",value:function(){var e=this,t=this.props,a=t.totalSigners,n=t.configuring,r=t.downloadWalletDetails,s=t.client,i=t.generating,o=t.extendedPublicKeyImporters,c=this.state,u=c.connectSuccess,d=c.unknownClient,p=Object.values(o).some((function(e){return e.conflict}));return this.extendedPublicKeyCount()===a?i&&!n?l.a.createElement(Es,{addNode:this.addNode,updateNode:this.updateNode}):p?l.a.createElement("p",null,"You must correct the conflict before the wallet can be generated."):l.a.createElement(R.a,null,l.a.createElement(k.a,{title:this.title()}),l.a.createElement(N.a,null,l.a.createElement(A.a,{href:"#",onClick:function(t){return e.toggleImporters(t,!1)}},n?"Hide Key Selection":"Edit Details"),l.a.createElement(xa,null),l.a.createElement("p",null,"You have imported all\xa0",a," extended public keys. You will need to save this information."),l.a.createElement(hs,{onClearFn:function(t){return e.toggleImporters(t,!0)},onDownloadFn:r}),d&&l.a.createElement(x.a,{my:5},l.a.createElement(j.a,{variant:"subtitle1"},"This config does not contain client information. Please choose a client to connect to before importing your wallet."),l.a.createElement(pa,{onSuccess:function(){return e.setState({connectSuccess:!0})}})),"private"===s.type&&!d&&l.a.createElement(x.a,{my:5},l.a.createElement(C.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(C.a,{item:!0,xs:12},l.a.createElement(j.a,{variant:"subtitle1"},"This config uses a private client. Please enter password if not set.")),l.a.createElement(C.a,{item:!0},l.a.createElement(Rt.a,{id:"client-username",label:"Username",defaultValue:s.username,InputProps:{readOnly:!0,disabled:!0,startAdornment:l.a.createElement(ba.a,{position:"start"},l.a.createElement(ga.a,null))}})),l.a.createElement(C.a,{item:!0,md:4,xs:10},l.a.createElement("form",{onSubmit:function(t){return e.handlePasswordEnter(t)}},l.a.createElement(Rt.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",placeholder:"Enter bitcoind password",value:s.password,onChange:function(t){return e.handlePasswordChange(t)},error:s.passwordError.length>0,helperText:s.passwordError}),u&&l.a.createElement(ee.a,null,"Connection confirmed with password!"))))),l.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),l.a.createElement(A.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate,disabled:"public"!==s.type&&!u},"Confirm"))):l.a.createElement("p",null,"Once you have imported all ".concat(a," extended public keys, "),"your wallet will be generated here.",p&&" You will not be able to continue until you address the conflict.")}},{key:"render",value:function(){return l.a.createElement("div",null,this.body())}}]),a}(l.a.Component);var ws=Object(V.a)(Object(V.a)({freeze:Xt,updateDepositSlice:yt,updateChangeSlice:St,fetchSliceData:It,setImportersVisible:Os,setIsWallet:function(){return{type:"SET_IS_WALLET"}},resetWallet:Ot,resetNodesFetchErrors:function(){return{type:"RESET_NODES_FETCH_ERRORS"}}},ia({setPassword:"SET_CLIENT_PASSWORD",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"})),{},{initialLoadComplete:function(){return{type:"INITIAL_LOAD_COMPLETE"}}}),xs=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),{client:e.client}),e.quorum),e.wallet),e.wallet.common)}),ws)(Is),js=a(8),Cs=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter;return Object(fn.ExportExtendedPublicKey)({network:t,keystore:a.method,bip32Path:a.bip32Path,includeXFP:!0})},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,a=t.status,r=t.extendedPublicKeyError,s=n.interaction();return a===fn.UNSUPPORTED?l.a.createElement(ee.a,{className:"text-danger"},s.messageTextFor({status:a})):l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(Rt.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:a!==fn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),l.a.createElement(C.a,{item:!0,md:6},!n.bip32PathIsDefault()&&l.a.createElement(A.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:a!==fn.PENDING},"Default"))),l.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||a===fn.ACTIVE},"Import Extended Public Key")),l.a.createElement(Nn,{messages:s.messagesFor({state:a})}),l.a.createElement(ee.a,{error:!0},r))},n.import=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.validateAndSetExtendedPublicKey,r=t.validateAndSetRootFingerprint,s=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({extendedPublicKeyError:"",status:fn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,o=i.xpub,r(i.rootFingerprint,(function(e){n.setState({extendedPublicKeyError:e,status:fn.PENDING})})),a(o,(function(e){n.setState({extendedPublicKeyError:e,status:fn.PENDING})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),n.setState({extendedPublicKeyError:e.t0.message,status:fn.PENDING});case 16:s();case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),n.hasBIP32PathError=function(){var e=n.state.status;return n.interaction().hasMessagesFor({state:e,level:fn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state.status;return n.interaction().messageTextFor({state:e,level:fn.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.state={extendedPublicKeyError:"",status:n.interaction().isSupported()?fn.PENDING:fn.UNSUPPORTED},n}return a}(l.a.Component),Rs=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state.error;return l.a.createElement(x.a,{mt:2},l.a.createElement(Rt.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:n.handleChange,error:n.hasError(),helperText:t}))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){(0,n.props.validateAndSetExtendedPublicKey)(e.target.value,n.setError)},n.state={error:""},n}return a}(l.a.Component),ks=function(e){var t=e.message;return l.a.createElement("small",null,l.a.createElement(_.a,null,l.a.createElement(B.a,{color:"error.main"},l.a.createElement(K.a,null,l.a.createElement(j.a,{color:"error"},l.a.createElement(jn.a,null))),l.a.createElement(D.a,null,l.a.createElement(j.a,{color:"error"},t)))))},Ns=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter;return new fn.ExportExtendedPublicKey({keystore:a.method,bip32Path:a.bip32Path,network:t,includeXFP:!0})},n.render=function(){var e=n.props,t=e.Reader,a=e.disableChangeMethod,r=e.resetBIP32Path,s=e.extendedPublicKeyImporter,i=n.state,o=i.status,c=i.extendedPublicKeyError;return l.a.createElement(Fn.a,null,l.a.createElement(t,{setError:n.setError,hasError:n.hasBIP32PathError(),errorMessage:n.bip32PathError(),bip32PathIsDefault:n.bip32PathIsDefault,handleBIP32PathChange:n.handleBIP32PathChange,resetBIP32Path:r,onReceive:n.onReceive,interaction:n.interaction(),disableChangeMethod:a,extendedPublicKeyImporter:s}),l.a.createElement(Nn,{messages:n.interaction().messagesFor({state:o}),excludeCodes:["bip32"]}),l.a.createElement(ee.a,{error:!0},c))},n.hasBIP32PathError=function(){var e=n.state.status;return n.interaction().hasMessagesFor({state:e,level:fn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state.status;return n.interaction().messageTextFor({state:e,level:fn.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.setError=function(e){n.setState({extendedPublicKeyError:e})},n.onReceive=function(e){var t=n.props,a=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey,s=t.validateAndSetRootFingerprint,i=t.enableChangeMethod;i&&i();try{var o=n.interaction().parse(e),c=o.xpub,l=o.bip32Path;s(o.rootFingerprint,n.setError),a(l,(function(){r(c,n.setError)}),n.setError)}catch(u){n.setError(u.message)}},n.state={status:n.interaction().isSupported()?fn.PENDING:fn.UNSUPPORTED,extendedPublicKeyError:""},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(){this.state.status!==fn.PENDING&&this.interaction().isSupported()&&this.setState({status:fn.PENDING})}}]),a}(l.a.Component);Ns.defaultProps={enableChangeMethod:null,disableChangeMethod:null};var As=Ns,_s=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.validateAndSetBIP32Path,r=n.state.COLDCARD_MULTISIG_BIP32_PATH;t.method===fn.COLDCARD&&a(r,(function(){}),(function(){}),{})},n.getColdcardBip32Path=function(){var e=n.props,t=e.network,a=e.addressType,r=e.defaultBIP32Path,s=t===$.MAINNET?"0":"1",i="m/45'/".concat(s,"/0");return a===$.P2SH?i:r},n.render=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.validateAndSetExtendedPublicKey,r=e.validateAndSetBIP32Path,s=e.validateAndSetRootFingerprint,i=e.addressType,o=e.network,c=n.state,u=c.extendedPublicKeyError,d=c.COLDCARD_MULTISIG_BIP32_PATH;return l.a.createElement(Fn.a,null,l.a.createElement(As,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:a,validateAndSetBIP32Path:r,validateAndSetRootFingerprint:s,addressType:i,network:o,resetBIP32Path:n.resetColdcardBIP32Path,defaultBIP32Path:d,Reader:Hn.a}),l.a.createElement(ee.a,{error:!0},u))},n.resetColdcardBIP32Path=function(){(0,n.props.validateAndSetBIP32Path)(n.state.COLDCARD_MULTISIG_BIP32_PATH,(function(){}),(function(){}))};var r=n.getColdcardBip32Path();return n.state={COLDCARD_MULTISIG_BIP32_PATH:r},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.validateAndSetBIP32Path,n=t.network,r=t.addressType,s=this.getColdcardBip32Path();e.network===n&&e.addressType===r||(this.setState({COLDCARD_MULTISIG_BIP32_PATH:s}),a(s,(function(){}),(function(){})))}}]),a}(l.a.Component),Bs=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter;return new fn.HermitExportExtendedPublicKey({network:t,bip32Path:a.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.extendedPublicKeyError;return l.a.createElement(Fn.a,null,l.a.createElement(Dn,{startText:"Import Extended Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),l.a.createElement(ee.a,{className:"text-danger"},t))},n.setError=function(e){n.setState({extendedPublicKeyError:e})},n.import=function(e){var t=n.props,a=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var s=e.xpub;a(e.bip32Path,(function(){r(s,n.setError)}),n.setError)},n.onClear=function(){var e=n.props,t=e.reset,a=e.enableChangeMethod;t(!0),n.setError(""),a()},n.state={extendedPublicKeyError:""},n}return a}(l.a.Component),Ks=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,a=e.extendedPublicKeyImporter,r=e.setName;return l.a.createElement(Bt,{number:t,name:a.name,setName:r})},n.renderImport=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.number,r=n.state.disableChangeMethod,s="xpub-".concat(a,"-importer-select-label");return l.a.createElement("div",null,l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:s},"Select Method"),l.a.createElement(pn.a,{labelId:s,id:"public-key-".concat(a,"-importer-select"),disabled:r,value:t.method,onChange:n.handleMethodChange},l.a.createElement(mn.a,{value:"unknown"},"< Select method >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.COLDCARD},"Coldcard"),l.a.createElement(mn.a,{value:fn.LEDGER},"Ledger"),l.a.createElement(mn.a,{value:fn.HERMIT},"Hermit"),l.a.createElement(mn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.network,r=e.addressType,s=e.defaultBIP32Path,i=t.method;return i===fn.TREZOR||i===fn.LEDGER?l.a.createElement(Cs,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:r,defaultBIP32Path:s,network:a}):i===fn.HERMIT?l.a.createElement(Bs,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:r,defaultBIP32Path:s,network:a,resetBIP32Path:n.resetBIP32Path,reset:n.reset}):i===fn.COLDCARD?l.a.createElement(_s,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,addressType:r,defaultBIP32Path:s,network:a}):"text"===i?l.a.createElement(Rs,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number,r=t.setMethod,s=t.setExtendedPublicKey;r(a,e.target.value),s(a,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,a=t.number,r=t.setExtendedPublicKey,s=t.setFinalized;r(a,""),s(a,!1),e&&n.resetBIP32Path()},n.renderBIP32Path=function(){var e=n.props.extendedPublicKeyImporter;return"text"===e.method?l.a.createElement("div",{className:"mt-4"},l.a.createElement("p",null,"Make sure you ",l.a.createElement("strong",null,"record the corresponding BIP32 path."))):l.a.createElement("div",{className:"mt-4"},l.a.createElement("p",null,"The BIP32 path for this extended public key is:"),l.a.createElement("div",{className:"text-center"},l.a.createElement(Wa,{text:e.bip32Path,showIcon:!0})),l.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later."," ",l.a.createElement("strong",null,"Write down this BIP32 path!")))},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props,i=s.number,o=s.setBIP32Path,c=Object($.validateBIP32Path)(e,r);o(i,e),c?a(c):(a(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderExtendedPublicKey=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.network,r=e.classes,s=n.state.conversionMessage,i=t.method===fn.HERMIT&&a===$.NETWORKS.TESTNET?"this should not be an issue as hermit signing is not affected by the conversion.":"this may indicate an invalid network setting, if so correct setting, remove key and try again.";return l.a.createElement("div",null,l.a.createElement("p",null,"The following extended public key was imported:"),l.a.createElement("div",{className:r.xpub},l.a.createElement(Wa,{text:t.extendedPublicKey,showIcon:!0})),n.renderBIP32Path(),""!==s&&l.a.createElement(x.a,{mb:2},l.a.createElement(ee.a,null,s,", ",i," ")),l.a.createElement(A.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(t.method===fn.HERMIT)}},"Remove Extended Public Key"))},n.validateAndSetExtendedPublicKey=function(e,t,a){var r=n.props,s=r.number,i=r.network,o=r.extendedPublicKeyImporters,c=r.setExtendedPublicKey,l=Object($.validateExtendedPublicKey)(e,i),u=e;if(""!==l)try{u=Object($.convertExtendedPublicKey)(e,"testnet"===i?"tpub":"xpub")}catch(m){return t(m.message),void c(s,e)}var d=Object($.validateExtendedPublicKey)(u,i);if(""!==d)return t(d),void c(s,e);if(c(s,u),u&&Object.values(o).find((function(e,t){return t!==s-1&&e.extendedPublicKey===u})))t("This extended public key has already been imported.");else{t("");var p=u===e?"":"Your extended public key has been converted from ".concat(e.slice(0,4)," to ").concat(u.slice(0,4));n.setState({conversionMessage:p}),n.finalize(),a&&a()}},n.validateAndSetRootFingerprint=function(e,t){var a=n.props,r=a.number,s=a.setExtendedPublicKeyRootXfp,i=Object($.validateRootFingerprint)(e);i?t(i):s(r,e)},n.state={disableChangeMethod:!1,conversionMessage:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,a=e.finalizedNetwork,n=e.network,r=t.method&&t.conflict,s="";return r&&(s=a!==n?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),l.a.createElement(R.a,null,l.a.createElement(k.a,{title:this.title()}),l.a.createElement(N.a,null,r&&l.a.createElement(ks,{message:s}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),a}(l.a.Component);var Ds={setName:bs,resetBIP32Path:gs,setBIP32Path:vs,setMethod:ys,setExtendedPublicKey:Ss,setExtendedPublicKeyRootXfp:Ps,setFinalized:Ts},Ms=Object(js.a)((function(){return{xpub:{lineHeight:".8rem",overflowWrap:"break-word"}}}))(Ks),Us=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),e.quorum),{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})}),Ds)(Ms),Ls=a(1400),Fs=a(1413),zs=a(1414),Ws=a(1415),Gs=Object(wt.a)((function(){return{card:{height:"100%",flexDirection:"column",display:"flex"},cardContent:{textAlign:"center",paddingTop:"0px",display:"flex",flex:1}}})),qs=Object(js.a)({root:{"&.Mui-disabled":{pointerEvents:"auto"}}})(A.a),Hs=function(e){var t=e.tooltipText,a=e.disabled,n=e.onClick,r=Object(Da.a)(e,["tooltipText","disabled","onClick"]),s={disabled:a,component:a?"div":void 0,onClick:a?void 0:n};return l.a.createElement(ma.a,{title:t},l.a.createElement(qs,Object.assign({},r,s)))},Xs=function(e){var t=e.addresses,a=e.client,n=e.handleRefresh,r=e.onClearConfig,s=e.onDownloadConfig,i=e.onImportAddresses,o=e.refreshing,c=e.walletActivated,u=Gs();return l.a.createElement(R.a,{className:u.card},l.a.createElement(k.a,{title:"Wallet Actions"}),l.a.createElement(N.a,{className:u.cardContent},l.a.createElement(C.a,{container:!0,spacing:1,alignItems:"center",justify:"center"},l.a.createElement(C.a,{item:!0,xs:12},l.a.createElement(Ls.a,{variant:"outlined"},l.a.createElement(Hs,{tooltipText:"Force a refresh for latest wallet state and balance.",disabled:!c,onClick:n,startIcon:o?l.a.createElement(Ra.a,{size:24}):l.a.createElement(Fs.a,null)},"Refresh"),l.a.createElement(Hs,{tooltipText:"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances.",onClick:s,disabled:!1,startIcon:l.a.createElement(zs.a,null)},"Download Configuration"),l.a.createElement(Hs,{tooltipText:"Only clears the wallet config from browser sessions. Funds remain unaffected.",disabled:!c,startIcon:l.a.createElement(Ws.a,null),onClick:function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),r(e)}},"Clear Wallet"))),"private"===a.type&&c&&l.a.createElement(C.a,{item:!0},l.a.createElement(un,{addresses:t,client:a,importCallback:i})))))};Xs.defaultProps={walletActivated:!1,refreshing:!1,addresses:[]};var Ys=Xs,Vs=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleImport=function(e){var t=e.target,a=new FileReader;t.files[0]&&t.files[0].size<1048576?(a.onload=function(e){var t=e.target.result;n.setConfigJson(t)},a.readAsText(t.files[0])):n.setState({configError:"Problem uploading file."})},n.refresh=Object(Q.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({refreshing:!0}),e.next=3,n.generatorRefresh();case 3:n.setState({refreshing:!1});case 4:case"end":return e.stop()}}),e)}))),n.resetErrorAndClearTargetValue=function(e){e.target.value="",n.setState({configError:""})},n.importDetails=function(){var e=n.state.configJson,t=n.props,a=t.setTotalSigners,r=t.setRequiredSigners,s=t.setAddressType,i=t.setNetwork,o=t.setStartingAddressIndex,c=t.setExtendedPublicKeyImporterMethod,l=t.setExtendedPublicKeyImporterExtendedPublicKey,u=t.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,d=t.setExtendedPublicKeyImporterBIP32Path,p=t.setExtendedPublicKeyImporterFinalized,m=t.setExtendedPublicKeyImporterName,E=t.updateWalletNameAction,h=t.setClientType,f=t.setClientUrl,b=t.setClientUsername,v=JSON.parse(e);a(v.quorum.totalSigners),r(v.quorum.requiredSigners),s(v.addressType),"regtest"===v.network?i("testnet"):i(v.network),E(0,v.name),v.client?(h(v.client.type),"private"===v.client.type&&(f(v.client.url),b(v.client.username))):h("unknown"),v.startingAddressIndex&&o(v.startingAddressIndex),v.extendedPublicKeys.forEach((function(e,t){var a=t+1;m(a,e.name),e.method?c(a,e.method):c(a,"unknown"),d(a,e.bip32Path),l(a,e.xpub),e.xfp?u(a,e.xfp):u(a,"unknown"),p(a,!0)}))},n.renderWalletImporter=function(){var e=n.state.configError;return n.props.configuring?l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"upload-config"},l.a.createElement("input",{style:{display:"none"},id:"upload-config",name:"upload-config",accept:"application/json",onChange:n.handleImport,onClick:n.resetErrorAndClearTargetValue,type:"file"}),l.a.createElement(A.a,{color:"primary",variant:"contained",component:"span",style:{marginTop:"20px"}},"Import Wallet Configuration")),l.a.createElement(ee.a,{error:!0},e)):""},n.renderSettings=function(){var e=null;return n.props.configuring&&(e=l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(ta,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(ra,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Jt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pa,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(ha,null)))),e},n.renderExtendedPublicKeyImporters=function(){for(var e=n.props,t=e.totalSigners,a=e.configuring,r=[],s=1;s<=t;s+=1)r.push(l.a.createElement(x.a,{key:s,mt:1===s?0:2,display:a?"block":"none"},l.a.createElement(Us,{key:s,number:s})));return r},n.downloadWalletDetails=function(e){var t=n.props.walletDetailsText;e.preventDefault();var a=n.walletDetailsFilename();Object(H.a)(t,a)},n.walletDetailsFilename=function(){var e=n.props,t=e.totalSigners,a=e.requiredSigners,r=e.addressType,s=e.walletName;return"bitcoin-".concat(a,"-of-").concat(t,"-").concat(r,"-").concat(s,".json")},n.totalBalance=function(){var e=n.props,t=e.deposits,a=e.change;return Object.keys(t.nodes).length?Object($.satoshisToBitcoins)(t.balanceSats.plus(a.balanceSats)).toFixed():""},n.clearConfig=function(e){var t=n.props,a=t.setExtendedPublicKeyImporterVisible,r=t.resetWallet;e.preventDefault(),r(),a(!0),n.setState({generating:!1})},n.render=function(){var e=n.props,t=e.client,a=e.configuring,r=e.confirmedBalance,s=e.walletName,i=e.setName,o=e.deposits,c=e.change,u=e.network,d=e.pendingBalance,p=e.nodesLoaded,m=e.frozen,E=e.unknownAddresses,h=n.state,f=h.refreshing,b=h.generating,v=c.fetchUTXOsErrors+o.fetchUTXOsErrors>0?"Wallet loaded, but with errors...":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{mt:3},l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0,xs:10,md:6},l.a.createElement(Mt,{editable:!Object.keys(o.nodes).length||!Object.keys(c.nodes).length,walletName:s,setName:i,balance:+Object($.satoshisToBitcoins)(r).toFixed(),pendingBalance:+Object($.satoshisToBitcoins)(d).toFixed(),network:u})),l.a.createElement(C.a,{item:!0,xs:10,md:6},(p||m)&&l.a.createElement(Ys,{addresses:E,refreshing:f,walletActivated:p,handleRefresh:function(){return n.refresh()},onClearConfig:function(e){n.clearConfig(e)},onDownloadConfig:function(e){return n.downloadWalletDetails(e)},client:t,onImportAddresses:function(e,t){return n.afterImportAddresses(t)}})))),v.length?l.a.createElement(ee.a,{style:{float:"right",padding:"11px",fontSize:"1.5em"},error:!0},v):"",l.a.createElement(x.a,null,l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0,xs:12},n.renderWalletImporter()),l.a.createElement(C.a,{item:!0,md:a?8:12},n.renderExtendedPublicKeyImporters(),l.a.createElement(x.a,{mt:2},l.a.createElement(xs,{generating:b,setGenerating:function(e){return n.setGenerating(e)},downloadWalletDetails:n.downloadWalletDetails,refreshNodes:function(e){return n.generatorRefresh=e}}))),n.renderSettings())))},n.state={configError:"",configJson:"",refreshing:!1,generating:!1},n}return Object(v.a)(a,null,[{key:"validateProperties",value:function(e,t,a){for(var n=0;n<t.length;n+=1){var r=t[n],s=""!==a?e[a]:e;if(!Object.prototype.hasOwnProperty.call(s,r))return'Configuration missing property "'.concat(""!==a?"".concat(a,"."):"").concat(r,'"')}return""}},{key:"validateConfig",value:function(e){var t=a.validateProperties(e,["name","addressType","network","quorum","extendedPublicKeys"],"");if(""!==t)return t;if(void 0!==e.startingAddressIndex){var n=Object($.validateBIP32Index)(String(e.startingAddressIndex),{mode:"unhardened "}).replace("BIP32","Starting Address");if(""!==n)return n}if(e.client){var r="public"===e.client.type?["type"]:["type","url","username"],s=a.validateProperties(e,r,"client");if(""!==s)return s}var i=a.validateProperties(e,["requiredSigners","totalSigners"],"quorum");return""!==i?i:a.validateExtendedPublicKeys(e.extendedPublicKeys,e.network)}},{key:"validateExtendedPublicKeys",value:function(e,t){var a=t;"regtest"===t&&(a="testnet");for(var n={name:function(e,t){return"string"===typeof e?"":"Extended public key ".concat(t," name must be a string")},bip32Path:function(t,a){if("text"===e[a-1].method)return"";if("undefined"===typeof e[a-1].method)return"";var n=Object($.validateBIP32Path)(t);return""!==n?"Extended public key ".concat(a," error: ").concat(n):""},xpub:function(e){return Object($.validateExtendedPublicKey)(e,a)},method:function(e,t){return["trezor","coldcard","ledger","hermit","xpub","text",void 0].includes(e)?"":"Invalid method for extended public key ".concat(t)}},r=Object.keys(n),s=[],i=0;i<e.length;i+=1){if(s.includes(e[i].xpub))return"Duplicate xpub found.";s.push(e[i].xpub);for(var o=0;o<r.length;o+=1){var c=r[o],l=e[i][c],u=n[c](l,i+1);if(""!==u)return u}}return""}}]),Object(v.a)(a,[{key:"componentDidMount",value:function(){if(sessionStorage){var e=sessionStorage.getItem("caravan_config");e&&this.setConfigJson(e)}}},{key:"setConfigJson",value:function(e){var t,n=this;try{var r=JSON.parse(e);t=a.validateConfig(r)}catch(s){t="Invalid JSON"}sessionStorage&&""===t&&sessionStorage.setItem("caravan_config",e),this.setState({configJson:e,configError:t},(function(){""===t&&n.importDetails()}))}},{key:"setGenerating",value:function(e){var t=this.state.generating,a=e;void 0===e&&(a=!t),this.setState({generating:a})}},{key:"afterImportAddresses",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n,r,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return n=this.props,r=n.unknownSlices,s=n.fetchSliceData,i=r.reduce((function(e,a){return t.indexOf(a.multisig.address)>-1&&e.push(a),a}),[]),e.next=6,s(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(l.a.Component);Vs.defaultProps={pendingBalance:0};var Js=Object(V.a)(Object(V.a)({fetchSliceData:It,resetWallet:Ot,setName:Pt,setTotalSigners:Gt,setRequiredSigners:qt,setAddressType:Ht,setNetwork:Wt,setStartingAddressIndex:function(e){return{type:"SET_STARTING_ADDRESS_INDEX",value:e}},setExtendedPublicKeyImporterMethod:ys,setExtendedPublicKeyImporterExtendedPublicKey:Ss,setExtendedPublicKeyImporterBIP32Path:vs,setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:Ps,setExtendedPublicKeyImporterName:bs,setExtendedPublicKeyImporterFinalized:Ts,setExtendedPublicKeyImporterVisible:Os,updateWalletNameAction:Pt},ia({setClientType:"SET_CLIENT_TYPE",setClientUrl:"SET_CLIENT_URL",setClientUsername:"SET_CLIENT_USERNAME",setClientPassword:"SET_CLIENT_PASSWORD"})),{},{updateDepositNode:yt,updateChangeNode:St}),Zs=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),e.quorum),{walletName:e.wallet.common.walletName,nodesLoaded:e.wallet.common.nodesLoaded,walletMode:e.wallet.common.walletMode}),{},{confirmedBalance:n.getConfirmedBalance(e),pendingBalance:n.getPendingBalance(e),walletDetailsText:Ze(e),unknownAddresses:Ve(e),unknownSlices:Ye(e)},e.wallet),{},{client:e.client})}),Js)(Vs);var Qs=ca({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),$s=Qs.setPublicKeyImporterName,ei=Qs.setPublicKeyImporterBIP32Path,ti=Qs.resetPublicKeyImporterBIP32Path,ai=Qs.setPublicKeyImporterMethod,ni=Qs.setPublicKeyImporterPublicKey,ri=Qs.setPublicKeyImporterFinalized,si=Qs.movePublicKeyImporterUp,ii=Qs.movePublicKeyImporterDown,oi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isInConflict=function(){var t=e.props.publicKeyImporters;return Object.values(t).some((function(e){return e.conflict}))},e.publicKeyCount=function(){var t=e.props,a=t.publicKeyImporters,n=t.addressType;return Object.values(a).filter((function(e){var t=e.publicKey;return e.finalized&&!Object($.validatePublicKey)(t,n)})).length},e.publicKeysAreCanonicallySorted=function(){var t=e.props.publicKeyImporters,a=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})),n=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})).sort();return a.filter((function(e,t){return e===n[t]})).length===a.length},e.canonicallySortPublicKeys=function(){(0,e.props.sortPublicKeyImporters)()},e.generateMultisig=function(){for(var t=e.props,a=t.network,n=t.publicKeyImporters,r=t.totalSigners,s=t.requiredSigners,i=t.addressType,o=t.setMultisigAddress,c=[],l=1;l<=r;l+=1)c.push(n[l].publicKey);var u=$.generateMultisigFromPublicKeys.apply(void 0,[a,i,s].concat(c));return o(u.address),u},e.downloadAddressDetails=function(t){t.preventDefault();var a=e.generateMultisig(),n=e.addressDetailsText(a),r=e.addressDetailsFilename(a);Object(H.a)(n,r)},e.addressDetailsFilename=function(t){var a=e.props,n=a.totalSigners,r=a.requiredSigners,s=a.addressType;return"bitcoin-".concat(r,"-of-").concat(n,"-").concat(s,"-").concat(t.address,".txt")},e.addressDetailsText=function(t){var a=e.props,n=a.addressType,r=a.network,s=a.totalSigners,i=a.requiredSigners,o=Object($.multisigRedeemScript)(t),c=Object($.multisigWitnessScript)(t),l=o?"Redeem Script: ".concat(Object($.scriptToHex)(o)):"",u=c?"Witness Script: ".concat(Object($.scriptToHex)(c)):"",d=o&&c?"\n\n":"";return"Address: ".concat(t.address,"\n\nType: ").concat(n,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(i,"-of-").concat(s,"\n\nBIP32 Paths:\n").concat(e.publicKeyImporterBIP32Paths(),"\n\n").concat(l).concat(d).concat(u,"\n")},e.publicKeyImporterBIP32Paths=function(){for(var t=e.props.totalSigners,a=[],n=1;n<=t;n+=1)a.push(e.publicKeyImporterBIP32Path(n));return a.join("\n")},e.publicKeyImporterBIP32Path=function(t){var a=e.props.publicKeyImporters[t],n="text"===a.method?"Unknown (make sure you have written this down previously!)":a.bip32Path;return"  * ".concat(a.name,": ").concat(n,": ").concat(a.publicKey)},e.title=function(){var t=e.props,a=t.totalSigners,n=t.requiredSigners,r=t.addressType;return l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(C.a,{item:!0},n,"-of-",a," Multisig ",r," "),l.a.createElement(C.a,{item:!0},l.a.createElement("small",null,"Public Keys: ".concat(e.publicKeyCount(),"/").concat(a))))},e}return Object(v.a)(a,[{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return l.a.createElement("div",null,this.isInConflict()&&l.a.createElement(ks,null),!a&&l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(C.a,{item:!0,md:8},l.a.createElement(ee.a,{error:!0},"WARNING: These public keys are not in the standard"," ",Object(H.b)("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),l.a.createElement(x.a,{mt:2},l.a.createElement(nn,{multisig:t})),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return l.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}},{key:"render",value:function(){return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:this.title()}),l.a.createElement(N.a,null,this.body()))}}]),a}(l.a.Component);var ci={sortPublicKeyImporters:function(){return{type:"SORT_PUBLIC_KEY_IMPORTERS"}},setMultisigAddress:function(e){return{type:"UPDATE_MULTISIG_ADDRESS",value:e}}},li=Object(m.b)((function(e){return Object(V.a)(Object(V.a)({},e.settings),e.address)}),ci)(oi),ui=a(1416),di=a(1417),pi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.error,a=e.publicKey;return l.a.createElement(x.a,{mt:2},l.a.createElement(Rt.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:a,onChange:n.handleChange,error:n.hasError(),helperText:t}),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===a||n.hasError()},"Add Public Key")))},n.import=function(){var e=n.props,t=e.validatePublicKey,a=e.onImport,r=n.state.publicKey,s=t(r);s?n.setError(s):a({publicKey:r})},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,a=(0,n.props.validatePublicKey)(t);n.setState({publicKey:t,error:a})},n.state={error:"",publicKey:""},n}return a}(l.a.Component),mi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.bip32Path,a=e.extendedPublicKey,r=e.extendedPublicKeyError,s=e.bip32PathError,i=e.conversionMessage;return l.a.createElement("div",null,l.a.createElement(x.a,{mt:2},l.a.createElement(Rt.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:a,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:r})),""!==i&&l.a.createElement(x.a,{mb:2},l.a.createElement(ee.a,null,i,", this may indicate an invalid network setting, if so correct setting, remove key and try again.")),l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:10},l.a.createElement(Rt.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:t,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:s}),l.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement(C.a,{item:!0,md:2},!n.bip32PathIsDefault()&&l.a.createElement(A.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===a||n.hasError()},"Import Public Key"))))},n.import=function(){var e=n.props,t=e.network,a=e.validatePublicKey,r=e.onImport,s=n.state,i=s.extendedPublicKey,o=s.bip32Path,c=Object($.deriveChildPublicKey)(i,o,t),l=a(c);l?n.setState({bip32PathError:l}):r({publicKey:c,bip32Path:o})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.handleBIP32PathChange=function(e){var t=e.target.value,a=Object($.validateBIP32Path)(t,{mode:"unhardened"});n.setState({bip32Path:t,bip32PathError:null!==a&&void 0!==a?a:""})},n.bip32PathIsDefault=function(){return"m/0"===n.state.bip32Path},n.resetBIP32Path=function(){n.setState({bip32Path:"m/0",bip32PathError:""})},n.handleExtendedPublicKeyChange=function(e){var t=n.props.network,a=e.target.value,r=a;if(""!==Object($.validateExtendedPublicKeyForNetwork)(a,t))try{r=Object($.convertExtendedPublicKey)(a,"testnet"===t?"tpub":"xpub")}catch(o){return void n.setState({extendedPublicKey:a,extendedPublicKeyError:o.message,conversionMessage:""})}var s=Object($.validateExtendedPublicKey)(r,t);if(""===s){var i=r===a?"":"Your extended public key has been converted from ".concat(a.slice(0,4)," to ").concat(r.slice(0,4));n.setState({extendedPublicKey:r,extendedPublicKeyError:"",conversionMessage:i})}else n.setState({extendedPublicKey:a,extendedPublicKeyError:s,conversionMessage:""})},n.state={bip32Path:"m/0",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:"",conversionMessage:""},n}return a}(l.a.Component),Ei=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).interaction=function(){var e,t,a=n.props,r=a.network,s=a.method,i=a.defaultBIP32Path;return Object(fn.ExportPublicKey)({network:r,keystore:s,bip32Path:null!==(e=null===(t=n.state)||void 0===t?void 0:t.bip32Path)&&void 0!==e?e:i})},n.render=function(){var e=n.state,t=e.status,a=e.bip32Path,r=e.publicKeyError,s=n.interaction();return t===fn.UNSUPPORTED?l.a.createElement(ee.a,{error:!0},s.messageTextFor({status:t})):l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(Rt.a,{fullWidth:!0,label:"BIP32 Path",value:a,onChange:n.handleBIP32PathChange,disabled:t!==fn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),l.a.createElement(C.a,{item:!0,md:6},!n.bip32PathIsDefault()&&l.a.createElement(A.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:t!==fn.PENDING},"Default"))),l.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||t===fn.ACTIVE},"Import Public Key")),l.a.createElement(Nn,{messages:s.messagesFor({state:t}),excludeCodes:["bip32"]}),l.a.createElement(ee.a,{error:!0},r))},n.import=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.enableChangeMethod,r=t.disableChangeMethod,s=t.validatePublicKey,i=t.onImport,o=n.state.bip32Path,r(),n.setState({publicKeyError:"",status:fn.ACTIVE}),e.prev=4,e.next=7,n.interaction().run();case 7:c=e.sent,(l=s(c))?n.setState({publicKeyError:l,status:fn.PENDING}):i({publicKey:c,bip32Path:o}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n.setState({publicKeyError:e.t0.message,status:fn.PENDING});case 16:a();case 17:case"end":return e.stop()}}),e,null,[[4,12]])}))),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t||n.interaction().hasMessagesFor({state:a,level:fn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t?t:n.interaction().messageTextFor({state:a,level:fn.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){var t=e.target.value,a=Object($.validateBIP32Path)(t);n.setState({bip32Path:t,bip32PathError:null!==a&&void 0!==a?a:""})},n.bip32PathIsDefault=function(){return n.state.bip32Path===n.props.defaultBIP32Path},n.resetBIP32Path=function(){var e=n.props.defaultBIP32Path;n.setState({bip32Path:e,bip32PathError:""})},n.state={bip32Path:e.defaultBIP32Path,publicKeyError:"",bip32PathError:"",status:n.interaction().isSupported()?fn.PENDING:fn.UNSUPPORTED},n}return a}(l.a.Component),hi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,a=e.totalSigners,r=e.publicKeyImporter,s=e.setName;return l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(C.a,{item:!0},l.a.createElement(Bt,{number:t,name:r.name,setName:s})),l.a.createElement(C.a,{item:!0},l.a.createElement(C.a,{container:!0,justify:"flex-end"},l.a.createElement(A.a,{type:"button",variant:"contained",onClick:n.moveUp,disabled:1===t},l.a.createElement(ui.a,null)),l.a.createElement("span",null,"\xa0"),l.a.createElement(A.a,{type:"button",variant:"contained",onClick:n.moveDown,disabled:t===a},l.a.createElement(di.a,null)))))},n.renderImport=function(){var e=n.props,t=e.publicKeyImporter,a=e.number,r=n.state.disableChangeMethod,s="public-key-".concat(a,"-importer-select-label");return l.a.createElement("div",null,l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:s},"Select Method"),l.a.createElement(pn.a,{labelId:s,id:"public-key-".concat(a,"-importer-select"),disabled:r,value:t.method,onChange:n.handleMethodChange},l.a.createElement(mn.a,{value:""},"< Select method >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.LEDGER},"Ledger"),l.a.createElement(mn.a,{value:"xpub"},"Derive from extended public key"),l.a.createElement(mn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.publicKeyImporter,a=e.network,r=e.defaultBIP32Path;return t.method===fn.TREZOR||t.method===fn.LEDGER?l.a.createElement(Ei,{method:t.method,validatePublicKey:n.validatePublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,defaultBIP32Path:r,network:a,onImport:n.handleImport}):"xpub"===t.method?l.a.createElement(mi,{network:a,validatePublicKey:n.validatePublicKey,onImport:n.handleImport}):"text"===t.method?l.a.createElement(pi,{validatePublicKey:n.validatePublicKey,onImport:n.handleImport}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number,r=t.setMethod,s=t.setPublicKey;r(a,e.target.value),s(a,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,a=t.number,r=t.setPublicKey,s=t.resetBIP32Path,i=t.setFinalized;r(a,""),i(a,!1),e&&s(a)},n.moveUp=function(e){var t=n.props,a=t.moveUp,r=t.number;e.preventDefault(),a(r)},n.moveDown=function(e){var t=n.props,a=t.moveDown,r=t.number;e.preventDefault(),a(r)},n.renderBIP32Path=function(){var e=n.props.publicKeyImporter;return"text"!==e.method?l.a.createElement(x.a,{mt:4},l.a.createElement("p",null,"The BIP32 path for this public key is:"),l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(Wa,{text:e.bip32Path,code:!0})),l.a.createElement(x.a,{mt:4},l.a.createElement("p",null,"You will need this BIP32 path to sign for this key later."," ",l.a.createElement("strong",null,"Write down this BIP32 path!")))):null},n.renderPublicKey=function(){var e=n.props.publicKeyImporter;return l.a.createElement("div",null,l.a.createElement("p",null,"The following public key was imported:"),l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(Wa,{text:e.publicKey,showIcon:!0,code:!0})),n.renderBIP32Path(),l.a.createElement(x.a,{mt:2},l.a.createElement(A.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(!1)}},"Remove Public Key")))},n.handleImport=function(e){var t=e.bip32Path,a=e.publicKey,r=n.props,s=r.number,i=r.setBIP32Path,o=r.setPublicKey;t&&i(s,t),o(s,a),n.finalize()},n.validatePublicKey=function(e){var t=n.props,a=t.number,r=t.addressType,s=t.publicKeyImporters,i=Object($.validatePublicKey)(e,r);if(i)return i;var o=e&&Object.values(s).find((function(t,n){return n!==a-1&&t.publicKey===e}))?"This public key has already been imported.":null;return o||""},n.state={disableChangeMethod:!1},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.number,n=t.setFinalized,r=t.addressType,s=t.publicKeyImporter;e.addressType!==r&&this.validatePublicKey(s.publicKey)&&n(a,!1)}},{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.validatePublicKey(e.publicKey);return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:this.title()}),l.a.createElement(N.a,null,e.method&&"text"!==e.method&&e.conflict&&l.a.createElement(ks,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),t.includes("does not support uncompressed public keys")&&l.a.createElement(ks,{message:t}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),a}(l.a.Component);var fi={setName:$s,setBIP32Path:ei,resetBIP32Path:ti,setMethod:ai,setPublicKey:ni,setFinalized:ri,moveUp:si,moveDown:ii},bi=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),e.address),{publicKeyImporter:e.address.publicKeyImporters[t.number]})}),fi)(hi),vi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.address,n=t.client;return l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0,xs:12},l.a.createElement("h1",null,"Address Generator")),l.a.createElement(C.a,{item:!0,md:8},e.renderPublicKeyImporters(),l.a.createElement(x.a,{mt:2},l.a.createElement(li,null))),l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(ta,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(ra,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Jt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pa,{publicNotes:l.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:l.a.createElement("div",null,l.a.createElement(un,{addresses:[a],client:n}))})))))},e.renderPublicKeyImporters=function(){for(var t=e.props.totalSigners,a=[],n=1;n<=t;n+=1)a.push(l.a.createElement(x.a,{key:n,mt:1===n?0:2},l.a.createElement(bi,{number:n})));return a},e}return a}(l.a.Component);vi.defaultProps={address:""};var gi=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)({},{totalSigners:e.settings.totalSigners}),e.address),{},{client:e.client})}))(vi),yi=a(1421),Si=a(1422),Pi="START_TEST_SUITE_RUN",Ti="SET_CURRENT_TEST_RUN";function Oi(){return{type:Pi}}function Ii(e){return{type:Ti,value:e}}var wi="SET_KEYSTORE",xi="SET_KEYSTORE_NOTE",ji="SET_KEYSTORE_STATUS";function Ci(e,t){return{type:wi,keystoreType:e,version:t}}function Ri(e){return{type:xi,value:e}}function ki(e){return{type:ji,value:e}}var Ni="START_TEST_RUN",Ai="END_TEST_RUN",_i="RESET_TEST_RUN",Bi="SET_TEST_RUN_NOTE";function Ki(e){return{type:Ni,testRunIndex:e}}function Di(e,t,a){return{type:Ai,testRunIndex:e,status:t,message:a}}function Mi(e){return{type:_i,testRunIndex:e}}function Ui(e,t){return{type:Bi,testRunIndex:e,note:t}}var Li=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var a=e.props,n=a.setNote,r=a.mode,s=a.testRunIndex,i=t.target.value;"testRun"===r?n(s,i):n(i)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.note;return l.a.createElement(Rt.a,{name:"notes",label:"Notes",value:e,onChange:this.handleChange,multiline:!0,fullWidth:!0,rows:3})}}]),a}(l.a.Component);Li.defaultProps={testRunIndex:0};var Fi={setNote:Ri},zi={setNote:Ui},Wi=Object(m.b)((function(e){return{note:e.keystore.note,mode:"keystore"}}),Fi)(Li),Gi=Object(m.b)((function(e){return{mode:"testRun",testRunIndex:e.testSuiteRun.currentTestRunIndex,note:e.testSuiteRun.testRuns[e.testSuiteRun.currentTestRunIndex].note}}),zi)(Li),qi=[""].concat(Object(te.a)(Object.values(fn.INDIRECT_KEYSTORES))),Hi=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).detectVersion=Object(Q.a)(Z.a.mark((function t(){var a,n,r,s,i,o;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.type,r=a.setKeystore,s=a.setKeystoreStatus,i=a.setErrorNotification,s(fn.ACTIVE),t.prev=2,t.next=5,e.interaction().run();case 5:(o=t.sent)&&r(n,o.spec),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),i(t.t0.message);case 13:s(fn.PENDING);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.interaction=function(){var t=e.props.type;return Object(fn.GetMetadata)({keystore:t})},e.handleTypeChange=function(t){var a=e.props,n=a.version;(0,a.setKeystore)(t.target.value,n)},e.handleVersionChange=function(t){var a=e.props,n=a.type;(0,a.setKeystore)(n,t.target.value)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.status,n=e.version;return l.a.createElement(x.a,null,l.a.createElement(C.a,{container:!0,spacing:2,justify:"center"},l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:"keystore-select-label"},"Type"),l.a.createElement(pn.a,{labelId:"keystore-select-label",id:"keystore-select",value:t,onChange:this.handleTypeChange},l.a.createElement(mn.a,{value:""},"< Select type >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.LEDGER},"Ledger"),l.a.createElement(mn.a,{value:fn.COLDCARD},"Coldcard"),l.a.createElement(mn.a,{value:fn.HERMIT},"Hermit"),l.a.createElement(mn.a,{value:"ledgerPSBT"},"Ledger signing from PSBT"),l.a.createElement(mn.a,{value:"trezorPSBT"},"Trezor signing from PSBT")))),l.a.createElement(C.a,{item:!0,md:6},l.a.createElement(Rt.a,{name:"version",fullWidth:!0,label:"Version",value:n,disabled:""===t,onChange:this.handleVersionChange})),l.a.createElement(C.a,{item:!0,md:2},l.a.createElement(A.a,{disabled:a===fn.ACTIVE||qi.includes(t),onClick:this.detectVersion},a===fn.ACTIVE?"Detecting...":"Detect"))),t&&!qi.includes(t)&&l.a.createElement(Nn,{messages:this.interaction().messagesFor({state:a})}),l.a.createElement(Wi,null))}}]),a}(l.a.Component),Xi=Object(V.a)(Object(V.a)({},i),{},{setErrorNotification:ht}),Yi=Object(m.b)((function(e){return Object(V.a)({},e.keystore)}),Xi)(Hi),Vi=a(590),Ji=a.n(Vi),Zi=a(1403),Qi=a(1418),$i=a(1419),eo=a(1420),to=a(58),ao=(a(1299),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.testSuiteRun,n=t.keystore,r=Ji.a.getParser(window.navigator.userAgent);return l.a.createElement(C.a,{container:!0,direction:"column",spacing:3},l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Summary"}),l.a.createElement(N.a,null,l.a.createElement("dl",null,l.a.createElement("dt",null,"OS:"),l.a.createElement("dd",null,r.getOSName()," ",r.getOSVersion()),l.a.createElement("dt",null,"Browser:"),l.a.createElement("dd",null,r.getBrowserName()," ",r.getBrowserVersion()),l.a.createElement("dt",null,"unchained-wallets:"),l.a.createElement("dd",null,"v.",fn.VERSION),n.type&&l.a.createElement(x.a,null,l.a.createElement("dt",null,"Keystore:"),l.a.createElement("dd",null,e.keystoreName(n.type)," ",n.version)),n.note&&l.a.createElement(x.a,null,l.a.createElement("dt",null,"Notes:"),l.a.createElement("dd",null,n.note)))))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Tests",subheader:"".concat(a.testRuns.length," Total")}),l.a.createElement(N.a,null,e.renderTests()))))},e.renderTests=function(){var t=e.props,a=t.testSuiteRun;return""===t.keystore.type?l.a.createElement("p",null,"Choose a keystore type to generate a test suite..."):l.a.createElement(x.a,null,l.a.createElement(j.a,{variant:"h6"},l.a.createElement("span",{className:"TestSuiteRunSummary-success"},a.testRuns.filter((function(e){return e.status===to.a.SUCCESS})).length," ",l.a.createElement("small",null,"SUCCESS")),"\xa0 / \xa0",l.a.createElement("span",{className:"TestSuiteRunSummary-failure"},a.testRuns.filter((function(e){return e.status===to.a.FAILURE})).length," ",l.a.createElement("small",null,"FAIL")),"\xa0 / \xa0",l.a.createElement("span",{className:"TestSuiteRunSummary-error"},a.testRuns.filter((function(e){return e.status===to.a.ERROR})).length," ",l.a.createElement("small",null,"ERROR"))),l.a.createElement(Zi.a,null),l.a.createElement(_.a,{style:{maxHeight:"200px",overflow:"auto"},dense:!0,component:"nav"},a.testRuns.map(e.renderTestRun)))},e.renderTestRun=function(t,a){var n=e.props.testSuiteRun;return l.a.createElement(B.a,{selected:n.currentTestRunIndex===a,button:!0,key:a,onClick:e.testRunChooser(a),disabled:!n.started},e.renderTestRunResult(t),l.a.createElement(D.a,null,t.test.name(),t.status!==fn.PENDING&&t.status!==fn.ACTIVE&&l.a.createElement("small",null,"\xa0 (",qn.a.duration(t.endedAt.diff(t.startedAt)).asSeconds(),"s)")),t.note&&l.a.createElement(K.a,null,l.a.createElement(ma.a,{title:t.note},l.a.createElement(Qi.a,null))))},e.renderTestRunResult=function(e){switch(e.status){case fn.PENDING:return l.a.createElement(K.a,null,l.a.createElement($i.a,{className:"TestSuiteRunSummary-pending"}));case to.a.SUCCESS:return l.a.createElement(K.a,null,l.a.createElement(En.a,{className:"TestSuiteRunSummary-success"}));case to.a.FAILURE:return l.a.createElement(K.a,null,l.a.createElement(eo.a,{className:"TestSuiteRunSummary-failure"}));case to.a.ERROR:return l.a.createElement(K.a,null,l.a.createElement(hn.a,{className:"TestSuiteRunSummary-error"}));case fn.ACTIVE:return l.a.createElement(K.a,null,l.a.createElement(Ra.a,{className:"TestSuiteRunSummary-active"}));default:return null}},e.testRunChooser=function(t){var a=e.props.setCurrentTestRun;return function(){a(t)}},e.keystoreName=function(e){switch(e){case fn.TREZOR:return"Trezor";case fn.LEDGER:return"Ledger";case fn.HERMIT:return"Hermit";case fn.COLDCARD:return"Coldcard";default:return""}},e}return a}(l.a.Component)),no={setCurrentTestRun:Ii},ro=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),no)(ao),so=(a(1300),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.handleKeyDown=function(t){var a=e.props,n=a.status,r=a.isLastTest,s=a.nextTest;32===t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(t.preventDefault(),n!==fn.ACTIVE&&(n===fn.PENDING?e.start():r||s()))},e.handleDownloadPSBTClick=function(){var t=e.props.test,a=t.interaction(),n=t.name().split(" "),r=a.request().toBase64(),s=qn()().format("HHmm"),i="".concat(s,"-").concat(n[2],"-").concat(n[1][0],".psbt");Object(H.a)(r,i)},e.handledDownloadWalletConfigClick=function(){var t=e.props.test,a=t.name().split(" "),n="".concat(a[2].toLowerCase(),"-").concat(a[1][0]),r="# Coldcard Multisig setup file for test suite\n#\nName: ".concat(n,"\nPolicy: 2 of 2\nFormat: ").concat(t.params.format.includes("-")?"P2WSH-P2SH":t.params.format,"\nDerivation: ").concat(t.params.derivation,"\n\n");r+=t.params.extendedPublicKeys.map((function(e){return"".concat(e.rootFingerprint,": ").concat(e.base58String)})).join("\r\n"),r+="\r\n";var s="wc-".concat(n,".txt");Object(H.a)(r,s)},e.render=function(){var t=e.props,a=t.test,n=t.testRunIndex,r=t.status,s=t.keystore;return a?l.a.createElement(x.a,null,l.a.createElement(R.a,null,l.a.createElement(k.a,{title:a.name(),subheader:"Test ".concat(n+1)}),l.a.createElement(N.a,null,a.description(),e.renderInteractionMessages(),s.type===fn.COLDCARD&&!a.unsignedTransaction&&l.a.createElement(x.a,{align:"center"},l.a.createElement(Hn.a,{interaction:a.interaction(),onReceive:e.startParse,onStart:e.start,setError:e.reset,isTest:!0})),s.type===fn.COLDCARD&&a.unsignedTransaction&&l.a.createElement(x.a,{align:"center",style:{marginTop:"2em"}},l.a.createElement(Xn,{handlePSBTDownloadClick:e.handleDownloadPSBTClick,handleWalletConfigDownloadClick:e.handledDownloadWalletConfigClick}),l.a.createElement(Hn.b,{interaction:a.interaction(),onReceivePSBT:e.startParse,onStart:e.start,setError:e.reset,fileType:"PSBT",validFileFormats:".psbt"})),s.type===fn.HERMIT&&"request"===a.interaction().workflow[0]&&r===fn.PENDING&&l.a.createElement(x.a,{align:"center"},l.a.createElement(Un,{parts:a.interaction().request()})),s.type===fn.HERMIT&&!e.testComplete()&&l.a.createElement(x.a,null,l.a.createElement(Dn,{onStart:e.start,onSuccess:e.resolve,onClear:e.reset,interaction:a.interaction()})),r===fn.PENDING&&!Object.values(fn.INDIRECT_KEYSTORES).includes(s.type)&&l.a.createElement(x.a,{align:"center"},l.a.createElement(A.a,{variant:"contained",color:"primary",onClick:e.start},"Start Test")),e.testComplete()&&e.renderResult(),l.a.createElement(Gi,null)),l.a.createElement(M.a,null,r===fn.ACTIVE&&l.a.createElement(A.a,{disabled:!0},l.a.createElement(Ra.a,null),"\xa0 Running test..."),e.testComplete()&&l.a.createElement(A.a,{color:"secondary",onClick:e.reset},"Reset Test")))):l.a.createElement(x.a,null,l.a.createElement("p",null,"No test selected."))},e.testComplete=function(){var t=e.props.status;return t===to.a.SUCCESS||t===to.a.ERROR||t===to.a.FAILURE},e.renderInteractionMessages=function(){var t=e.props,a=t.status,n=t.test;return a===fn.PENDING||a===fn.ACTIVE?l.a.createElement(Nn,{excludeCodes:["hermit.command"],messages:n.interaction().messagesFor({state:a})}):null},e.renderResult=function(){var t=e.props,a=t.status,n=t.message;switch(a){case to.a.SUCCESS:return l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-success"},l.a.createElement(En.a,null),"\xa0 Test passed"));case to.a.FAILURE:return l.a.createElement(x.a,{mt:2},l.a.createElement(x.a,{align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-failure"},l.a.createElement(eo.a,null),"\xa0 Test failed")),n);case to.a.ERROR:return l.a.createElement(x.a,{mt:2},l.a.createElement(x.a,{align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-error"},l.a.createElement(hn.a,null),"\xa0 Test error")),n);default:return null}},e.start=Object(Q.a)(Z.a.mark((function t(){var a,n,r,s,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.test,r=a.keystore,s=a.testRunIndex,(0,a.startTestRun)(s),r.type!==fn.HERMIT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.run();case 6:i=t.sent,e.handleResult(i);case 8:case"end":return t.stop()}}),t)}))),e.startParse=function(){var t=Object(Q.a)(Z.a.mark((function t(a){var n,r,s,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.test,s=n.testRunIndex,(0,n.startTestRun)(s),t.next=4,r.runParse(a);case 4:i=t.sent,e.handleResult(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resolve=function(t){var a=e.props.test,n=a.resolve(a.postprocess(t));e.handleResult(n)},e.handleResult=function(t){var a=e.props,n=a.testRunIndex,r=a.endTestRun,s=a.setErrorNotification;t.status===to.a.ERROR&&s(t.message),r(n,t.status,e.formatMessage(t))},e.reset=function(){var t=e.props,a=t.testRunIndex;(0,t.resetTestRun)(a)},e.formatMessage=function(t){switch(t.status){case to.a.FAILURE:return l.a.createElement(x.a,null,l.a.createElement("dl",null,l.a.createElement("dt",null,"Expected:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.expected))),l.a.createElement("dt",null,"Actual:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.actual))),t.diff&&l.a.createElement("div",null,l.a.createElement("dt",null,"Diff:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},t.diff.map(e.formatDiffSegment))))));case to.a.ERROR:return l.a.createElement("code",null,t.message);default:return""}},e.formatOutput=function(e){switch(typeof e){case"object":return JSON.stringify(e);case"string":case"number":return e;default:return"Did not recognize output type"}},e.formatDiffSegment=function(t,a){return l.a.createElement("span",{key:a,className:"TestRun-diff-segment-".concat(e.diffSegmentClass(t))},t.value)},e.diffSegmentClass=function(e){return e.added?"added":e.removed?"removed":"common"},e}return a}(l.a.Component)),io=Object(V.a)(Object(V.a)({},o),r),oo=Object(m.b)((function(e,t){return Object(V.a)(Object(V.a)(Object(V.a)({},{keystore:e.keystore}),e.testSuiteRun.testRuns[t.testRunIndex]||{}),{testRunIndex:t.testRunIndex})}),io)(so);so.defaultProps={test:{unsignedTransaction:null,params:{}}};var co=oo,lo=$.TEST_FIXTURES.keys.open_source.bip39Phrase,uo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.keystore;return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{container:!0},l.a.createElement(C.a,{item:!0,md:3},l.a.createElement("ol",null,lo.slice(0,6).map(a.renderSeedWord))),l.a.createElement(C.a,{item:!0,md:3},l.a.createElement("ol",{start:7},lo.slice(6,12).map(a.renderSeedWord))),l.a.createElement(C.a,{item:!0,md:3},l.a.createElement("ol",{start:13},lo.slice(12,18).map(a.renderSeedWord))),l.a.createElement(C.a,{item:!0,md:3},l.a.createElement("ol",{start:19},lo.slice(18,24).map(a.renderSeedWord)))),e&&e.type===fn.COLDCARD&&l.a.createElement(C.a,{style:{marginTop:"2em",marginBottom:"2em"}},"If using the simulator, here's a handy command with the same seed phrase:",l.a.createElement("br",null),l.a.createElement("code",null,"./simulator.py --seed '",lo.join(" "),"'")))}}],[{key:"renderSeedWord",value:function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("code",null,e))}}]),a}(l.a.Component);uo.defaultProps={keystore:null};var po=Object(m.b)((function(){return{}}),{})(uo),mo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.currentTestIsActive=function(){var t=e.props.testSuiteRun;if(!t.started)return!1;var a=t.testRuns[t.currentTestRunIndex];return!!a&&a.status===fn.ACTIVE},e.handleKeyDown=function(t){if(e.props.testSuiteRun.started){if(e.currentTestIsActive())return;switch(t.keyCode){case 37:case 38:e.isFirstTest()||e.previousTest();break;case 39:case 40:e.isLastTest()||e.nextTest()}}else{if(32!==t.keyCode)return;var a=t.target.tagName.toLowerCase();if("textarea"===a||"input"===a)return;if(t.preventDefault(),e.startDisabled())return;e.start()}},e.render=function(){var t=e.props.testSuiteRun;return l.a.createElement(x.a,{mt:2},t.started&&l.a.createElement(x.a,{mt:2,mb:2},l.a.createElement(ka.a,{variant:"determinate",value:t.testRuns.filter((function(e){return e.status!==fn.PENDING&&e.status!==fn.ACTIVE})).length/t.testRuns.length*100})),l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(ro,null)),l.a.createElement(C.a,{item:!0,md:8},e.renderBody())))},e.renderSetup=function(){var t=e.props.keystore;return l.a.createElement(C.a,{container:!0,direction:"column",spacing:3},l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Choose Keystore"}),l.a.createElement(N.a,null,l.a.createElement(Yi,null),l.a.createElement(x.a,{align:"center",mt:2},l.a.createElement(A.a,{variant:"contained",color:"primary",disabled:e.startDisabled(),onClick:e.start,type:"submit"},"Begin Test Suite"))))),l.a.createElement(C.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Keystore Setup"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"Ensure your keystore has been initialized with the following seed:"),l.a.createElement(po,{keystore:t})))))},e.renderBody=function(){var t=e.props.testSuiteRun;return t.started?l.a.createElement(x.a,null,l.a.createElement(co,{isLastTest:e.isLastTest(),nextTest:e.nextTest,testRunIndex:t.currentTestRunIndex}),l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,justify:"space-between"},l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{disabled:e.isFirstTest()||e.currentTestIsActive(),onClick:e.previousTest},l.a.createElement(yi.a,null)," \xa0 Previous")),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{disabled:e.isLastTest()||e.currentTestIsActive(),onClick:e.nextTest},"Next \xa0 ",l.a.createElement(Si.a,null)))))):e.renderSetup()},e.start=function(){(0,e.props.startTestSuiteRun)()},e.startDisabled=function(){var t=e.props,a=t.testSuiteRun,n=t.keystore;return""===n.type||n.status===fn.ACTIVE||a.started||0===a.testRuns.length},e.isFirstTest=function(){return 0===e.props.testSuiteRun.currentTestRunIndex},e.isLastTest=function(){var t=e.props.testSuiteRun;return t.currentTestRunIndex===t.testRuns.length-1},e.previousTest=function(){var t=e.props,a=t.testSuiteRun,n=t.setCurrentTestRun;a.currentTestRunIndex<1||n(a.currentTestRunIndex-1)},e.nextTest=function(){var t=e.props,a=t.testSuiteRun,n=t.setCurrentTestRun;a.currentTestRunIndex!==a.testRuns.length-1&&n(a.currentTestRunIndex+1)},e}return a}(l.a.Component),Eo=Object(V.a)({},s),ho=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),Eo)(mo);var fo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).disabled=function(){},n.hasScriptError=function(){return""!==n.state.scriptError},n.hasFetchUTXOsError=function(){return""!==n.state.fetchUTXOsError},n.hasError=function(){return n.hasScriptError()||n.hasFetchUTXOsError()},n.scriptName=function(){switch(n.props.addressType){case $.P2SH:return"redeem";case $.P2SH_P2WSH:case $.P2WSH:return"witness";default:return null}},n.scriptTitle=function(){var e=n.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},n.handleScriptChange=function(e){var t=e.target.value,a="";(""===t&&(a="".concat(n.scriptTitle()," script cannot be blank.")),""===a&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(a="".concat(n.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===a)&&(""!==Object($.validateHex)(t)&&(a="".concat(n.scriptTitle()," script is not valid hex.")));if(""!==t&&""===a)try{n.generateMultisig(t)}catch(r){console.error(r),a="Failed to parse ".concat(n.scriptName()," script.")}n.setState({scriptHex:t,scriptError:a,fetchUTXOsError:"",fetchedUTXOs:!1})},n.generateMultisig=function(e){var t=n.props,a=t.network,r=t.addressType,s=n.state.scriptHex;return e&&(s=e),Object($.generateMultisigFromHex)(a,r,s)},n.renderDetails=function(){var e=n.state.fetchUTXOsError,t=n.props,a=t.chosePerformSpend,r=t.choseConfirmOwnership,s=t.client,i=n.generateMultisig(),o=a||r;return l.a.createElement("div",null,l.a.createElement(nn,{multisig:i}),l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",color:"primary",size:"large",onClick:n.performSpend,disabled:o},"Spend from this address")),l.a.createElement(C.a,{item:!0},l.a.createElement(A.a,{variant:"contained",size:"large",onClick:n.confirmOwnership,disabled:o},"Confirm ownership"))),l.a.createElement(ee.a,{error:!0},e)),"private"===s.type&&l.a.createElement(x.a,{mt:2},l.a.createElement(un,{addresses:[i.address],client:s})))},n.performSpend=Object(Q.a)(Z.a.mark((function e(){var t,a,r,s,i,o,c,l,u,d,p,m;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.setRequiredSigners,r=t.setTotalSigners,s=t.setInputs,i=t.setFrozen,o=t.choosePerformSpend,c=n.generateMultisig(),e.next=4,n.fetchUTXOs(c);case 4:(l=e.sent)?(u=l.utxos,d=l.balanceSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),n.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(m=u.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{multisig:c})})),s(m),a(Object($.multisigRequiredSigners)(c)),r(Object($.multisigTotalSigners)(c)),i(!0),o())):n.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}}),e)}))),n.fetchUTXOs=function(){var e=Object(Q.a)(Z.a.mark((function e(t){var a,r,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.network,s=a.client,e.next=3,Pe(t.address,r,s);case 3:if(!((i=e.sent)&&i.utxos&&i.utxos.length)){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.confirmOwnership=function(){var e=n.props,t=e.chooseConfirmOwnership,a=e.setOwnershipMultisig,r=e.setFrozen;a(n.generateMultisig()),t(),r(!0)},n.state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,n=e.fetchedUTXOs;return l.a.createElement(R.a,null,l.a.createElement(k.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),l.a.createElement(N.a,null,l.a.createElement("form",null,l.a.createElement(Rt.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:n&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?l.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),a}(l.a.Component);var bo={choosePerformSpend:function(){return{type:"CHOOSE_PERFORM_SPEND"}},setInputs:$e,setTotalSigners:function(e){return{type:"SET_TOTAL_SIGNERS",value:e}},setRequiredSigners:Qe,chooseConfirmOwnership:function(){return{type:"CHOOSE_CONFIRM_OWNERSHIP"}},setOwnershipMultisig:function(e){return{type:"SET_OWNERSHIP_MULTISIG",value:e}},setFrozen:Xt},vo=Object(m.b)((function(e){return Object(V.a)(Object(V.a)(Object(V.a)({},e.settings),{client:e.client}),{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})}),bo)(fo),go=a(854),yo=a.n(go),So=a(855),Po=a.n(So),To=a(432),Oo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).titleRef=l.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.handleMethodChange=function(e){(0,n.props.setMethod)(e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){(0,n.props.reset)()},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props.setBIP32Path,i=Object($.validateBIP32Path)(e,r);s(e),i?a(i):(a(""),t())},n.validateAndSetPublicKey=function(e,t,a){var r=n.props.setPublicKey,s=Object($.validatePublicKey)(e);r(e),s?t&&t(s):(t&&t(""),a&&a())},n.renderConfirmation=function(){var e=n.props,t=e.publicKeys,a=e.publicKeyImporter;if(""===a.publicKey)return null;if(t.includes(a.publicKey)){var r=Object(To.a)(K.a)({color:"green"});return l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(r,null,l.a.createElement(yo.a,null)),l.a.createElement(D.a,null,"The public key exported at BIP32 path"," ",l.a.createElement("code",null,a.bip32Path)," is present in the provided redeem script.")))}return l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(K.a,null,l.a.createElement(j.a,{color:"error"},l.a.createElement(Po.a,null))),l.a.createElement(D.a,null,"The public key exported at BIP32 path"," ",l.a.createElement("code",null,a.bip32Path)," is not present in the provided redeem script.")))},n.renderImportByMethod=function(){var e=n.props,t=e.network,a=e.publicKeyImporter,r=e.defaultBIP32Path;return a.method===fn.TREZOR||a.method===fn.LEDGER?l.a.createElement(Ei,{network:t,publicKeyImporter:a,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:r,validateAndSetPublicKey:n.validateAndSetPublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.state={disableChangeMethod:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod,a="public-key-importer-select-label",n="".concat(a,"-select");return l.a.createElement(R.a,null,l.a.createElement(k.a,{ref:this.titleRef,title:"Confirm Ownership"}),l.a.createElement(N.a,null,l.a.createElement("form",null,l.a.createElement("p",null,"How will you confirm your ownership of this address?"),l.a.createElement(Ut.a,{fullWidth:!0},l.a.createElement(dn.a,{id:a},"Select Method"),l.a.createElement(pn.a,{labelId:n,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},l.a.createElement(mn.a,{value:""},"< Select method >"),l.a.createElement(mn.a,{value:fn.TREZOR},"Trezor"),l.a.createElement(mn.a,{value:fn.LEDGER},"Ledger"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&l.a.createElement(A.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),a}(l.a.Component);var Io={setMethod:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_METHOD",value:e}},setBIP32Path:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",value:e}},setPublicKey:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",value:e}},resetBIP32Path:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH"}},reset:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER"}}},wo=Object(m.b)((function(e){return e.spend.ownership}),Io)(Oo),xo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){return l.a.createElement(x.a,{mt:2},l.a.createElement(C.a,{container:!0,spacing:3},l.a.createElement(C.a,{item:!0,md:8},l.a.createElement(x.a,null,l.a.createElement(vo,null)),e.renderBody()),l.a.createElement(C.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(ra,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Jt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pa,null)))))},e.renderBody=function(){var t=e.props,a=t.transaction;return t.ownership.chosen?l.a.createElement(x.a,{mt:2},l.a.createElement(wo,null)):l.a.createElement(x.a,null,e.spendable()&&l.a.createElement(x.a,null,l.a.createElement(x.a,{mt:2},l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(en,{inputs:a.inputs,inputsTotalSats:a.inputsTotalSats})))),l.a.createElement(x.a,{mt:2},l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"h5"},"Define Outputs"),l.a.createElement(Vr,null))))),a.finalizedOutputs&&l.a.createElement("div",null,l.a.createElement(x.a,{mt:2},l.a.createElement(es,null)),l.a.createElement(x.a,{mt:2},e.renderSignatureImporters())),e.signaturesFinalized()&&l.a.createElement(x.a,{mt:2},l.a.createElement(Qr,null)))},e.renderSignatureImporters=function(){for(var t=e.props.transaction,a=[],n=1;n<=t.requiredSigners;n+=1)a.push(l.a.createElement(x.a,{key:n,mt:2},l.a.createElement($n,{number:n})));return a},e.spendable=function(){return e.props.transaction.inputs.length>0},e.signaturesFinalized=function(){var t=e.props.signatureImporters;return Object.values(t).length>0&&Object.values(t).every((function(e){return e.finalized}))},e.confirmOwnership=function(t){e.setState({addressFinalized:!0,confirmOwnership:t})},e}return a}(l.a.Component);var jo=Object(m.b)((function(e){return e.spend}))(xo),Co=a(742),Ro=a(856),ko=a.n(Ro),No=Object(wt.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},menuItem:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingX:e.spacing(3)},menuLink:{color:"inherit",textDecoration:"none"}}})),Ao=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.href,a=e.title,n=e.classes,r=e.handleClose;return l.a.createElement("a",{href:t,className:n.menuLink},l.a.createElement(mn.a,{className:n.menuItem,onClick:r},a))}}]),a}(l.a.Component),_o=function(){var e=No(),t=l.a.useState(null),a=Object(ae.a)(t,2),n=a[0],r=a[1];return l.a.createElement("div",{className:e.root},l.a.createElement(Ha.a,{position:"static"},l.a.createElement(Co.a,null,l.a.createElement(j.a,{variant:"h6",className:e.title},l.a.createElement(A.a,{color:"inherit",href:"#/"},"Caravan")),l.a.createElement(A.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){r(e.currentTarget)}},l.a.createElement(x.a,{mr:3},l.a.createElement(j.a,null,"Menu")),l.a.createElement(ko.a,null)),l.a.createElement(Pr.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){return r(null)}},[{href:"#/wallet",title:"Wallet"},{href:"#/address",title:"Create Address"},{href:"#/script",title:"Script Explorer"},{href:"#/test",title:"Test Suite"},{href:"#/help",title:"Help"}].map((function(t){var a=t.href,n=t.title;return l.a.createElement(Ao,{href:a,title:n,classes:e,key:a,handleClose:function(){return r(null)}})}))))))},Bo=a(857),Ko=a(1301),Do=function(){return l.a.createElement(x.a,{mt:2},l.a.createElement("hr",null),l.a.createElement(C.a,{container:!0,justify:"space-between",alignItems:"center"},l.a.createElement(C.a,{item:!0,sm:2},Object(H.b)("https://www.unchained-capital.com",l.a.createElement("img",{src:Ko,className:"logo",alt:"Unchained Capital logo",height:"32"}))),l.a.createElement(C.a,{item:!0,sm:6},l.a.createElement("p",null,"Copyright\xa0",new Date(Date.now()).getFullYear()," by Unchained Capital and released under an MIT license.")),l.a.createElement(C.a,{item:!0,sm:1,align:"right"},l.a.createElement("p",null," v",Bo.a," "))))},Mo=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(v.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.error,n=t.errorInfo;return n?l.a.createElement(x.a,{m:4},l.a.createElement(x.a,{m:2},l.a.createElement(j.a,{variant:"h3",component:"h1"},"Something went wrong.")),l.a.createElement(x.a,{m:2},l.a.createElement(j.a,{variant:"body1"},"Let us know what happened on"," ",l.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank",rel:"noopener noreferrer"},"github"),".")),l.a.createElement(x.a,{mx:2,my:3},l.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},a&&a.toString(),l.a.createElement("br",null),n.componentStack))):e}}]),a}(l.a.Component),Uo=a(659),Lo=a(1423),Fo={clearErrorNotification:ft},zo=Object(m.b)((function(e){return e.errorNotification}),Fo)((function(e){var t=e.open,a=e.message,n=e.clearErrorNotification;return l.a.createElement(Uo.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:n,ContentProps:{"aria-describedby":"error-notification"},message:l.a.createElement("span",{id:"error-notification"},a),action:[l.a.createElement(kt.a,{key:"close","aria-label":"close",color:"inherit",onClick:n},l.a.createElement(Lo.a,null))]})})),Wo=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(O.a,null),l.a.createElement(w.SnackbarProvider,{maxSnack:3},l.a.createElement(I.a,{maxWidth:"lg"},l.a.createElement(_o,null),l.a.createElement(Mo,null,l.a.createElement(P.a,null,l.a.createElement(T.d,null,l.a.createElement(T.b,{path:"/test",component:ho}),l.a.createElement(T.b,{path:"/address",component:gi}),l.a.createElement(T.a,{from:"/spend",to:"/script"}),l.a.createElement(T.b,{path:"/script",component:jo}),l.a.createElement(T.b,{path:"/wallet",component:Zs}),l.a.createElement(T.b,{path:"/help",component:Y}),l.a.createElement(T.b,{path:"/",component:Y}))),l.a.createElement(zo,null)),l.a.createElement(Do,null))))},Go=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).history=Object(S.a)(),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.resetApp;this.unlisten=this.history.listen((function(){e()}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return l.a.createElement(Wo,null)}}]),a}(c.Component);var qo=Object(m.b)(null,(function(e){return{resetApp:function(){return e({type:"RESET_APP_STATE"})}}}))(Go),Ho=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Xo(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Yo=function(e,t){return Object(V.a)(Object(V.a)({},e),t)},Vo={network:$.MAINNET,totalSigners:3,requiredSigners:2,addressType:$.P2SH,startingAddressIndex:0,frozen:!1},Jo={type:"public",url:"",username:"",password:"",urlError:"",usernameError:"",passwordError:"",status:"unknown"},Zo={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new re.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Qo={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new re.a(0),spendingSats:new re.a(0),nextNode:null};function $o(e,t){var a=Object(V.a)(Object(V.a)(Object(V.a)({},Zo),e.nodes[t.value.bip32Path]||{}),t.value),n={};n[a.bip32Path]=a;var r=Object(V.a)(Object(V.a)({},e),{nodes:Object(V.a)(Object(V.a)({},e.nodes),n)});if("undefined"!==typeof t.value.spend&&(r.spendingSats=t.value.spend?e.spendingSats.plus(a.balanceSats):e.spendingSats.minus(a.balanceSats)),t.value.balanceSats){var s=e.nodes[a.bip32Path]?e.nodes[a.bip32Path].balanceSats:re()(0);r.balanceSats=e.balanceSats.plus(a.balanceSats.minus(s))}var i=0,o=0,c=Object.keys(r.nodes);c.sort((function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2],10)-parseInt(n[2],10)}));for(var l=!1,u=0;u<c.length;u+=1){var d=c[c.length-(u+1)],p=r.nodes[d];p.fetchedUTXOs&&(!p.balanceSats.isEqualTo(0)||p.addressUsed||l?l=!0:i+=1),""!==p.fetchUTXOsError&&(o+=1)}return r.trailingEmptyNodes=i,r.fetchUTXOsErrors=o,r.nextNode=function(e){for(var t=Object.values(e.nodes),a=0;a<t.length;a+=1){var n=t[a];if(n.balanceSats.isEqualTo(0)&&!n.addressUsed)return n}return null}(r),r}function ec(e){var t=Object(V.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend=!1})),t}var tc=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qo,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"RESET_NODES_SPEND":return ec(t);case"RESET_NODES_FETCH_ERRORS":return Yo(t,{fetchUTXOsErrors:0,nodes:Object.values(t.nodes).reduce((function(e,t){var a=e;return a[t.bip32Path]=Object(V.a)(Object(V.a)({},t),{},{fetchUTXOsError:""}),a}),{})});case e:return $o(t,a);default:return t}}};function ac(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map((function(e){return e.extendedPublicKey})).join("");return"".concat(t,"-").concat(a)}var nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object($.multisigBIP32Root)($.P2SH,$.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",rootXfp:"",finalized:!1,conflict:!1}};function rc(){return{extendedPublicKeyImporters:Object(te.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(V.a)(Object(V.a)({},e),{},{[t]:nc("Extended Public Key ".concat(t))})}),{}),defaultBIP32Path:Object($.multisigBIP32Root)($.P2SH,$.MAINNET),network:$.MAINNET,addressType:$.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0}}function sc(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function ic(e,t,a){var n={};n[a]=t.value;var r=Object(V.a)(Object(V.a)({},e),{nodes:{}});return r.extendedPublicKeyImporters[t.number]=Yo(e.extendedPublicKeyImporters[t.number],n),Object.values(r.extendedPublicKeyImporters).reduce((function(e,t){return e+t.finalized}),0)===Object.keys(r.extendedPublicKeyImporters).length&&"finalized"===a&&Object.values(r.extendedPublicKeyImporters).every((function(e){return!e.conflict}))&&(r.configuring=!1),sc(r.extendedPublicKeyImporters[t.number],e),Yo(r,{fingerprint:ac(r)})}function oc(e,t){for(var a=t.value,n={},r=1;r<=a;r+=1)n[r]=e.extendedPublicKeyImporters[r]||nc("Extended Public Key ".concat(r));var s=0;return Object.keys(n).forEach((function(e){n[e].finalized&&(s+=1)})),Object(V.a)(Object(V.a)({},e),{},{configuring:s<a},{extendedPublicKeyImporters:n})}function cc(e,t,a){for(var n=1;n<=Object.values(e.extendedPublicKeyImporters).length;n+=1){var r=t.extendedPublicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),sc(r,t)}}function lc(e,t){var a=e.addressType,n=t.value,r=Object($.multisigBIP32Root)(a,n),s=Object(V.a)(Object(V.a)({},e),{network:n,defaultBIP32Path:r});return cc(e,s,r),s}function uc(e,t){var a=t.value,n=e.network,r=Object($.multisigBIP32Root)(a,n),s=Object(V.a)(Object(V.a)({},e),{addressType:a,defaultBIP32Path:r});return cc(e,s,r),s}function dc(e,t){var a=Object(V.a)({},e);if(!0===t.value&&""===e.finalizedNetwork)a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.extendedPublicKeyImporters).reduce((function(e,t){return!0===t.finalized?e+1:e}),0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.extendedPublicKeyImporters).forEach((function(e){return e.conflict=!1})))}return a}function pc(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map((function(e){return e.publicKey})).join("");return"".concat(t,"-").concat(a)}var mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object($.multisigBIP32Path)($.P2SH,$.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1}};function Ec(){return{publicKeyImporters:Object(te.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(V.a)(Object(V.a)({},e),{},{[t]:mc("Public Key ".concat(t))})}),{}),defaultBIP32Path:Object($.multisigBIP32Path)($.P2SH,$.MAINNET),network:$.MAINNET,addressType:$.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""}}function hc(e,t){if(1===t.number)return e;var a=Object(V.a)({},e),n=e.publicKeyImporters[t.number-1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=r,a.publicKeyImporters[t.number]=n,Yo(a,{fingerprint:pc(a)})}function fc(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(V.a)({},e),n=e.publicKeyImporters[t.number+1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=r,a.publicKeyImporters[t.number]=n,Yo(a,{fingerprint:pc(a)})}function bc(e){for(var t=Object.values(e.publicKeyImporters),a=t.map((function(e){return e.publicKey})).sort().map((function(e){return t.find((function(t){return t.publicKey===e}))})),n={},r=1;r<=a.length;r+=1)n[r]=a[r-1];var s=Object(V.a)(Object(V.a)({},e),{publicKeyImporters:n});return Yo(s,{fingerprint:pc(s)})}function vc(e,t){if(t.finalizedNetwork){var a=Object(V.a)({},t.publicKeyImporters);return a[e].conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType,Yo(t,{publicKeyImporters:a})}return t}function gc(e,t,a){var n={};n[a]=t.value;var r=Object(V.a)({},e);return r.publicKeyImporters[t.number]=Yo(e.publicKeyImporters[t.number],n),r=vc(t.number,e),Yo(r,{fingerprint:pc(r)})}function yc(e,t){for(var a=t.value,n={},r=1;r<=a;r+=1)n[r]=e.publicKeyImporters[r]||Object(V.a)(Object(V.a)({},mc()),{name:"Public Key ".concat(r)});var s=Object(V.a)(Object(V.a)({},e),{publicKeyImporters:n,stub:t.type});return Yo(s,{fingerprint:pc(s)})}function Sc(e,t){for(var a=Object(V.a)({},e),n=1;n<=Object.values(e.publicKeyImporters).length;n+=1){var r=a.publicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=t),a=vc(n,a)}return a}function Pc(e,t){var a=t.value,n=e.addressType,r=Object($.multisigBIP32Path)(n,a),s=Object(V.a)(Object(V.a)({},e),{network:a,defaultBIP32Path:r});return s=Sc(s,r)}function Tc(e,t){var a=e.network,n=t.value,r=Object($.multisigBIP32Path)(n,a),s=Object(V.a)(Object(V.a)({},e),{addressType:n,defaultBIP32Path:r});return s=Sc(s,r)}function Oc(e,t){var a=Object(V.a)({},e);if(!0===t.value&&""===e.finalizedNetwork&&"text"!==a.publicKeyImporters[t.number].method)a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.publicKeyImporters).reduce((function(e,t){return!0===t.finalized&&"text"!==t.method?e+1:e}),0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach((function(e){return e.conflict=!1})))}return a}var Ic={walletMode:bt,walletName:"My Multisig Wallet",nodesLoaded:!1};function wc(e){return Yo(e,{walletMode:bt})}var xc={chosen:!1,publicKeyImporter:Object(V.a)({},{bip32Path:"",method:"",publicKey:""}),network:$.MAINNET,addressType:$.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object($.multisigBIP32Path)($.P2SH,$.MAINNET)};function jc(e,t,a){var n={};return n[a]=t.value,Object(V.a)(Object(V.a)({},e),{publicKeyImporter:Object(V.a)(Object(V.a)({},e.publicKeyImporter),n)})}function Cc(e,t){var a=t.value,n=Object($.multisigAddressType)(a),r=Object($.multisigBIP32Path)(n,e.network);return Object(V.a)(Object(V.a)({},e),{network:e.network,addressType:n,publicKeys:Object($.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:r})}var Rc={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},kc={};function Nc(e,t){for(var a={},n=1;n<=t.value;n+=1)a[n]=Object(V.a)(Object(V.a)({},Rc),{name:"Signature ".concat(n)});return a}function Ac(e,t,a){var n={};n[a]=t.value;var r=Object(V.a)({},e);return r[t.number]=Yo(e[t.number],n),r}function _c(e,t){var a=Object(V.a)({},e);return a[t.number]=Yo(e[t.number],t.value),a}function Bc(e,t){var a=e.txid.toLowerCase(),n=t.txid.toLowerCase();return a<n?-1:a>n?1:e.n<t.n?-1:e.n>t.n?1:0}var Kc=function(){return{chosen:!1,network:$.MAINNET,inputs:[],inputsTotalSats:new re.a(0),outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:$.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1,autoSpend:!0,changeAddress:"",updatesComplete:!0,signingKeys:[0,0],spendingStep:0}};function Dc(e,t){var a=t.value.reduce((function(e,t){return e.plus(t.amountSats)}),new re.a(0));return Yo(e,{inputs:t.value.sort(Bc),inputsTotalSats:a})}function Mc(e,t,a){return Object($.satoshisToBitcoins)(Object($.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toFixed(8).toString()}function Uc(e,t){for(var a=Object(V.a)({},e),n=[],r=0;r<a.outputs.length;r+=1)r!==t.number-1?n.push(a.outputs[r]):t.number===a.changeOutputIndex&&(a.changeOutputIndex=0),t.number<a.changeOutputIndex&&(a.changeOutputIndex-=1);return Object(V.a)(Object(V.a)({},a),{outputs:n,fee:Mc(a,a.feeRate,n.length)})}function Lc(e,t){var a=t.value,n=Object($.validateFeeRate)(a),r=""===n?Mc(e,a,e.outputs.length):"";return Yo(e,{feeRate:a,feeRateError:n,fee:r,feeError:""})}function Fc(e,t){var a=t.value,n=Object($.bitcoinsToSatoshis)(a),r=Object($.validateFee)(n,e.inputsTotalSats);return Yo(e,{fee:a,feeError:r,feeRateError:""})}function zc(e){var t=e.outputs.concat({address:"",amount:"",amountSats:"",addressError:"",amountError:""});return Object(V.a)(Object(V.a)({},e),{outputs:t,fee:Mc(e,e.feeRate,t.length)})}function Wc(e,t){var a=Object(te.a)(e.outputs),n=t.value,r=Object($.validateAddress)(n,e.network);if(""===r)for(var s=0;s<e.inputs.length;s+=1){var i=e.inputs[s];if(i.multisig&&n===i.multisig.address){r="Output address cannot equal input address.";break}}if(""===r)for(var o=0;o<e.outputs.length;o+=1)if(o!==t.number-1&&e.outputs[o].address===n){r="Duplicate output address.";break}return a[t.number-1].address=n,a[t.number-1].addressError=r,Object(V.a)(Object(V.a)({},e),{outputs:a})}function Gc(e,t){var a=Object(te.a)(e.outputs);return a[t.number-1].multisig=t.value,Object(V.a)(Object(V.a)({},e),{outputs:a})}function qc(e,t){var a=Object(te.a)(e.outputs),n=t.value,r=Object($.bitcoinsToSatoshis)(re()(n)),s=Object($.validateOutputAmount)(r,e.inputsTotalSats);e.isWallet&&"Total input amount must be positive."===s&&(s=""),e.isWallet&&"Output amount is too large."===s&&(s="");var i=re()(n).dp();return i>8&&(n=n.slice(0,8-i)),a[t.number-1].amount=n,a[t.number-1].amountError=s,a[t.number-1].amountSats=s?"":r,Object(V.a)(Object(V.a)({},e),{outputs:a})}function Hc(e,t){var a;try{var n=Object($.unsignedMultisigPSBT)(e.network,e.inputs,e.outputs);a=Object($.unsignedTransactionObjectFromPSBT)(n)}catch(r){a=Object($.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs)}return Object(V.a)(Object(V.a)({},e),{finalizedOutputs:t.value,unsignedTransaction:a})}function Xc(e,t){return Yo(e,{requiredSigners:t.value,signingKeys:Array(t.value).fill(0)})}function Yc(e,t){var a=Object(te.a)(e.signingKeys);return a[t.number-1]=t.value,Yo(e,{signingKeys:a})}function Vc(e){return Yo(e,{outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],fee:"",balanceError:"",changeOutputIndex:0})}function Jc(e){var t=Yo(e,Object(V.a)(Object(V.a)({},Kc()),{},{totalSigners:e.totalSigners,network:e.network,addressType:e.addressType,isWallet:e.isWallet,changeAddress:e.changeAddress}));return t=Vc(t=Xc(t,{value:e.requiredSigners}))}function Zc(e){var t=Object(V.a)({},e);if(t.outputs.find((function(e){return""!==e.addressError||""!==e.amountError}))||""!==t.feeError||""!==t.feeRateError||0===t.inputs.length)return Object(V.a)(Object(V.a)({},t),{},{balanceError:""});var a=Object($.bitcoinsToSatoshis)(new re.a(t.fee)),n=function(e){return e.outputs.reduce((function(e,t){var a=t.amount;return e.plus(Object($.bitcoinsToSatoshis)(new re.a(a||0)))}),new re.a(0))}(t);if(!t.inputsTotalSats.isEqualTo(n.plus(a))){var r,s=n.plus(a).minus(t.inputsTotalSats);if(s.isNaN())r="Cannot calculate total.";else{t=Yo(t,{updatesComplete:!0});var i=s.isLessThan(0)?"Increase":"Decrease";r="".concat(i," by ").concat(Object($.satoshisToBitcoins)(s.absoluteValue()).toFixed(8),".")}return Object(V.a)(Object(V.a)({},t),{},{balanceError:r})}var o=new re.a(Mc(t,"1",0));return new re.a(t.fee).isLessThan(o)?Object(V.a)(Object(V.a)({},t),{},{balanceError:"Fee is too small. Should be no less than ".concat(Object($.bitcoinsToSatoshis)(o)," satoshis.")}):Object(V.a)(Object(V.a)({},t),{},{balanceError:""})}var Qc={type:"",version:"",note:"",status:fn.PENDING},$c=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," public key at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return l.a.createElement("p",null,"Export a public key at BIP32 path",l.a.createElement("code",null,this.params.bip32Path),".")}},{key:"interaction",value:function(){return Object(fn.ExportPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=$.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.pub,a=e.rootFingerprint;return this.params.keystore===fn.HERMIT?t:{publicKey:t,rootFingerprint:a}}}]),a}(to.a),el=function(e){switch(e){case fn.COLDCARD:return[new $c({keystore:e,network:$.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new $c({keystore:e,network:$.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new $c({keystore:e,network:$.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new $c({keystore:e,network:$.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})];default:return[new $c({keystore:e,network:$.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new $c({keystore:e,network:$.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new $c({keystore:e,network:$.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new $c({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new $c({keystore:e,network:$.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new $c({keystore:e,network:$.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})]}},tl=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," xpub at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return l.a.createElement("p",null,"Export an extended public key at BIP32 path"," ",l.a.createElement("code",null,this.params.bip32Path))}},{key:"interaction",value:function(){return Object(fn.ExportExtendedPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=$.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.xpub,a=e.tpub,n=e.rootFingerprint;return this.params.keystore===fn.HERMIT?{xpub:t,bip32Path:this.params.bip32Path,rootFingerprint:n}:this.params.network===$.MAINNET||this.params.keystore===fn.TREZOR?{xpub:t,rootFingerprint:n}:this.params.keystore===fn.LEDGER||this.params.keystore===fn.COLDCARD?{xpub:a,rootFingerprint:n}:{tpub:a,rootFingerprint:n}}}]),a}(to.a),al=function(e){switch(e){case fn.COLDCARD:return[new tl({keystore:e,network:$.TESTNET,bip32Path:"m/45'/1/0"}),new tl({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0/0"})];case fn.LEDGER:case fn.TREZOR:default:return[new tl({keystore:e,network:$.TESTNET,bip32Path:"m/45'/0'/0'"}),new tl({keystore:e,network:$.TESTNET,bip32Path:"m/45'/0'/0'/0"}),new tl({keystore:e,network:$.TESTNET,bip32Path:"m/45'/0'/0'/0/0"}),new tl({keystore:e,network:$.TESTNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"}),new tl({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0'/0'"}),new tl({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new tl({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new tl({keystore:e,network:$.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})]}},nl=a(132),rl=el(fn.TREZOR).concat(al(fn.TREZOR)).concat(Object(nl.a)(fn.TREZOR)),sl=el(fn.LEDGER).concat(al(fn.LEDGER)).concat(Object(nl.a)(fn.LEDGER)),il=Object(nl.a)(fn.LEDGER,!0),ol=Object(nl.a)(fn.TREZOR,!0),cl=al(fn.HERMIT).concat(Object(nl.a)(fn.HERMIT,!0,!0)),ll=el(fn.COLDCARD).concat(al(fn.COLDCARD)).concat(Object(nl.a)(fn.COLDCARD)),ul={};ul[fn.TREZOR]=rl,ul[fn.LEDGER]=sl,ul.ledgerPSBT=il,ul.trezorPSBT=ol,ul[fn.HERMIT]=cl,ul[fn.COLDCARD]=ll;$.TEST_FIXTURES.bip39Phrase;var dl={startedAt:"",endedAt:"",status:fn.PENDING,message:"",note:""},pl={started:!1,startedAt:"",endedAt:"",testRuns:[],currentTestRunIndex:-1},ml=function(e){return""===e.keystoreType?[]:(ul[e.keystoreType]||[]).map((function(e){return Object(V.a)(Object(V.a)({},dl),{test:e})}))},El=function(e,t,a){return Object(V.a)(Object(V.a)({},e),{testRuns:e.testRuns.map((function(e,n){return n===t?Object(V.a)(Object(V.a)({},e),a):e}))})},hl={message:"",open:!1},fl=Object(p.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xc,t=arguments.length>1?arguments[1]:void 0,a=jc(e,{value:""},"publicKey");switch(t.type){case"CHOOSE_CONFIRM_OWNERSHIP":return Yo(e,{chosen:!0});case"SET_NETWORK":return Yo(e,{network:t.value});case"SET_OWNERSHIP_MULTISIG":return Cc(e,t);case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return jc(a,t,"bip32Path");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return jc(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return jc(e,t,"publicKey");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return jc(e,{value:e.defaultBIP32Path},"bip32Path");case"RESET_PUBLIC_KEY_IMPORTER":return Object(V.a)(Object(V.a)({},e),{publicKeyImporter:Object(V.a)(Object(V.a)({},e.publicKeyImporter),{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kc(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOOSE_PERFORM_SPEND":return Yo(e,{chosen:!0});case"SET_NETWORK":return Yo(e,{network:t.value});case"SET_ADDRESS_TYPE":return Yo(e,{addressType:t.value});case"SET_REQUIRED_SIGNERS":return Xc(e,t);case"SET_TOTAL_SIGNERS":return Yo(e,{totalSigners:t.value});case"SET_INPUTS":return Zc(Dc(e,t));case"ADD_OUTPUT":return Zc(zc(e));case"SET_CHANGE_OUTPUT_INDEX":return Yo(e,{changeOutputIndex:t.value});case"SET_CHANGE_OUTPUT_MULTISIG":return Gc(e,t);case"SET_OUTPUT_ADDRESS":return Zc(Wc(e,t));case"SET_OUTPUT_AMOUNT":return Zc(qc(e,t));case"DELETE_OUTPUT":return Zc(Uc(e,t));case"SET_FEE_RATE":return Zc(Lc(e,t));case"SET_FEE":return Zc(Fc(e,t));case"FINALIZE_OUTPUTS":return Hc(e,t);case"RESET_OUTPUTS":return Vc(e);case"SET_TXID":return Yo(e,{txid:t.value});case"SET_IS_WALLET":return Yo(e,{isWallet:!0});case"RESET_TRANSACTION":return Jc(e);case"UPDATE_AUTO_SPEND":return Yo(e,{autoSpend:t.value});case"SET_SIGNING_KEY":return Yc(e,t);case"SET_CHANGE_ADDRESS":return Yo(e,{changeAddress:t.value});case"RESET_NODES_SPEND":return Dc(e,{value:[]});case"SET_BALANCE_ERROR":return Yo(e,{balanceError:t.value});case"SET_SPEND_STEP":return Yo(e,{spendingStep:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_TRANSACTION":return Object(V.a)({},kc);case"SET_REQUIRED_SIGNERS":return Nc(0,t);case"SET_SIGNATURE_IMPORTER_NAME":return Ac(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Ac(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Ac(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Ac(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Ac(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Ac(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return _c(e,t);default:return e}}}),bl=Object(p.c)({deposits:tc("UPDATE_DEPOSIT_SLICE"),change:tc("UPDATE_CHANGE_SLICE"),common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ic,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WALLET_MODE":return Yo(e,{walletMode:t.value});case"UPDATE_WALLET_NAME":return Yo(e,{walletName:t.value});case"RESET_WALLET_VIEW":return wc(e);case"INITIAL_LOAD_COMPLETE":return Yo(e,{nodesLoaded:!0});default:return e}}}),vl=Object(p.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return Yo(e,{network:t.value});case"SET_TOTAL_SIGNERS":return Yo(e,{totalSigners:t.value});case"SET_REQUIRED_SIGNERS":return Yo(e,{requiredSigners:t.value});case"SET_STARTING_ADDRESS_INDEX":return Yo(e,{startingAddressIndex:t.value});case"SET_ADDRESS_TYPE":return Yo(e,{addressType:t.value});case"SET_FROZEN":return Yo(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Yo(e,{type:t.value});case"SET_CLIENT_URL":return Yo(e,{url:t.value});case"SET_CLIENT_USERNAME":return Yo(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Yo(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Yo(e,{urlError:t.value});case"SET_CLIENT_USERNAME_ERROR":return Yo(e,{usernameError:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Yo(e,{passwordError:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ec(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return Pc(e,t);case"SET_ADDRESS_TYPE":return Tc(e,t);case"SET_TOTAL_SIGNERS":return yc(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return gc(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return gc(gc(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return gc(gc(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return gc(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return gc(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return gc(Oc(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return hc(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return fc(e,t);case"SORT_PUBLIC_KEY_IMPORTERS":return bc(e);case"UPDATE_MULTISIG_ADDRESS":return Yo(e,{address:t.value});default:return e}},spend:fl,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rc(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return lc(e,t);case"SET_ADDRESS_TYPE":return uc(e,t);case"SET_TOTAL_SIGNERS":return oc(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return ic(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return ic(ic(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return ic(ic(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return ic(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return ic(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT":return ic(e,t,"rootXfp");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return ic(dc(e,t),t,"finalized");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE":return Object(V.a)(Object(V.a)({},e),{configuring:t.value});default:return e}},wallet:bl,testSuiteRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wi:return Object(V.a)(Object(V.a)({},e),{testRuns:ml(t)});case Pi:return Object(V.a)(Object(V.a)({},e),{started:!0,startedAt:qn()(),currentTestRunIndex:0});case Ti:return Object(V.a)(Object(V.a)({},e),{currentTestRunIndex:t.value});case Ni:return El(e,t.testRunIndex,{startedAt:qn()(),status:fn.ACTIVE});case Ai:return El(e,t.testRunIndex,{endedAt:qn()(),status:t.status,message:t.message});case _i:return El(e,t.testRunIndex,dl);case Bi:return El(e,t.testRunIndex,{note:t.note});default:return e}},keystore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wi:return Object(V.a)(Object(V.a)({},e),{type:t.keystoreType,version:t.version});case xi:return Object(V.a)(Object(V.a)({},e),{note:t.value});case ji:return Object(V.a)(Object(V.a)({},e),{status:t.value});default:return e}},errorNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(V.a)(Object(V.a)({},e),{open:!0,message:t.value});case Et:return Object(V.a)(Object(V.a)({},e),{open:!1,message:""});default:return e}}}),gl=function(e,t){var a=e;return"RESET_WALLET"!==t.type&&"RESET_APP_STATE"!==t.type||(a=void 0),vl(a,t)},yl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,Sl=Object(p.e)(gl,yl(Object(p.a)(h.a,f.a)));d.a.render(l.a.createElement(m.a,{store:Sl},l.a.createElement(qo,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/caravan","/service-worker.js");Ho?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Xo(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Xo(e)}))}}()},192:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(26),r=a.n(n),s=a(5),i=546,o=Object(s.satoshisToBitcoins)(r()(i)),c="/1",l="m"+c},32:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return p}));var n=a(2),r=a(26),s=a.n(r),i=a(353),o=a(192),c=a(0),l=a.n(c),u=function(e,t){return l.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)};function d(e,t){var a=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function p(e){var t,a=e.slices,r=e.outputs,c=a.reduce((function(e,t){var a=e.count,n=e.balance;return{count:a+t.utxos.length,balance:t.balanceSats.plus(n)}}),{count:0,balance:new s.a(0)}),l=c.count,u=c.balance,d=r.reduce((function(e,t){return e.plus(t.amountSats)}),new s.a(0)),p=[],m=new s.a(0),E=function(e){var t=Object(n.a)(Object(n.a)({},e),{},{numOutputs:e.outputs.length}),a=Object(i.estimateMultisigTransactionFee)(t).toNumber(),r=t.outputs.reduce((function(e,t){return e.plus(t.amountSats)}),new s.a(0));if(r.plus(a).isGreaterThan(e.walletBalance))throw new Error("Wallet balance is insufficient to fund transaction");return new s.a(e.walletBalance).minus(a).minus(r).isLessThanOrEqualTo(o.d)}(Object(n.a)(Object(n.a)({},e),{},{walletBalance:u,numInputs:l}));E&&(t=!1);for(var h=0;h<a.length;h+=1){for(var f=a[h],b=f.utxos,v=0;v<b.length;v+=1)p.push(Object(n.a)(Object(n.a)({},b[v]),{},{multisig:f.multisig,bip32Path:f.bip32Path,change:f.change}));if(m=m.plus(f.balanceSats),!E){var g=Object(i.estimateMultisigTransactionFee)(Object(n.a)(Object(n.a)({},e),{},{numInputs:p.length,numOutputs:r.length})),y=Object(i.estimateMultisigTransactionFee)(Object(n.a)(Object(n.a)({},e),{},{numInputs:p.length,numOutputs:r.length+1})),S=m.minus(d);if(S.minus(g).isLessThanOrEqualTo(o.d)&&S.minus(g).isGreaterThanOrEqualTo(0)){t=!1;break}if(S.isGreaterThan(y)){t=!0;break}}}return[p,t]}},347:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return I})),a.d(t,"b",(function(){return w}));var n=a(9),r=a.n(n),s=a(16),i=a(12),o=a(14),c=a(13),l=a(0),u=a.n(l),d=a(6),p=a.n(d),m=a(847),E=a.n(m),h=a(470),f=a(585),b=a(443),v=a(864),g=a(350),y=a(1368),S=a(5),P=a(359),T=a.n(P),O=function(t){Object(o.a)(n,t);var a=Object(c.a)(n);function n(t){var o;return Object(i.a)(this,n),(o=a.call(this,t)).render=function(){var e=o.props,t=e.maxFileSize,a=e.validFileFormats,n=e.extendedPublicKeyImporter,r=e.handleBIP32PathChange,s=e.resetBIP32Path,i=e.bip32PathIsDefault,c=e.hasError,l=e.errorMessage,d=e.isTest,p=o.state.fileType;return u.a.createElement(h.a,{container:!0,direction:"column"},"JSON"===p&&!d&&u.a.createElement(h.a,{container:!0},u.a.createElement(h.a,{item:!0,md:6},u.a.createElement(f.a,{label:"BIP32 Path",value:n.bip32Path,onChange:r,error:c,helperText:l})),u.a.createElement(h.a,{item:!0,md:6},!i()&&u.a.createElement(b.a,{type:"button",variant:"contained",size:"small",onClick:s},"Default")),u.a.createElement(v.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),u.a.createElement("p",null,"When you are ready, upload the ",p," file from your Coldcard:"),u.a.createElement(g.a,null,u.a.createElement(E.a,{className:c?T.a.dropzoneDull:T.a.dropzone,onDrop:o.onDrop,multiple:!1,minSize:1,maxSize:t,accept:a,disableClick:c},u.a.createElement(y.a,{classes:{root:T.a.uploadIcon}}),u.a.createElement("p",{className:T.a.instruction},"JSON"===p?"Upload The XPUB":"Upload Signed PSBT"))))},o.singleAcceptedFile=function(e,t){return 0===t.length&&1===e.length},o.onDrop=function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,i,c,l,u,d,p,m,E;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=o.props,i=s.onReceive,c=s.onReceivePSBT,l=s.setError,u=s.hasError,d=o.state.fileType,!u){t.next=4;break}return t.abrupt("return");case 4:if(!o.singleAcceptedFile(a,n)){t.next=29;break}if(p=a[0],"JSON"!==d){t.next=14;break}return t.t0=i,t.next=10,p.text();case 10:t.t1=t.sent,(0,t.t0)(t.t1),t.next=27;break;case 14:return t.next=16,p.arrayBuffer();case 16:if(m=t.sent,!(E=e.from(m).toString("hex")).startsWith(S.PSBT_MAGIC_HEX)){t.next=22;break}c(E),t.next=27;break;case 22:return t.t2=c,t.next=25,p.text();case 25:t.t3=t.sent,(0,t.t2)(t.t3);case 27:t.next=30;break;case 29:1===n.length?l("The file you attempted to upload was unacceptable. File type must be .".concat(d.toLowerCase(),".")):n.length>1&&l("This dropzone only accepts a single file.");case 30:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),o.state={fileType:t.fileType||"JSON"},o}return n}(l.Component);O.defaultProps={onReceive:null,onReceivePSBT:null,handleBIP32PathChange:null,resetBIP32Path:null,bip32PathIsDefault:null,errorMessage:"",hasError:p.a.bool,maxFileSize:1048576,fileType:"JSON",validFileFormats:".json",extendedPublicKeyImporter:null,isTest:!1};var I=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(O);I.defaultProps={fileType:"JSON",validFileFormats:".json"};var w=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(O);w.defaultProps={fileType:"PSBT",validFileFormats:".psbt"}}).call(this,a(10).Buffer)},359:function(e,t,a){e.exports={uploadIcon:"ColdcardFileReader_uploadIcon__1gKkv",instruction:"ColdcardFileReader_instruction__2JEz4",dropzone:"ColdcardFileReader_dropzone__32-R_",dropzoneDull:"ColdcardFileReader_dropzoneDull__2lJaF ColdcardFileReader_dropzone__32-R_",uploadContainer:"ColdcardFileReader_uploadContainer__3NUxc"}},534:function(e,t,a){},58:function(e,t,a){"use strict";var n=a(9),r=a.n(n),s=a(16),i=a(12),o=a(20),c=a(469),l=function(){function e(t){Object(i.a)(this,e),this.params=t||{}}return Object(o.a)(e,[{key:"postprocess",value:function(e){return e}},{key:"interaction",value:function(){throw Error("Define the `interaction` method in your subclass of `Test`.")}},{key:"matches",value:function(e,t){return"object"===typeof e&&"object"===typeof t?Object.keys(t).every((function(a){return e[a]===t[a]})):e===t}}]),Object(o.a)(e,[{key:"diff",value:function(e,t){if("string"===typeof e&&"string"===typeof t)return Object(c.diffChars)(e,t);if("object"===typeof e&&"object"===typeof t){if(void 0!==e.length&&void 0!==t.length)return Object(c.diffArrays)(e,t);if(void 0===e.length&&void 0===t.length)return Object(c.diffJson)(e,t)}return null}},{key:"supports",value:function(){return!0}},{key:"name",value:function(){return this.params.name}},{key:"description",value:function(){return this.params.description}},{key:"expected",value:function(){return this.params.expected}},{key:"actual",value:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postprocess(t?this.interaction().parse(t):this.interaction().run()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual();case 3:return t=e.sent,e.abrupt("return",this.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"runParse",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual(t);case 3:return a=e.sent,n=a.rootFingerprint?{pubkey:a.pubkey,xpub:a.xpub||a.tpub,rootFingerprint:a.rootFingerprint}:Object.values(a)[0],e.abrupt("return",this.resolve(n));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve",value:function(e){var t=this.expected();return this.matches(t,e)?{status:"success"}:{status:"failure",expected:t,actual:e,diff:this.diff(t,e)}}}]),e}();l.SUCCESS="success",l.FAILURE="failure",l.ERROR="error",t.a=l},857:function(e){e.exports=JSON.parse('{"a":"0.3.11"}')},868:function(e,t,a){e.exports=a(1350)},902:function(e,t){},904:function(e,t){},914:function(e,t){},916:function(e,t){},929:function(e,t){},932:function(e,t){}},[[868,1,2]]]);
//# sourceMappingURL=main.420ad095.chunk.js.map